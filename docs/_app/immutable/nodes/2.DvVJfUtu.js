import{a as safe_not_equal,e as element,y as empty,R as head_selector,c as claim_element,f as detach,w as attr,h as append_hydration,n as noop,U as destroy_each,g as insert_hydration,p as space,a6 as HtmlTagHydration,b as children,v as claim_space,a7 as claim_html_tag,q as get_svelte_dataset,A as onMount,t as text$1,d as claim_text,a9 as src_url_equal,j as set_data,T as listen,Y as svg_element,Z as claim_svg_element,C as binding_callbacks,B as set_style,I as add_render_callback,W as toggle_class,a2 as add_iframe_resize_listener,k as component_subscribe,a1 as createEventDispatcher,r as run_all,aa as set_store_value,S as action_destroyer,X as assign,a3 as setContext}from"../chunks/scheduler.Bx0jwPGs.js";import{S as SvelteComponent,i as init,c as create_component,b as claim_component,m as mount_component,t as transition_in,a as transition_out,d as destroy_component,g as group_outros,e as check_outros}from"../chunks/index.DFrbEdQj.js";import{e as ensure_array_like}from"../chunks/each.D6YF6ztN.js";import{d as descending,I as InternMap,c as constant$2,i as interpolateNumber,a as color,b as interpolateRgb,e as interpolateString,r as rollups,S as Selection,f as root,t as timer,h as dispatch,j as flatRollup}from"../chunks/transform.BPXmZvzC.js";import{s as side,p as productHeight,a as scrollY,b as prev}from"../chunks/misc.BFv8uLNg.js";const globals=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function get_each_context$5(b,w,C){const k=b.slice();return k[5]=w[C],k}function create_each_block$5(b){let w,C;return{c(){w=element("link"),this.h()},l(k){w=claim_element(k,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){attr(w,"rel","preload"),attr(w,"href",C=b[5]),attr(w,"as","font"),attr(w,"type","font/woff2"),attr(w,"crossorigin","")},m(k,T){insert_hydration(k,w,T)},p(k,T){T&16&&C!==(C=k[5])&&attr(w,"href",C)},d(k){k&&detach(w)}}}function create_fragment$f(b){let w,C,k,T,S,M,$,E,I,D,A,P,L,R,N,H,z,j,W,U,O,q,V,Y,te,J;document.title=w=b[0];let B=ensure_array_like(b[4]),ee=[];for(let K=0;K<B.length;K+=1)ee[K]=create_each_block$5(get_each_context$5(b,B,K));return{c(){C=element("meta"),k=element("meta"),T=element("meta"),S=element("meta"),M=element("meta"),$=element("meta"),E=element("meta"),I=element("meta"),D=element("meta"),A=element("meta"),L=element("meta"),R=element("meta"),N=element("meta"),H=element("meta"),z=element("meta"),j=element("meta"),W=element("meta"),U=element("meta"),O=element("meta"),V=element("meta"),Y=element("link");for(let K=0;K<ee.length;K+=1)ee[K].c();J=empty(),this.h()},l(K){const Q=head_selector("svelte-1htu80s",document.head);C=claim_element(Q,"META",{name:!0,content:!0}),k=claim_element(Q,"META",{name:!0,content:!0}),T=claim_element(Q,"META",{name:!0,content:!0}),S=claim_element(Q,"META",{property:!0,content:!0}),M=claim_element(Q,"META",{property:!0,content:!0}),$=claim_element(Q,"META",{property:!0,content:!0}),E=claim_element(Q,"META",{property:!0,content:!0}),I=claim_element(Q,"META",{property:!0,content:!0}),D=claim_element(Q,"META",{property:!0,content:!0}),A=claim_element(Q,"META",{property:!0,content:!0}),L=claim_element(Q,"META",{property:!0,content:!0}),R=claim_element(Q,"META",{property:!0,content:!0}),N=claim_element(Q,"META",{property:!0,content:!0}),H=claim_element(Q,"META",{name:!0,content:!0}),z=claim_element(Q,"META",{name:!0,content:!0}),j=claim_element(Q,"META",{name:!0,content:!0}),W=claim_element(Q,"META",{name:!0,content:!0}),U=claim_element(Q,"META",{name:!0,content:!0}),O=claim_element(Q,"META",{name:!0,content:!0}),V=claim_element(Q,"META",{name:!0,content:!0}),Y=claim_element(Q,"LINK",{rel:!0,href:!0});for(let Z=0;Z<ee.length;Z+=1)ee[Z].l(Q);J=empty(),Q.forEach(detach),this.h()},h(){attr(C,"name","description"),attr(C,"content",b[1]),attr(k,"name","author"),attr(k,"content","The Pudding"),attr(T,"name","news_keywords"),attr(T,"content",b[3]),attr(S,"property","og:title"),attr(S,"content",b[0]),attr(M,"property","og:site_name"),attr(M,"content","The Pudding"),attr($,"property","og:url"),attr($,"content",b[2]),attr(E,"property","og:description"),attr(E,"content",b[1]),attr(I,"property","og:type"),attr(I,"content","article"),attr(D,"property","og:locale"),attr(D,"content","en_US"),attr(A,"property","og:image"),attr(A,"content",P=b[2]+"/assets/social-facebook.jpg"),attr(L,"property","og:image:type"),attr(L,"content","image/jpeg"),attr(R,"property","og:image:width"),attr(R,"content","1200"),attr(N,"property","og:image:height"),attr(N,"content","600"),attr(H,"name","twitter:card"),attr(H,"content","summary_large_image"),attr(z,"name","twitter:site"),attr(z,"content","https://pudding.cool"),attr(j,"name","twitter:creator"),attr(j,"content","@puddingviz"),attr(W,"name","twitter:title"),attr(W,"content",b[0]),attr(U,"name","twitter:description"),attr(U,"content",b[1]),attr(O,"name","twitter:image:src"),attr(O,"content",q=b[2]+"/assets/social-twitter.jpg"),attr(V,"name","robots"),attr(V,"content","max-image-preview:large"),attr(Y,"rel","canonical"),attr(Y,"href",te=b[2]+"/")},m(K,Q){append_hydration(document.head,C),append_hydration(document.head,k),append_hydration(document.head,T),append_hydration(document.head,S),append_hydration(document.head,M),append_hydration(document.head,$),append_hydration(document.head,E),append_hydration(document.head,I),append_hydration(document.head,D),append_hydration(document.head,A),append_hydration(document.head,L),append_hydration(document.head,R),append_hydration(document.head,N),append_hydration(document.head,H),append_hydration(document.head,z),append_hydration(document.head,j),append_hydration(document.head,W),append_hydration(document.head,U),append_hydration(document.head,O),append_hydration(document.head,V),append_hydration(document.head,Y);for(let Z=0;Z<ee.length;Z+=1)ee[Z]&&ee[Z].m(document.head,null);append_hydration(document.head,J)},p(K,[Q]){if(Q&1&&w!==(w=K[0])&&(document.title=w),Q&2&&attr(C,"content",K[1]),Q&8&&attr(T,"content",K[3]),Q&1&&attr(S,"content",K[0]),Q&4&&attr($,"content",K[2]),Q&2&&attr(E,"content",K[1]),Q&4&&P!==(P=K[2]+"/assets/social-facebook.jpg")&&attr(A,"content",P),Q&1&&attr(W,"content",K[0]),Q&2&&attr(U,"content",K[1]),Q&4&&q!==(q=K[2]+"/assets/social-twitter.jpg")&&attr(O,"content",q),Q&4&&te!==(te=K[2]+"/")&&attr(Y,"href",te),Q&16){B=ensure_array_like(K[4]);let Z;for(Z=0;Z<B.length;Z+=1){const he=get_each_context$5(K,B,Z);ee[Z]?ee[Z].p(he,Q):(ee[Z]=create_each_block$5(he),ee[Z].c(),ee[Z].m(J.parentNode,J))}for(;Z<ee.length;Z+=1)ee[Z].d(1);ee.length=B.length}},i:noop,o:noop,d(K){detach(C),detach(k),detach(T),detach(S),detach(M),detach($),detach(E),detach(I),detach(D),detach(A),detach(L),detach(R),detach(N),detach(H),detach(z),detach(j),detach(W),detach(U),detach(O),detach(V),detach(Y),destroy_each(ee,K),detach(J)}}}function instance$a(b,w,C){let{title:k="Title TK"}=w,{description:T="Description TK"}=w,{url:S="https://pudding.cool"}=w,{keywords:M=""}=w,{preloadFont:$=[]}=w;return b.$$set=E=>{"title"in E&&C(0,k=E.title),"description"in E&&C(1,T=E.description),"url"in E&&C(2,S=E.url),"keywords"in E&&C(3,M=E.keywords),"preloadFont"in E&&C(4,$=E.preloadFont)},[k,T,S,M,$]}class Meta extends SvelteComponent{constructor(w){super(),init(this,w,instance$a,create_fragment$f,safe_not_equal,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function inView(b,w={}){let C;const k=S=>{const M=S[0].isIntersecting,$=M?"enter":"exit";if(b.dispatchEvent(new CustomEvent($)),w.progress&&M){const I={ratio:S[0].intersectionRatio};b.dispatchEvent(new CustomEvent("progress",{detail:I}))}},T=({root:S,top:M,bottom:$})=>{const E=M?M*-1:0,I=$?$*-1:0,D=`${E}px 0px ${I}px 0px`,A={root:S,rootMargin:D};C&&C.disconnect(),C=new IntersectionObserver(k,A),C.observe(b)};return T(w),{update(S){T(S)},destroy(){C&&C.disconnect()}}}const wordmark=`<svg width="201" height="49" viewBox="0 0 201 49" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M135.14 20.83V20.7C135.35 15.87 130.62 16.21 130.96 20.9C130.65 25.56 135.54 25.46 135.14 20.83Z" fill="black"/>
<path d="M115.78 20.76V20.63C115.66 19.64 115.61 18.26 114.72 17.59C113.88 16.96 112.53 17.28 112.11 18.18C111.23 19.94 110.95 24.19 113.74 24.3C115.53 24.4 115.84 21.9 115.78 20.76Z" fill="black"/>
<path d="M74.11 12.16C72.84 12.45 72.54 14.46 72.59 15.47V15.59C72.65 16.63 72.88 18.49 74.24 18.65C77.26 19.15 77.15 11.69 74.11 12.17V12.16Z" fill="black"/>
<path d="M183.3 16.4C180.71 15.78 180.17 19.49 182.96 19.56H183.05C184.75 19.32 184.93 16.92 183.3 16.4Z" fill="black"/>
<path d="M186.64 32.3C184.54 31.41 182.02 32.41 179.8 32.47C178.33 32.8 179.46 33.74 180.5 33.82C181.34 33.99 182.68 34.12 183.4 34.09H183.53C184.45 34.11 187.93 34 186.63 32.29L186.64 32.3Z" fill="black"/>
<path d="M52.21 17.36C52.07 17.04 51.59 16.57 51.23 16.54C50.21 16.31 48.9 16.86 48.73 17.99C48.63 18.66 49.25 19.35 49.89 19.29H49.96C50.88 19.29 52.74 18.59 52.21 17.36Z" fill="black"/>
<path d="M199.38 31.98L199.34 31.78C198.56 28.74 199.67 25.67 199.71 22.6C199.6 19.41 200.15 15.89 198.77 12.93C197.88 11.21 196.43 9.87001 195.14 8.45001C192.96 5.76001 189.79 3.09001 186.14 4.61001C182.59 6.19001 178.82 7.14001 174.97 7.78001C172.91 8.03001 170.96 7.24001 168.99 6.76001C165.73 5.88001 162.22 7.23001 158.99 6.48001C157.13 6.07001 155.9 4.61001 154.67 3.27001C151.5 -0.689993 147.33 -0.269993 142.84 0.570007C136.8 1.04001 134.51 0.170007 130.25 5.02001C127.91 7.16001 126.02 4.09001 124.36 2.68001C121.32 0.190007 116.11 0.210007 113.15 2.79001C110.42 5.82001 108.79 8.14001 104.25 7.12001C98.51 6.12001 92.58 7.17001 86.85 6.20001C84.72 5.71001 82.93 4.38001 80.97 3.49001C76.81 1.66001 68.46 0.820007 64.54 3.38001C62.9 4.47001 62.11 6.90001 60.32 7.39001C58.93 7.80001 57.41 7.17001 56.03 6.85001C53.05 6.03001 49.78 6.12001 46.88 7.13001C45.14 7.72001 43.33 8.43001 41.47 8.01001C38.72 7.29001 35.97 6.12001 33.88 4.17001C32.08 2.30001 29.8 0.920007 27.14 0.850007C23.35 0.600007 19.14 1.92001 15.29 1.93001C12.57 1.93001 9.58998 1.74001 6.90998 1.99001C0.399982 2.28001 -0.480018 6.83001 0.189982 12.28C0.269982 15.09 2.27998 16.95 3.50998 19.28C5.39998 23.4 2.86998 28.64 4.94998 32.76C6.23998 35.1 8.29998 37.01 10.18 38.86C12.14 40.58 14.89 40.76 17.39 40.73C25.23 40.02 33.05 40.98 40.91 40.71C44.54 40.68 48.11 38.97 51.72 40.03C54.81 40.82 58.07 41.28 61.18 40.61C62.72 40.33 64.26 39.85 65.83 39.78C70.21 39.94 74.89 41.83 79.1 39.81C81.71 38.95 82.43 33.84 85.65 35.3C86.38 35.68 86.95 36.34 87.52 36.93C89.52 39.24 92.25 40.98 95.36 40.84C101.39 40.5 107.37 40.29 113.42 40.65C117.07 40.68 120.73 40.27 124.41 40.6C139.3 40.34 154.24 40.85 169.17 40.66C170.19 40.71 171.31 40.86 172.22 41.15C175.64 42.32 176.87 46.06 181.01 47.23C191.4 50.94 203.17 44.06 199.38 31.99V31.98ZM19.78 14.05C18.14 14.35 16.49 14.55 16.45 16.62C16.32 21.1 17.33 25.68 17.04 30.18C16.76 32.45 14.01 31.87 12.32 31.95C10.1 31.97 7.85998 32.18 7.86998 29.59C7.64998 25.47 8.50998 21.22 8.53998 17.03C8.53998 16.18 8.31998 15.2 7.59998 14.74C6.78998 14.18 5.59998 14.35 4.75998 13.86C3.60998 13.23 3.78998 11.42 3.77998 9.96001C3.79998 9.17001 3.77998 8.39001 3.86998 7.66001C3.96998 6.13001 5.39998 5.75001 6.67998 5.81001C8.43998 5.81001 10.4 5.82001 12.11 5.81001H12.29C14.18 5.79001 16.45 5.77001 18.52 5.79001C20.18 5.69001 21.19 6.71001 21.15 8.36001C20.96 10.12 21.89 13.29 19.8 14.04L19.78 14.05ZM40.36 27.58C40.5 30.79 40.18 32.24 36.61 32.01C33.18 32.28 32.47 31.2 32.65 28.05C32.39 26.51 33.76 17.76 31.1 18.44C28.4 19.71 31.42 29.71 29.13 31.53C28.32 32.08 26.91 31.91 25.88 31.95C24.61 31.95 23.15 31.99 22.59 31.04C22.28 30.56 22.21 29.9 22.19 29.3C22.16 25.79 22.24 22.14 22.23 18.65V18.47C22.27 14.69 22.23 10.8 22.39 7.02001C22.45 6.08001 22.8 5.10001 23.77 4.84001C24.56 4.62001 25.43 4.68001 26.25 4.67001C27.46 4.67001 28.84 4.60001 29.42 5.50001C30.15 6.70001 29.65 8.24001 29.89 9.55001C29.97 10.03 30.14 10.44 30.45 10.66C30.83 10.94 31.4 10.9 32.02 10.72C34.73 9.57001 38.37 10.14 39.47 13.19C41.27 17.64 40.16 22.88 40.36 27.57V27.58ZM53.93 24.67C57.87 24.64 58.97 23.97 58.78 28.03V28.21C59.17 32.63 55.44 32.3 52.18 32.19C46.07 32.17 40.96 27.11 41.54 20.81C41.29 13.57 48.2 8.19001 55.02 10.44C59.02 11.44 60.67 16.57 58.42 19.83C57.12 21.73 54.72 22.18 52.52 22.52C49 23.4 51.93 24.81 53.92 24.69L53.93 24.67ZM81.78 22.56C80.5 24.01 78.64 24.78 76.8 25.22C75.49 25.52 74.3 26.14 74.04 27.53C73.77 28.61 74.1 29.83 73.71 30.89C72.9 32.6 70.33 31.79 68.77 31.98C67.07 32.1 65.41 31.68 65.43 29.66C65.32 26.05 65.43 22.45 65.52 18.91V18.73C65.57 15.25 65.67 11.82 65.83 8.36001C65.87 7.76001 65.98 7.09001 66.31 6.62001C66.7 6.04001 67.41 5.85001 68.09 5.80001C69.7 5.72001 71.37 5.72001 72.97 5.71001C76.81 5.68001 81.65 6.77001 83.05 10.83C84.29 14.63 84.55 19.43 81.78 22.57V22.56ZM103.36 29.58C103.39 31.45 102.03 32.16 100.2 32C99.05 32.02 98.15 31.53 97.44 30.64C97.03 30.21 96.59 29.87 96.08 29.9C94.93 30.01 94.13 31.15 93.13 31.66C90.33 33.38 86.46 31.72 85.77 28.51C84.38 23.69 85.25 18.46 85.25 13.44C85.08 10.67 86.58 10.34 88.94 10.44C91.03 10.34 92.95 10.5 92.88 12.86C93.25 14.69 91.74 24.01 94.53 23.24C95.34 22.91 95.51 21.82 95.56 21.02C95.65 18.34 95.54 15.61 95.59 12.93C95.62 12.21 95.72 11.36 96.31 10.89C97.18 10.23 98.72 10.46 99.83 10.42C100.97 10.41 102.24 10.42 102.79 11.28C103.24 11.94 103.24 12.84 103.26 13.63C103.29 15.97 103.33 18.49 103.33 20.63V20.81C103.32 23.71 103.43 26.65 103.36 29.58ZM122.84 30.03C122.72 31.86 120.83 32.18 119.06 31.88C118.15 31.77 117.52 31.14 117.11 30.36C116.56 29.25 115.42 29.19 114.52 29.96C104.31 39.06 101.78 17.1 108.39 12.03C109.58 11.04 111.07 10.43 112.58 10.19C113.75 10 114.88 9.61001 115.19 8.38001C115.46 7.50001 115.29 6.44001 115.73 5.61001C116.32 4.41001 118.25 4.60001 119.71 4.61001C120.3 4.64001 120.93 4.72001 121.43 5.05001C122.09 5.49001 122.27 6.34001 122.34 7.09001C122.54 10.75 122.64 14.89 122.74 18.46V18.64C122.76 22.39 123.05 26.25 122.83 30.03H122.84ZM140.67 31.92C139.28 32.15 137.53 32.06 136.85 30.83C136.47 30.28 136.11 29.5 135.38 29.43C134.41 29.37 133.64 30.25 132.91 30.8C131.84 31.74 130.43 32.34 129.12 32.14C122.16 31.02 122.73 14.42 128.72 11.32C129.68 10.75 130.87 10.37 132.04 10.17C133.18 9.97001 134.23 9.72001 134.59 8.56001C134.89 7.66001 134.73 6.56001 135.12 5.68001C135.63 4.40001 137.6 4.58001 138.97 4.59001C140.59 4.49001 141.76 5.49001 141.77 7.15001C142.04 10.88 142.02 15.13 142.2 18.76V18.93C142.28 22.24 142.26 25.49 142.31 28.81C142.35 30.07 142.18 31.72 140.66 31.9L140.67 31.92ZM147.65 3.57001H147.8C148.92 3.50001 150.94 3.81001 151.48 5.18001C152.34 7.06001 151.08 9.19001 148.9 9.21001C147.56 9.30001 146.04 9.27001 145.07 8.22001C143.34 6.21001 145.25 3.47001 147.66 3.57001H147.65ZM152.23 30.05C152.16 31.63 150.62 32.01 149.3 31.93C147.76 31.79 145.16 32.46 144.34 31C143.57 28.09 144.22 24.82 144.13 21.82V21.64C144.48 18.47 143.81 14.41 144.95 11.3C145.81 10.06 148.33 10.53 149.87 10.54C151.4 10.6 151.8 12.12 151.8 13.42C151.94 16.15 152.04 18.9 152.12 21.68C152.19 24.46 152.4 27.26 152.22 30.04L152.23 30.05ZM171.97 29.23C172.09 31.77 170.39 32.08 168.28 32C166.11 32.1 164.22 31.93 164.27 29.48C164.21 26.6 164.43 23.74 164.2 20.88C164.13 20.36 163.97 19.77 163.61 19.42C162.82 18.65 161.96 19.59 161.82 20.43C161.28 23.53 161.87 26.82 161.59 29.95C161.51 30.54 161.28 31.11 160.81 31.47C159.86 32.18 158.28 31.96 157.1 31.99C155.7 32.02 154.39 31.86 154.04 30.5C153.5 27.64 154.04 24.53 153.89 21.62V21.44C153.95 18.34 153.72 15.09 154.13 12.04C154.47 10.32 156.73 10.28 158.18 10.68C159.33 10.94 159.81 12.59 161.02 12.55C162.17 12.45 162.99 11.32 163.98 10.8C166.38 9.31001 169.96 10.33 171.06 13C172.91 18.15 171.74 23.82 171.97 29.24V29.23ZM190.37 36.8C188.4 39.05 185.04 39.78 182.2 39.7H182.02C178.11 39.74 172.73 37.94 174.6 33.42C174.94 32.32 174.57 31.31 174.08 30.33C173.07 28.42 174.3 26.5 175.18 24.78C175.57 23.81 175.06 22.85 174.6 22C173.76 20.49 173.31 18.85 173.42 17.24C173.61 12.11 178.83 9.66001 183.45 10.11C184.09 10.11 184.75 10.09 185.35 9.87001C186.42 9.56001 187.07 8.34001 188 7.79001C189.22 7.14001 190.75 8.58001 191.16 9.63001C191.54 10.75 190.48 11.83 190.52 12.92C190.52 13.53 190.76 14.15 190.97 14.73C193.4 21.26 189.02 25.56 182.5 25.48C181.86 25.58 180.66 25.7 180.63 26.46C180.69 26.9 181.62 27.06 182.54 26.91C184.7 26.59 187.07 25.77 189.2 26.63C192.94 28.28 192.7 34.11 190.35 36.81L190.37 36.8Z" fill="black"/>
<path d="M39.47 13.2C38.37 10.14 34.73 9.58001 32.02 10.73C31.4 10.91 30.83 10.95 30.45 10.67C30.14 10.45 29.97 10.04 29.89 9.56001C29.65 8.25001 30.15 6.71001 29.42 5.51001C28.84 4.61001 27.46 4.69001 26.25 4.68001C25.43 4.69001 24.56 4.62001 23.77 4.85001C22.79 5.11001 22.45 6.10001 22.39 7.03001C22.23 10.82 22.27 14.7 22.23 18.48V18.66C22.23 22.15 22.16 25.8 22.19 29.31C22.21 29.9 22.28 30.57 22.59 31.05C23.15 32 24.61 31.97 25.88 31.96C26.91 31.92 28.32 32.09 29.13 31.54C31.42 29.72 28.4 19.72 31.1 18.45C33.76 17.77 32.4 26.52 32.65 28.06C32.47 31.21 33.18 32.28 36.61 32.02C40.18 32.25 40.5 30.79 40.36 27.59C40.16 22.9 41.28 17.66 39.47 13.21V13.2Z" fill="white"/>
<path d="M21.13 8.37C21.18 6.71 20.16 5.7 18.5 5.8C16.43 5.78 14.16 5.8 12.27 5.82H12.09C10.38 5.84 8.41999 5.82 6.65999 5.83C5.38999 5.77 3.95999 6.16 3.84999 7.68C3.75999 8.4 3.77999 9.19 3.75999 9.98C3.76999 11.44 3.58999 13.24 4.73999 13.88C5.58999 14.37 6.76999 14.21 7.57999 14.76C8.30999 15.21 8.51999 16.2 8.51999 17.05C8.49999 21.24 7.62999 25.48 7.84999 29.61C7.83999 32.2 10.08 32 12.3 31.97C13.99 31.88 16.74 32.47 17.02 30.2C17.31 25.7 16.3 21.12 16.43 16.64C16.47 14.57 18.12 14.37 19.76 14.07C21.85 13.32 20.92 10.14 21.11 8.39L21.13 8.37Z" fill="white"/>
<path d="M52.53 22.5C54.73 22.16 57.12 21.72 58.43 19.81C60.68 16.56 59.03 11.42 55.03 10.42C48.21 8.18001 41.3 13.55 41.55 20.79C40.96 27.1 46.08 32.15 52.19 32.17C55.45 32.28 59.19 32.62 58.79 28.19V28.01C58.97 23.95 57.88 24.62 53.94 24.65C51.95 24.77 49.02 23.36 52.54 22.48L52.53 22.5ZM49.96 19.29H49.89C49.25 19.35 48.63 18.66 48.73 17.99C48.9 16.86 50.21 16.32 51.23 16.54C51.59 16.56 52.07 17.03 52.21 17.36C52.74 18.59 50.88 19.28 49.96 19.29Z" fill="white"/>
<path d="M72.97 5.71C71.36 5.71 69.7 5.72 68.09 5.8C67.41 5.85 66.7 6.04 66.31 6.62C65.98 7.09 65.87 7.76 65.83 8.36C65.68 11.82 65.58 15.26 65.53 18.73V18.91C65.44 22.45 65.33 26.05 65.44 29.66C65.42 31.68 67.08 32.11 68.78 31.98C70.33 31.79 72.9 32.6 73.72 30.89C74.11 29.84 73.78 28.61 74.05 27.53C74.31 26.14 75.5 25.52 76.81 25.22C78.65 24.78 80.51 24.01 81.79 22.56C84.56 19.42 84.3 14.62 83.06 10.82C81.66 6.76 76.82 5.67 72.98 5.7L72.97 5.71ZM74.24 18.64C72.88 18.48 72.65 16.62 72.6 15.58V15.46C72.54 14.46 72.85 12.45 74.11 12.15C77.15 11.67 77.26 19.13 74.24 18.63V18.64Z" fill="white"/>
<path d="M142.21 18.94V18.77C142.03 15.13 142.05 10.89 141.78 7.15999C141.78 5.49999 140.6 4.50999 138.98 4.59999C137.61 4.57999 135.64 4.39999 135.13 5.68999C134.74 6.56999 134.9 7.66999 134.6 8.56999C134.24 9.72999 133.19 9.97999 132.05 10.18C130.88 10.37 129.68 10.75 128.73 11.33C122.74 14.44 122.16 31.04 129.13 32.15C130.44 32.35 131.85 31.75 132.92 30.81C133.64 30.25 134.41 29.38 135.39 29.44C136.12 29.51 136.48 30.29 136.86 30.84C137.55 32.07 139.29 32.17 140.68 31.93C142.2 31.75 142.37 30.1 142.33 28.84C142.28 25.52 142.29 22.26 142.22 18.96L142.21 18.94ZM130.96 20.9C130.62 16.21 135.35 15.87 135.14 20.7V20.83C135.54 25.47 130.65 25.56 130.96 20.9Z" fill="white"/>
<path d="M171.06 13C169.96 10.33 166.38 9.30999 163.98 10.8C162.99 11.32 162.17 12.45 161.02 12.55C159.81 12.59 159.33 10.94 158.18 10.68C156.73 10.29 154.47 10.32 154.13 12.04C153.72 15.09 153.95 18.35 153.89 21.44V21.62C154.05 24.53 153.51 27.64 154.05 30.5C154.39 31.87 155.71 32.03 157.11 31.99C158.29 31.96 159.87 32.18 160.82 31.47C161.29 31.12 161.52 30.54 161.6 29.95C161.88 26.81 161.29 23.53 161.83 20.43C161.97 19.58 162.84 18.65 163.62 19.42C163.98 19.78 164.14 20.36 164.21 20.88C164.44 23.74 164.21 26.6 164.28 29.48C164.23 31.93 166.12 32.1 168.29 32C170.4 32.08 172.1 31.78 171.98 29.23C171.75 23.82 172.92 18.14 171.07 12.99L171.06 13Z" fill="white"/>
<path d="M189.23 26.62C187.1 25.76 184.73 26.57 182.57 26.9C181.65 27.05 180.71 26.9 180.66 26.45C180.7 25.69 181.89 25.57 182.53 25.47C189.06 25.55 193.43 21.25 191 14.72C190.78 14.14 190.54 13.52 190.55 12.91C190.51 11.83 191.57 10.74 191.19 9.62C190.78 8.57 189.25 7.13 188.03 7.78C187.1 8.34 186.44 9.56 185.38 9.86C184.78 10.08 184.12 10.1 183.48 10.1C178.86 9.65 173.64 12.1 173.45 17.23C173.34 18.84 173.78 20.48 174.63 21.99C175.09 22.84 175.59 23.8 175.21 24.77C174.32 26.49 173.1 28.42 174.11 30.32C174.6 31.3 174.97 32.31 174.63 33.41C172.76 37.92 178.14 39.73 182.05 39.68H182.23C185.06 39.76 188.43 39.03 190.4 36.78C192.75 34.09 193 28.25 189.25 26.6L189.23 26.62ZM183.3 16.4C184.93 16.92 184.75 19.32 183.05 19.55H182.96C180.17 19.5 180.71 15.78 183.3 16.4ZM183.54 34.09H183.41C182.69 34.12 181.35 33.99 180.51 33.82C179.47 33.74 178.33 32.8 179.81 32.47C182.03 32.41 184.54 31.41 186.65 32.3C187.95 34 184.47 34.12 183.55 34.09H183.54Z" fill="white"/>
<path d="M151.81 13.43C151.81 12.12 151.41 10.61 149.88 10.55C148.34 10.54 145.82 10.07 144.96 11.31C143.82 14.42 144.49 18.48 144.14 21.65V21.83C144.22 24.83 143.57 28.1 144.34 31.01C145.16 32.47 147.75 31.79 149.3 31.94C150.62 32.01 152.16 31.64 152.23 30.06C152.41 27.28 152.2 24.48 152.13 21.7C152.05 18.91 151.95 16.17 151.81 13.44V13.43Z" fill="white"/>
<path d="M148.89 9.21C151.07 9.19 152.33 7.06 151.47 5.18C150.94 3.81 148.91 3.51 147.79 3.57H147.64C145.23 3.47 143.32 6.21 145.05 8.22C146.02 9.27 147.54 9.3 148.88 9.21H148.89Z" fill="white"/>
<path d="M122.75 18.46C122.65 14.89 122.55 10.74 122.35 7.08999C122.28 6.32999 122.09 5.47999 121.44 5.04999C120.95 4.71999 120.32 4.63999 119.72 4.60999C118.25 4.59999 116.32 4.40999 115.74 5.60999C115.3 6.44999 115.47 7.49999 115.2 8.37999C114.89 9.60999 113.76 9.99999 112.59 10.19C111.08 10.43 109.59 11.03 108.4 12.03C101.79 17.1 104.32 39.06 114.53 29.96C115.42 29.19 116.56 29.25 117.12 30.36C117.53 31.14 118.15 31.77 119.07 31.88C120.84 32.18 122.73 31.86 122.85 30.03C123.07 26.25 122.78 22.39 122.76 18.64V18.46H122.75ZM113.73 24.3C110.93 24.19 111.22 19.94 112.1 18.18C112.53 17.29 113.87 16.96 114.71 17.59C115.6 18.26 115.66 19.65 115.77 20.63V20.76C115.83 21.9 115.53 24.4 113.73 24.3Z" fill="white"/>
<path d="M103.33 20.62C103.33 18.48 103.3 15.97 103.26 13.62C103.24 12.83 103.24 11.93 102.79 11.27C102.24 10.41 100.97 10.4 99.83 10.41C98.71 10.46 97.18 10.23 96.31 10.88C95.72 11.34 95.62 12.19 95.59 12.92C95.54 15.6 95.65 18.33 95.56 21.01C95.51 21.81 95.34 22.9 94.53 23.23C91.74 24 93.24 14.68 92.88 12.85C92.94 10.49 91.02 10.33 88.94 10.43C86.58 10.33 85.08 10.66 85.25 13.43C85.25 18.45 84.39 23.68 85.77 28.5C86.46 31.71 90.33 33.38 93.13 31.65C94.13 31.14 94.93 30.01 96.08 29.89C96.59 29.86 97.03 30.19 97.44 30.63C98.16 31.52 99.05 32.01 100.2 31.99C102.04 32.15 103.39 31.45 103.36 29.57C103.43 26.64 103.32 23.7 103.33 20.8V20.62Z" fill="white"/>
</svg>
`;function get_each_context$4(b,w,C){const k=b.slice();return k[5]=w[C],k}function get_each_context_1$4(b,w,C){const k=b.slice();k[8]=w[C].hed,k[2]=w[C].url,k[9]=w[C].image;const T=k[2].startsWith("http")?k[2]:`https://pudding.cool/${k[2]}`;return k[10]=T,k}function create_each_block_1$4(b){let w,C,k,T,S,M,$=b[8]+"",E,I,D;return{c(){w=element("div"),C=element("a"),k=element("img"),S=space(),M=element("span"),E=text$1($),D=space(),this.h()},l(A){w=claim_element(A,"DIV",{class:!0});var P=children(w);C=claim_element(P,"A",{href:!0,class:!0});var L=children(C);k=claim_element(L,"IMG",{src:!0,alt:!0}),S=claim_space(L),M=claim_element(L,"SPAN",{class:!0});var R=children(M);E=claim_text(R,$),R.forEach(detach),L.forEach(detach),D=claim_space(P),P.forEach(detach),this.h()},h(){src_url_equal(k.src,T="https://pudding.cool/common/assets/thumbnails/640/"+b[9]+".jpg")||attr(k,"src",T),attr(k,"alt","thumbnail"),attr(M,"class","svelte-1i1osgl"),attr(C,"href",I=b[10]),attr(C,"class","svelte-1i1osgl"),attr(w,"class","story svelte-1i1osgl")},m(A,P){insert_hydration(A,w,P),append_hydration(w,C),append_hydration(C,k),append_hydration(C,S),append_hydration(C,M),append_hydration(M,E),append_hydration(w,D)},p(A,P){P&1&&!src_url_equal(k.src,T="https://pudding.cool/common/assets/thumbnails/640/"+A[9]+".jpg")&&attr(k,"src",T),P&1&&$!==($=A[8]+"")&&set_data(E,$),P&1&&I!==(I=A[10])&&attr(C,"href",I)},d(A){A&&detach(w)}}}function create_each_block$4(b){let w,C,k,T=b[5].name.toUpperCase()+"",S,M;return{c(){w=element("li"),C=element("a"),k=element("span"),S=text$1(T),M=space(),this.h()},l($){w=claim_element($,"LI",{class:!0});var E=children(w);C=claim_element(E,"A",{href:!0,target:!0,class:!0});var I=children(C);k=claim_element(I,"SPAN",{class:!0});var D=children(k);S=claim_text(D,T),D.forEach(detach),I.forEach(detach),M=claim_space(E),E.forEach(detach),this.h()},h(){attr(k,"class","svelte-1i1osgl"),attr(C,"href",b[5].url),attr(C,"target","_self"),attr(C,"class","svelte-1i1osgl"),attr(w,"class","svelte-1i1osgl")},m($,E){insert_hydration($,w,E),append_hydration(w,C),append_hydration(C,k),append_hydration(k,S),append_hydration(w,M)},p:noop,d($){$&&detach(w)}}}function create_fragment$e(b){let w,C,k,T,S,M,$,E,I=`<a href="https://pudding.cool" target="_self" class="svelte-1i1osgl">The Pudding</a>
			is a digital publication that explains ideas debated in culture with visual
			essays.`,D,A,P,L=ensure_array_like(b[0]),R=[];for(let z=0;z<L.length;z+=1)R[z]=create_each_block_1$4(get_each_context_1$4(b,L,z));let N=ensure_array_like(b[1]),H=[];for(let z=0;z<N.length;z+=1)H[z]=create_each_block$4(get_each_context$4(b,N,z));return{c(){w=element("footer"),C=element("section");for(let z=0;z<R.length;z+=1)R[z].c();k=space(),T=element("section"),S=element("div"),M=new HtmlTagHydration(!1),$=space(),E=element("p"),E.innerHTML=I,D=space(),A=element("section"),P=element("ul");for(let z=0;z<H.length;z+=1)H[z].c();this.h()},l(z){w=claim_element(z,"FOOTER",{class:!0});var j=children(w);C=claim_element(j,"SECTION",{class:!0});var W=children(C);for(let Y=0;Y<R.length;Y+=1)R[Y].l(W);W.forEach(detach),k=claim_space(j),T=claim_element(j,"SECTION",{class:!0});var U=children(T);S=claim_element(U,"DIV",{class:!0});var O=children(S);M=claim_html_tag(O,!1),O.forEach(detach),$=claim_space(U),E=claim_element(U,"P",{"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-qqs5dy"&&(E.innerHTML=I),U.forEach(detach),D=claim_space(j),A=claim_element(j,"SECTION",{class:!0});var q=children(A);P=claim_element(q,"UL",{class:!0});var V=children(P);for(let Y=0;Y<H.length;Y+=1)H[Y].l(V);V.forEach(detach),q.forEach(detach),j.forEach(detach),this.h()},h(){attr(C,"class","stories svelte-1i1osgl"),M.a=null,attr(S,"class","wordmark svelte-1i1osgl"),attr(T,"class","about svelte-1i1osgl"),attr(P,"class","svelte-1i1osgl"),attr(A,"class","links svelte-1i1osgl"),attr(w,"class","svelte-1i1osgl")},m(z,j){insert_hydration(z,w,j),append_hydration(w,C);for(let W=0;W<R.length;W+=1)R[W]&&R[W].m(C,null);append_hydration(w,k),append_hydration(w,T),append_hydration(T,S),M.m(wordmark,S),append_hydration(T,$),append_hydration(T,E),append_hydration(w,D),append_hydration(w,A),append_hydration(A,P);for(let W=0;W<H.length;W+=1)H[W]&&H[W].m(P,null)},p(z,[j]){if(j&1){L=ensure_array_like(z[0]);let W;for(W=0;W<L.length;W+=1){const U=get_each_context_1$4(z,L,W);R[W]?R[W].p(U,j):(R[W]=create_each_block_1$4(U),R[W].c(),R[W].m(C,null))}for(;W<R.length;W+=1)R[W].d(1);R.length=L.length}if(j&2){N=ensure_array_like(z[1]);let W;for(W=0;W<N.length;W+=1){const U=get_each_context$4(z,N,W);H[W]?H[W].p(U,j):(H[W]=create_each_block$4(U),H[W].c(),H[W].m(P,null))}for(;W<H.length;W+=1)H[W].d(1);H.length=N.length}},i:noop,o:noop,d(z){z&&detach(w),destroy_each(R,z),destroy_each(H,z)}}}function instance$9(b,w,C){let k,T=[];const M=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`,$=[{name:"about",url:"https://pudding.cool/about"},{name:"facebook",url:"https://facebook.com/pudding.viz/"},{name:"twitter",url:"https://twitter.com/puddingviz/"},{name:"instagram",url:"https://www.instagram.com/the.pudding"},{name:"patreon",url:"https://patreon.com/thepudding/"},{name:"privacy",url:"https://pudding.cool/privacy/"},{name:"newsletter",url:"https://thepuddingmail.substack.com"},{name:"rss",url:"https://pudding.cool/feed/index.xml"}];return onMount(async()=>{k=window.location.href;const I=await(await fetch(M)).json();C(0,T=I.filter(D=>!k.includes(D.url)).slice(0,4))}),[T,$,M]}let Footer$1=class extends SvelteComponent{constructor(w){super(),init(this,w,instance$9,create_fragment$e,safe_not_equal,{})}};class PuddingLogo extends SvelteComponent{constructor(w){super(),init(this,w,null,null,safe_not_equal,{})}}function create_fragment$d(b){let w,C,k,T,S,M,$,E,I,D="The Sadness of Song: How Pop Music is Turning to the Dark Side",A,P,L=`An analysis of the emotional landscape of popular music over the last 60
		years`,R,N,H='By <a href="https://pudding.cool/author/claude" target="_blank">Claude 3</a>',z;return T=new PuddingLogo({}),{c(){w=element("header"),C=element("div"),k=element("a"),create_component(T.$$.fragment),S=space(),M=element("img"),E=space(),I=element("h1"),I.textContent=D,A=space(),P=element("p"),P.textContent=L,R=space(),N=element("div"),N.innerHTML=H,this.h()},l(j){w=claim_element(j,"HEADER",{class:!0});var W=children(w);C=claim_element(W,"DIV",{class:!0});var U=children(C);k=claim_element(U,"A",{href:!0,target:!0,rel:!0});var O=children(k);claim_component(T.$$.fragment,O),O.forEach(detach),U.forEach(detach),S=claim_space(W),M=claim_element(W,"IMG",{src:!0,alt:!0,class:!0}),E=claim_space(W),I=claim_element(W,"H1",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(I)!=="svelte-5tyn4s"&&(I.textContent=D),A=claim_space(W),P=claim_element(W,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(P)!=="svelte-geevic"&&(P.textContent=L),R=claim_space(W),N=claim_element(W,"DIV",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(N)!=="svelte-99phsk"&&(N.innerHTML=H),W.forEach(detach),this.h()},h(){attr(k,"href","https://pudding.cool"),attr(k,"target","_blank"),attr(k,"rel","noopener noreferrer"),attr(C,"class","logo-container svelte-16t128f"),src_url_equal(M.src,$="assets/cover-art.jpg")||attr(M,"src",$),attr(M,"alt","Cover art juxtaposing positive and negative imagery in hit songs"),attr(M,"class","cover-art svelte-16t128f"),attr(I,"class","svelte-16t128f"),attr(P,"class","subtitle svelte-16t128f"),attr(N,"class","byline svelte-16t128f"),attr(w,"class","svelte-16t128f")},m(j,W){insert_hydration(j,w,W),append_hydration(w,C),append_hydration(C,k),mount_component(T,k,null),append_hydration(w,S),append_hydration(w,M),append_hydration(w,E),append_hydration(w,I),append_hydration(w,A),append_hydration(w,P),append_hydration(w,R),append_hydration(w,N),z=!0},p:noop,i(j){z||(transition_in(T.$$.fragment,j),z=!0)},o(j){transition_out(T.$$.fragment,j),z=!1},d(j){j&&detach(w),destroy_component(T)}}}let Header$1=class extends SvelteComponent{constructor(w){super(),init(this,w,null,create_fragment$d,safe_not_equal,{})}};function create_fragment$c(b){let w,C=`<p class="intro-text svelte-pzzhhg">In 2017, Julia Michaels&#39; hit song &quot;Issues&quot; took the pop world by storm. With
		lyrics like:</p> <blockquote>&quot;I&#39;m jealous, I&#39;m overzealous / When I&#39;m down, I get real down,&quot;</blockquote> <p>it laid bare the singer&#39;s emotional struggles over a catchy, upbeat melody.
		The song marked a striking shift in popular music: a mainstream embrace of
		darker, more negative themes.</p> <p class="intro-text svelte-pzzhhg">As it turns out, &quot;Issues&quot; was not an anomaly, but rather a sign of the
		times. Over the past decade, there has been a steady rise in the proportion
		of emotionally negative songs topping the Billboard charts, reflecting a
		broader shift in popular music&#39;s emotional landscape. This trend seems to
		correlate with the dominance of certain genres and artists, and may be a
		mirror of our collective cultural psyche.</p> <p class="intro-text svelte-pzzhhg">To understand this phenomenon, we analyzed the sentiment of every song that
		reached the Billboard Hot 100&#39;s top 10 from 1960 to 2020. Using advanced
		language processing, we assigned each song scores for eight basic emotions:
		anger, anticipation, disgust, fear, joy, sadness, surprise, and trust. The
		results paint a fascinating picture of the evolving emotional tone of
		popular music.</p>`;return{c(){w=element("section"),w.innerHTML=C,this.h()},l(k){w=claim_element(k,"SECTION",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(w)!=="svelte-nh90ve"&&(w.innerHTML=C),this.h()},h(){attr(w,"class","introduction svelte-pzzhhg")},m(k,T){insert_hydration(k,w,T)},p:noop,i:noop,o:noop,d(k){k&&detach(w)}}}class Introduction extends SvelteComponent{constructor(w){super(),init(this,w,null,create_fragment$c,safe_not_equal,{})}}var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(b){return new Function("d","return {"+b.map(function(w,C){return JSON.stringify(w)+": d["+C+'] || ""'}).join(",")+"}")}function customConverter(b,w){var C=objectConverter(b);return function(k,T){return w(C(k),T,b)}}function inferColumns(b){var w=Object.create(null),C=[];return b.forEach(function(k){for(var T in k)T in w||C.push(w[T]=T)}),C}function pad$1(b,w){var C=b+"",k=C.length;return k<w?new Array(w-k+1).join(0)+C:C}function formatYear$1(b){return b<0?"-"+pad$1(-b,6):b>9999?"+"+pad$1(b,6):pad$1(b,4)}function formatDate(b){var w=b.getUTCHours(),C=b.getUTCMinutes(),k=b.getUTCSeconds(),T=b.getUTCMilliseconds();return isNaN(b)?"Invalid Date":formatYear$1(b.getUTCFullYear())+"-"+pad$1(b.getUTCMonth()+1,2)+"-"+pad$1(b.getUTCDate(),2)+(T?"T"+pad$1(w,2)+":"+pad$1(C,2)+":"+pad$1(k,2)+"."+pad$1(T,3)+"Z":k?"T"+pad$1(w,2)+":"+pad$1(C,2)+":"+pad$1(k,2)+"Z":C||w?"T"+pad$1(w,2)+":"+pad$1(C,2)+"Z":"")}function dsvFormat(b){var w=new RegExp('["'+b+`
\r]`),C=b.charCodeAt(0);function k(A,P){var L,R,N=T(A,function(H,z){if(L)return L(H,z-1);R=H,L=P?customConverter(H,P):objectConverter(H)});return N.columns=R||[],N}function T(A,P){var L=[],R=A.length,N=0,H=0,z,j=R<=0,W=!1;A.charCodeAt(R-1)===NEWLINE&&--R,A.charCodeAt(R-1)===RETURN&&--R;function U(){if(j)return EOF;if(W)return W=!1,EOL;var q,V=N,Y;if(A.charCodeAt(V)===QUOTE){for(;N++<R&&A.charCodeAt(N)!==QUOTE||A.charCodeAt(++N)===QUOTE;);return(q=N)>=R?j=!0:(Y=A.charCodeAt(N++))===NEWLINE?W=!0:Y===RETURN&&(W=!0,A.charCodeAt(N)===NEWLINE&&++N),A.slice(V+1,q-1).replace(/""/g,'"')}for(;N<R;){if((Y=A.charCodeAt(q=N++))===NEWLINE)W=!0;else if(Y===RETURN)W=!0,A.charCodeAt(N)===NEWLINE&&++N;else if(Y!==C)continue;return A.slice(V,q)}return j=!0,A.slice(V,R)}for(;(z=U())!==EOF;){for(var O=[];z!==EOL&&z!==EOF;)O.push(z),z=U();P&&(O=P(O,H++))==null||L.push(O)}return L}function S(A,P){return A.map(function(L){return P.map(function(R){return D(L[R])}).join(b)})}function M(A,P){return P==null&&(P=inferColumns(A)),[P.map(D).join(b)].concat(S(A,P)).join(`
`)}function $(A,P){return P==null&&(P=inferColumns(A)),S(A,P).join(`
`)}function E(A){return A.map(I).join(`
`)}function I(A){return A.map(D).join(b)}function D(A){return A==null?"":A instanceof Date?formatDate(A):w.test(A+="")?'"'+A.replace(/"/g,'""')+'"':A}return{parse:k,parseRows:T,format:M,formatBody:$,formatRows:E,formatRow:I,formatValue:D}}var csv$1=dsvFormat(","),csvParse=csv$1.parse;function responseText(b){if(!b.ok)throw new Error(b.status+" "+b.statusText);return b.text()}function text(b,w){return fetch(b,w).then(responseText)}function dsvParse(b){return function(w,C,k){return arguments.length===2&&typeof C=="function"&&(k=C,C=void 0),text(w,C).then(function(T){return b(T,k)})}}var csv=dsvParse(csvParse);function ascending(b,w){return b==null||w==null?NaN:b<w?-1:b>w?1:b>=w?0:NaN}function bisector(b){let w,C,k;b.length!==2?(w=ascending,C=($,E)=>ascending(b($),E),k=($,E)=>b($)-E):(w=b===ascending||b===descending?b:zero,C=b,k=b);function T($,E,I=0,D=$.length){if(I<D){if(w(E,E)!==0)return D;do{const A=I+D>>>1;C($[A],E)<0?I=A+1:D=A}while(I<D)}return I}function S($,E,I=0,D=$.length){if(I<D){if(w(E,E)!==0)return D;do{const A=I+D>>>1;C($[A],E)<=0?I=A+1:D=A}while(I<D)}return I}function M($,E,I=0,D=$.length){const A=T($,E,I,D-1);return A>I&&k($[A-1],E)>-k($[A],E)?A-1:A}return{left:T,center:M,right:S}}function zero(){return 0}function number$2(b){return b===null?NaN:+b}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;function extent(b,w){let C,k;if(w===void 0)for(const T of b)T!=null&&(C===void 0?T>=T&&(C=k=T):(C>T&&(C=T),k<T&&(k=T)));else{let T=-1;for(let S of b)(S=w(S,++T,b))!=null&&(C===void 0?S>=S&&(C=k=S):(C>S&&(C=S),k<S&&(k=S)))}return[C,k]}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(b,w,C){const k=(w-b)/Math.max(0,C),T=Math.floor(Math.log10(k)),S=k/Math.pow(10,T),M=S>=e10?10:S>=e5?5:S>=e2?2:1;let $,E,I;return T<0?(I=Math.pow(10,-T)/M,$=Math.round(b*I),E=Math.round(w*I),$/I<b&&++$,E/I>w&&--E,I=-I):(I=Math.pow(10,T)*M,$=Math.round(b/I),E=Math.round(w/I),$*I<b&&++$,E*I>w&&--E),E<$&&.5<=C&&C<2?tickSpec(b,w,C*2):[$,E,I]}function ticks(b,w,C){if(w=+w,b=+b,C=+C,!(C>0))return[];if(b===w)return[b];const k=w<b,[T,S,M]=k?tickSpec(w,b,C):tickSpec(b,w,C);if(!(S>=T))return[];const $=S-T+1,E=new Array($);if(k)if(M<0)for(let I=0;I<$;++I)E[I]=(S-I)/-M;else for(let I=0;I<$;++I)E[I]=(S-I)*M;else if(M<0)for(let I=0;I<$;++I)E[I]=(T+I)/-M;else for(let I=0;I<$;++I)E[I]=(T+I)*M;return E}function tickIncrement(b,w,C){return w=+w,b=+b,C=+C,tickSpec(b,w,C)[2]}function tickStep(b,w,C){w=+w,b=+b,C=+C;const k=w<b,T=k?tickIncrement(w,b,C):tickIncrement(b,w,C);return(k?-1:1)*(T<0?1/-T:T)}function max(b,w){let C;if(w===void 0)for(const k of b)k!=null&&(C<k||C===void 0&&k>=k)&&(C=k);else{let k=-1;for(let T of b)(T=w(T,++k,b))!=null&&(C<T||C===void 0&&T>=T)&&(C=T)}return C}function mean(b,w){let C=0,k=0;if(w===void 0)for(let T of b)T!=null&&(T=+T)>=T&&(++C,k+=T);else{let T=-1;for(let S of b)(S=w(S,++T,b))!=null&&(S=+S)>=S&&(++C,k+=S)}if(C)return k/C}function range(b,w,C){b=+b,w=+w,C=(T=arguments.length)<2?(w=b,b=0,1):T<3?1:+C;for(var k=-1,T=Math.max(0,Math.ceil((w-b)/C))|0,S=new Array(T);++k<T;)S[k]=b+k*C;return S}function sum(b,w){let C=0;if(w===void 0)for(let k of b)(k=+k)&&(C+=k);else{let k=-1;for(let T of b)(T=+w(T,++k,b))&&(C+=T)}return C}function initRange(b,w){switch(arguments.length){case 0:break;case 1:this.range(b);break;default:this.range(w).domain(b);break}return this}const implicit=Symbol("implicit");function ordinal(){var b=new InternMap,w=[],C=[],k=implicit;function T(S){let M=b.get(S);if(M===void 0){if(k!==implicit)return k;b.set(S,M=w.push(S)-1)}return C[M%C.length]}return T.domain=function(S){if(!arguments.length)return w.slice();w=[],b=new InternMap;for(const M of S)b.has(M)||b.set(M,w.push(M)-1);return T},T.range=function(S){return arguments.length?(C=Array.from(S),T):C.slice()},T.unknown=function(S){return arguments.length?(k=S,T):k},T.copy=function(){return ordinal(w,C).unknown(k)},initRange.apply(T,arguments),T}function band(){var b=ordinal().unknown(void 0),w=b.domain,C=b.range,k=0,T=1,S,M,$=!1,E=0,I=0,D=.5;delete b.unknown;function A(){var P=w().length,L=T<k,R=L?T:k,N=L?k:T;S=(N-R)/Math.max(1,P-E+I*2),$&&(S=Math.floor(S)),R+=(N-R-S*(P-E))*D,M=S*(1-E),$&&(R=Math.round(R),M=Math.round(M));var H=range(P).map(function(z){return R+S*z});return C(L?H.reverse():H)}return b.domain=function(P){return arguments.length?(w(P),A()):w()},b.range=function(P){return arguments.length?([k,T]=P,k=+k,T=+T,A()):[k,T]},b.rangeRound=function(P){return[k,T]=P,k=+k,T=+T,$=!0,A()},b.bandwidth=function(){return M},b.step=function(){return S},b.round=function(P){return arguments.length?($=!!P,A()):$},b.padding=function(P){return arguments.length?(E=Math.min(1,I=+P),A()):E},b.paddingInner=function(P){return arguments.length?(E=Math.min(1,P),A()):E},b.paddingOuter=function(P){return arguments.length?(I=+P,A()):I},b.align=function(P){return arguments.length?(D=Math.max(0,Math.min(1,P)),A()):D},b.copy=function(){return band(w(),[k,T]).round($).paddingInner(E).paddingOuter(I).align(D)},initRange.apply(A(),arguments)}function pointish(b){var w=b.copy;return b.padding=b.paddingOuter,delete b.paddingInner,delete b.paddingOuter,b.copy=function(){return pointish(w())},b}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function numberArray(b,w){w||(w=[]);var C=b?Math.min(w.length,b.length):0,k=w.slice(),T;return function(S){for(T=0;T<C;++T)k[T]=b[T]*(1-S)+w[T]*S;return k}}function isNumberArray(b){return ArrayBuffer.isView(b)&&!(b instanceof DataView)}function genericArray(b,w){var C=w?w.length:0,k=b?Math.min(C,b.length):0,T=new Array(k),S=new Array(C),M;for(M=0;M<k;++M)T[M]=interpolate(b[M],w[M]);for(;M<C;++M)S[M]=w[M];return function($){for(M=0;M<k;++M)S[M]=T[M]($);return S}}function date$1(b,w){var C=new Date;return b=+b,w=+w,function(k){return C.setTime(b*(1-k)+w*k),C}}function object(b,w){var C={},k={},T;(b===null||typeof b!="object")&&(b={}),(w===null||typeof w!="object")&&(w={});for(T in w)T in b?C[T]=interpolate(b[T],w[T]):k[T]=w[T];return function(S){for(T in C)k[T]=C[T](S);return k}}function interpolate(b,w){var C=typeof w,k;return w==null||C==="boolean"?constant$2(w):(C==="number"?interpolateNumber:C==="string"?(k=color(w))?(w=k,interpolateRgb):interpolateString:w instanceof color?interpolateRgb:w instanceof Date?date$1:isNumberArray(w)?numberArray:Array.isArray(w)?genericArray:typeof w.valueOf!="function"&&typeof w.toString!="function"||isNaN(w)?object:interpolateNumber)(b,w)}function interpolateRound(b,w){return b=+b,w=+w,function(C){return Math.round(b*(1-C)+w*C)}}function constants(b){return function(){return b}}function number$1(b){return+b}var unit=[0,1];function identity$1(b){return b}function normalize(b,w){return(w-=b=+b)?function(C){return(C-b)/w}:constants(isNaN(w)?NaN:.5)}function clamper(b,w){var C;return b>w&&(C=b,b=w,w=C),function(k){return Math.max(b,Math.min(w,k))}}function bimap(b,w,C){var k=b[0],T=b[1],S=w[0],M=w[1];return T<k?(k=normalize(T,k),S=C(M,S)):(k=normalize(k,T),S=C(S,M)),function($){return S(k($))}}function polymap(b,w,C){var k=Math.min(b.length,w.length)-1,T=new Array(k),S=new Array(k),M=-1;for(b[k]<b[0]&&(b=b.slice().reverse(),w=w.slice().reverse());++M<k;)T[M]=normalize(b[M],b[M+1]),S[M]=C(w[M],w[M+1]);return function($){var E=bisectRight(b,$,1,k)-1;return S[E](T[E]($))}}function copy$1(b,w){return w.domain(b.domain()).range(b.range()).interpolate(b.interpolate()).clamp(b.clamp()).unknown(b.unknown())}function transformer(){var b=unit,w=unit,C=interpolate,k,T,S,M=identity$1,$,E,I;function D(){var P=Math.min(b.length,w.length);return M!==identity$1&&(M=clamper(b[0],b[P-1])),$=P>2?polymap:bimap,E=I=null,A}function A(P){return P==null||isNaN(P=+P)?S:(E||(E=$(b.map(k),w,C)))(k(M(P)))}return A.invert=function(P){return M(T((I||(I=$(w,b.map(k),interpolateNumber)))(P)))},A.domain=function(P){return arguments.length?(b=Array.from(P,number$1),D()):b.slice()},A.range=function(P){return arguments.length?(w=Array.from(P),D()):w.slice()},A.rangeRound=function(P){return w=Array.from(P),C=interpolateRound,D()},A.clamp=function(P){return arguments.length?(M=P?!0:identity$1,D()):M!==identity$1},A.interpolate=function(P){return arguments.length?(C=P,D()):C},A.unknown=function(P){return arguments.length?(S=P,A):S},function(P,L){return k=P,T=L,D()}}function continuous(){return transformer()(identity$1,identity$1)}function formatDecimal(b){return Math.abs(b=Math.round(b))>=1e21?b.toLocaleString("en").replace(/,/g,""):b.toString(10)}function formatDecimalParts(b,w){if((C=(b=w?b.toExponential(w-1):b.toExponential()).indexOf("e"))<0)return null;var C,k=b.slice(0,C);return[k.length>1?k[0]+k.slice(2):k,+b.slice(C+1)]}function exponent(b){return b=formatDecimalParts(Math.abs(b)),b?b[1]:NaN}function formatGroup(b,w){return function(C,k){for(var T=C.length,S=[],M=0,$=b[0],E=0;T>0&&$>0&&(E+$+1>k&&($=Math.max(1,k-E)),S.push(C.substring(T-=$,T+$)),!((E+=$+1)>k));)$=b[M=(M+1)%b.length];return S.reverse().join(w)}}function formatNumerals(b){return function(w){return w.replace(/[0-9]/g,function(C){return b[+C]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(b){if(!(w=re.exec(b)))throw new Error("invalid format: "+b);var w;return new FormatSpecifier({fill:w[1],align:w[2],sign:w[3],symbol:w[4],zero:w[5],width:w[6],comma:w[7],precision:w[8]&&w[8].slice(1),trim:w[9],type:w[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(b){this.fill=b.fill===void 0?" ":b.fill+"",this.align=b.align===void 0?">":b.align+"",this.sign=b.sign===void 0?"-":b.sign+"",this.symbol=b.symbol===void 0?"":b.symbol+"",this.zero=!!b.zero,this.width=b.width===void 0?void 0:+b.width,this.comma=!!b.comma,this.precision=b.precision===void 0?void 0:+b.precision,this.trim=!!b.trim,this.type=b.type===void 0?"":b.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(b){e:for(var w=b.length,C=1,k=-1,T;C<w;++C)switch(b[C]){case".":k=T=C;break;case"0":k===0&&(k=C),T=C;break;default:if(!+b[C])break e;k>0&&(k=0);break}return k>0?b.slice(0,k)+b.slice(T+1):b}var prefixExponent;function formatPrefixAuto(b,w){var C=formatDecimalParts(b,w);if(!C)return b+"";var k=C[0],T=C[1],S=T-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(T/3)))*3)+1,M=k.length;return S===M?k:S>M?k+new Array(S-M+1).join("0"):S>0?k.slice(0,S)+"."+k.slice(S):"0."+new Array(1-S).join("0")+formatDecimalParts(b,Math.max(0,w+S-1))[0]}function formatRounded(b,w){var C=formatDecimalParts(b,w);if(!C)return b+"";var k=C[0],T=C[1];return T<0?"0."+new Array(-T).join("0")+k:k.length>T+1?k.slice(0,T+1)+"."+k.slice(T+1):k+new Array(T-k.length+2).join("0")}const formatTypes={"%":(b,w)=>(b*100).toFixed(w),b:b=>Math.round(b).toString(2),c:b=>b+"",d:formatDecimal,e:(b,w)=>b.toExponential(w),f:(b,w)=>b.toFixed(w),g:(b,w)=>b.toPrecision(w),o:b=>Math.round(b).toString(8),p:(b,w)=>formatRounded(b*100,w),r:formatRounded,s:formatPrefixAuto,X:b=>Math.round(b).toString(16).toUpperCase(),x:b=>Math.round(b).toString(16)};function identity(b){return b}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(b){var w=b.grouping===void 0||b.thousands===void 0?identity:formatGroup(map.call(b.grouping,Number),b.thousands+""),C=b.currency===void 0?"":b.currency[0]+"",k=b.currency===void 0?"":b.currency[1]+"",T=b.decimal===void 0?".":b.decimal+"",S=b.numerals===void 0?identity:formatNumerals(map.call(b.numerals,String)),M=b.percent===void 0?"%":b.percent+"",$=b.minus===void 0?"−":b.minus+"",E=b.nan===void 0?"NaN":b.nan+"";function I(A){A=formatSpecifier(A);var P=A.fill,L=A.align,R=A.sign,N=A.symbol,H=A.zero,z=A.width,j=A.comma,W=A.precision,U=A.trim,O=A.type;O==="n"?(j=!0,O="g"):formatTypes[O]||(W===void 0&&(W=12),U=!0,O="g"),(H||P==="0"&&L==="=")&&(H=!0,P="0",L="=");var q=N==="$"?C:N==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",V=N==="$"?k:/[%p]/.test(O)?M:"",Y=formatTypes[O],te=/[defgprs%]/.test(O);W=W===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,W)):Math.max(0,Math.min(20,W));function J(B){var ee=q,K=V,Q,Z,he;if(O==="c")K=Y(B)+K,B="";else{B=+B;var le=B<0||1/B<0;if(B=isNaN(B)?E:Y(Math.abs(B),W),U&&(B=formatTrim(B)),le&&+B==0&&R!=="+"&&(le=!1),ee=(le?R==="("?R:$:R==="-"||R==="("?"":R)+ee,K=(O==="s"?prefixes[8+prefixExponent/3]:"")+K+(le&&R==="("?")":""),te){for(Q=-1,Z=B.length;++Q<Z;)if(he=B.charCodeAt(Q),48>he||he>57){K=(he===46?T+B.slice(Q+1):B.slice(Q))+K,B=B.slice(0,Q);break}}}j&&!H&&(B=w(B,1/0));var X=ee.length+B.length+K.length,oe=X<z?new Array(z-X+1).join(P):"";switch(j&&H&&(B=w(oe+B,oe.length?z-K.length:1/0),oe=""),L){case"<":B=ee+B+K+oe;break;case"=":B=ee+oe+B+K;break;case"^":B=oe.slice(0,X=oe.length>>1)+ee+B+K+oe.slice(X);break;default:B=oe+ee+B+K;break}return S(B)}return J.toString=function(){return A+""},J}function D(A,P){var L=I((A=formatSpecifier(A),A.type="f",A)),R=Math.max(-8,Math.min(8,Math.floor(exponent(P)/3)))*3,N=Math.pow(10,-R),H=prefixes[8+R/3];return function(z){return L(N*z)+H}}return{format:I,formatPrefix:D}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(b){return locale$1=formatLocale$1(b),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(b){return Math.max(0,-exponent(Math.abs(b)))}function precisionPrefix(b,w){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(w)/3)))*3-exponent(Math.abs(b)))}function precisionRound(b,w){return b=Math.abs(b),w=Math.abs(w)-b,Math.max(0,exponent(w)-exponent(b))+1}function tickFormat(b,w,C,k){var T=tickStep(b,w,C),S;switch(k=formatSpecifier(k??",f"),k.type){case"s":{var M=Math.max(Math.abs(b),Math.abs(w));return k.precision==null&&!isNaN(S=precisionPrefix(T,M))&&(k.precision=S),formatPrefix(k,M)}case"":case"e":case"g":case"p":case"r":{k.precision==null&&!isNaN(S=precisionRound(T,Math.max(Math.abs(b),Math.abs(w))))&&(k.precision=S-(k.type==="e"));break}case"f":case"%":{k.precision==null&&!isNaN(S=precisionFixed(T))&&(k.precision=S-(k.type==="%")*2);break}}return format(k)}function linearish(b){var w=b.domain;return b.ticks=function(C){var k=w();return ticks(k[0],k[k.length-1],C??10)},b.tickFormat=function(C,k){var T=w();return tickFormat(T[0],T[T.length-1],C??10,k)},b.nice=function(C){C==null&&(C=10);var k=w(),T=0,S=k.length-1,M=k[T],$=k[S],E,I,D=10;for($<M&&(I=M,M=$,$=I,I=T,T=S,S=I);D-- >0;){if(I=tickIncrement(M,$,C),I===E)return k[T]=M,k[S]=$,w(k);if(I>0)M=Math.floor(M/I)*I,$=Math.ceil($/I)*I;else if(I<0)M=Math.ceil(M*I)/I,$=Math.floor($*I)/I;else break;E=I}return b},b}function linear(){var b=continuous();return b.copy=function(){return copy$1(b,linear())},initRange.apply(b,arguments),linearish(b)}function nice(b,w){b=b.slice();var C=0,k=b.length-1,T=b[C],S=b[k],M;return S<T&&(M=C,C=k,k=M,M=T,T=S,S=M),b[C]=w.floor(T),b[k]=w.ceil(S),b}function transformPow(b){return function(w){return w<0?-Math.pow(-w,b):Math.pow(w,b)}}function transformSqrt(b){return b<0?-Math.sqrt(-b):Math.sqrt(b)}function transformSquare(b){return b<0?-b*b:b*b}function powish(b){var w=b(identity$1,identity$1),C=1;function k(){return C===1?b(identity$1,identity$1):C===.5?b(transformSqrt,transformSquare):b(transformPow(C),transformPow(1/C))}return w.exponent=function(T){return arguments.length?(C=+T,k()):C},linearish(w)}function pow(){var b=powish(transformer());return b.copy=function(){return copy$1(b,pow()).exponent(b.exponent())},initRange.apply(b,arguments),b}function sqrt(){return pow.apply(null,arguments).exponent(.5)}const t0=new Date,t1=new Date;function timeInterval(b,w,C,k){function T(S){return b(S=arguments.length===0?new Date:new Date(+S)),S}return T.floor=S=>(b(S=new Date(+S)),S),T.ceil=S=>(b(S=new Date(S-1)),w(S,1),b(S),S),T.round=S=>{const M=T(S),$=T.ceil(S);return S-M<$-S?M:$},T.offset=(S,M)=>(w(S=new Date(+S),M==null?1:Math.floor(M)),S),T.range=(S,M,$)=>{const E=[];if(S=T.ceil(S),$=$==null?1:Math.floor($),!(S<M)||!($>0))return E;let I;do E.push(I=new Date(+S)),w(S,$),b(S);while(I<S&&S<M);return E},T.filter=S=>timeInterval(M=>{if(M>=M)for(;b(M),!S(M);)M.setTime(M-1)},(M,$)=>{if(M>=M)if($<0)for(;++$<=0;)for(;w(M,-1),!S(M););else for(;--$>=0;)for(;w(M,1),!S(M););}),C&&(T.count=(S,M)=>(t0.setTime(+S),t1.setTime(+M),b(t0),b(t1),Math.floor(C(t0,t1))),T.every=S=>(S=Math.floor(S),!isFinite(S)||!(S>0)?null:S>1?T.filter(k?M=>k(M)%S===0:M=>T.count(0,M)%S===0):T)),T}const millisecond=timeInterval(()=>{},(b,w)=>{b.setTime(+b+w)},(b,w)=>w-b);millisecond.every=b=>(b=Math.floor(b),!isFinite(b)||!(b>0)?null:b>1?timeInterval(w=>{w.setTime(Math.floor(w/b)*b)},(w,C)=>{w.setTime(+w+C*b)},(w,C)=>(C-w)/b):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(b=>{b.setTime(b-b.getMilliseconds())},(b,w)=>{b.setTime(+b+w*durationSecond)},(b,w)=>(w-b)/durationSecond,b=>b.getUTCSeconds());second.range;const timeMinute=timeInterval(b=>{b.setTime(b-b.getMilliseconds()-b.getSeconds()*durationSecond)},(b,w)=>{b.setTime(+b+w*durationMinute)},(b,w)=>(w-b)/durationMinute,b=>b.getMinutes());timeMinute.range;const utcMinute=timeInterval(b=>{b.setUTCSeconds(0,0)},(b,w)=>{b.setTime(+b+w*durationMinute)},(b,w)=>(w-b)/durationMinute,b=>b.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(b=>{b.setTime(b-b.getMilliseconds()-b.getSeconds()*durationSecond-b.getMinutes()*durationMinute)},(b,w)=>{b.setTime(+b+w*durationHour)},(b,w)=>(w-b)/durationHour,b=>b.getHours());timeHour.range;const utcHour=timeInterval(b=>{b.setUTCMinutes(0,0,0)},(b,w)=>{b.setTime(+b+w*durationHour)},(b,w)=>(w-b)/durationHour,b=>b.getUTCHours());utcHour.range;const timeDay=timeInterval(b=>b.setHours(0,0,0,0),(b,w)=>b.setDate(b.getDate()+w),(b,w)=>(w-b-(w.getTimezoneOffset()-b.getTimezoneOffset())*durationMinute)/durationDay,b=>b.getDate()-1);timeDay.range;const utcDay=timeInterval(b=>{b.setUTCHours(0,0,0,0)},(b,w)=>{b.setUTCDate(b.getUTCDate()+w)},(b,w)=>(w-b)/durationDay,b=>b.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(b=>{b.setUTCHours(0,0,0,0)},(b,w)=>{b.setUTCDate(b.getUTCDate()+w)},(b,w)=>(w-b)/durationDay,b=>Math.floor(b/durationDay));unixDay.range;function timeWeekday(b){return timeInterval(w=>{w.setDate(w.getDate()-(w.getDay()+7-b)%7),w.setHours(0,0,0,0)},(w,C)=>{w.setDate(w.getDate()+C*7)},(w,C)=>(C-w-(C.getTimezoneOffset()-w.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(b){return timeInterval(w=>{w.setUTCDate(w.getUTCDate()-(w.getUTCDay()+7-b)%7),w.setUTCHours(0,0,0,0)},(w,C)=>{w.setUTCDate(w.getUTCDate()+C*7)},(w,C)=>(C-w)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(b=>{b.setDate(1),b.setHours(0,0,0,0)},(b,w)=>{b.setMonth(b.getMonth()+w)},(b,w)=>w.getMonth()-b.getMonth()+(w.getFullYear()-b.getFullYear())*12,b=>b.getMonth());timeMonth.range;const utcMonth=timeInterval(b=>{b.setUTCDate(1),b.setUTCHours(0,0,0,0)},(b,w)=>{b.setUTCMonth(b.getUTCMonth()+w)},(b,w)=>w.getUTCMonth()-b.getUTCMonth()+(w.getUTCFullYear()-b.getUTCFullYear())*12,b=>b.getUTCMonth());utcMonth.range;const timeYear=timeInterval(b=>{b.setMonth(0,1),b.setHours(0,0,0,0)},(b,w)=>{b.setFullYear(b.getFullYear()+w)},(b,w)=>w.getFullYear()-b.getFullYear(),b=>b.getFullYear());timeYear.every=b=>!isFinite(b=Math.floor(b))||!(b>0)?null:timeInterval(w=>{w.setFullYear(Math.floor(w.getFullYear()/b)*b),w.setMonth(0,1),w.setHours(0,0,0,0)},(w,C)=>{w.setFullYear(w.getFullYear()+C*b)});timeYear.range;const utcYear=timeInterval(b=>{b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},(b,w)=>{b.setUTCFullYear(b.getUTCFullYear()+w)},(b,w)=>w.getUTCFullYear()-b.getUTCFullYear(),b=>b.getUTCFullYear());utcYear.every=b=>!isFinite(b=Math.floor(b))||!(b>0)?null:timeInterval(w=>{w.setUTCFullYear(Math.floor(w.getUTCFullYear()/b)*b),w.setUTCMonth(0,1),w.setUTCHours(0,0,0,0)},(w,C)=>{w.setUTCFullYear(w.getUTCFullYear()+C*b)});utcYear.range;function ticker(b,w,C,k,T,S){const M=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[S,1,durationMinute],[S,5,5*durationMinute],[S,15,15*durationMinute],[S,30,30*durationMinute],[T,1,durationHour],[T,3,3*durationHour],[T,6,6*durationHour],[T,12,12*durationHour],[k,1,durationDay],[k,2,2*durationDay],[C,1,durationWeek],[w,1,durationMonth],[w,3,3*durationMonth],[b,1,durationYear]];function $(I,D,A){const P=D<I;P&&([I,D]=[D,I]);const L=A&&typeof A.range=="function"?A:E(I,D,A),R=L?L.range(I,+D+1):[];return P?R.reverse():R}function E(I,D,A){const P=Math.abs(D-I)/A,L=bisector(([,,H])=>H).right(M,P);if(L===M.length)return b.every(tickStep(I/durationYear,D/durationYear,A));if(L===0)return millisecond.every(Math.max(tickStep(I,D,A),1));const[R,N]=M[P/M[L-1][2]<M[L][2]/P?L-1:L];return R.every(N)}return[$,E]}const[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(b){if(0<=b.y&&b.y<100){var w=new Date(-1,b.m,b.d,b.H,b.M,b.S,b.L);return w.setFullYear(b.y),w}return new Date(b.y,b.m,b.d,b.H,b.M,b.S,b.L)}function utcDate(b){if(0<=b.y&&b.y<100){var w=new Date(Date.UTC(-1,b.m,b.d,b.H,b.M,b.S,b.L));return w.setUTCFullYear(b.y),w}return new Date(Date.UTC(b.y,b.m,b.d,b.H,b.M,b.S,b.L))}function newDate(b,w,C){return{y:b,m:w,d:C,H:0,M:0,S:0,L:0}}function formatLocale(b){var w=b.dateTime,C=b.date,k=b.time,T=b.periods,S=b.days,M=b.shortDays,$=b.months,E=b.shortMonths,I=formatRe(T),D=formatLookup(T),A=formatRe(S),P=formatLookup(S),L=formatRe(M),R=formatLookup(M),N=formatRe($),H=formatLookup($),z=formatRe(E),j=formatLookup(E),W={a:le,A:X,b:oe,B:ae,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:pe,q:_e,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},U={a:ke,A:we,b:Ce,B:Te,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:fe,q:Se,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},O={a:J,A:B,b:ee,B:K,c:Q,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:te,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:Z,X:he,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};W.x=q(C,W),W.X=q(k,W),W.c=q(w,W),U.x=q(C,U),U.X=q(k,U),U.c=q(w,U);function q(G,ie){return function(ne){var F=[],ue=-1,se=0,me=G.length,de,be,xe;for(ne instanceof Date||(ne=new Date(+ne));++ue<me;)G.charCodeAt(ue)===37&&(F.push(G.slice(se,ue)),(be=pads[de=G.charAt(++ue)])!=null?de=G.charAt(++ue):be=de==="e"?" ":"0",(xe=ie[de])&&(de=xe(ne,be)),F.push(de),se=ue+1);return F.push(G.slice(se,ue)),F.join("")}}function V(G,ie){return function(ne){var F=newDate(1900,void 0,1),ue=Y(F,G,ne+="",0),se,me;if(ue!=ne.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(ie&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(se=utcDate(newDate(F.y,0,1)),me=se.getUTCDay(),se=me>4||me===0?utcMonday.ceil(se):utcMonday(se),se=utcDay.offset(se,(F.V-1)*7),F.y=se.getUTCFullYear(),F.m=se.getUTCMonth(),F.d=se.getUTCDate()+(F.w+6)%7):(se=localDate(newDate(F.y,0,1)),me=se.getDay(),se=me>4||me===0?timeMonday.ceil(se):timeMonday(se),se=timeDay.offset(se,(F.V-1)*7),F.y=se.getFullYear(),F.m=se.getMonth(),F.d=se.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),me="Z"in F?utcDate(newDate(F.y,0,1)).getUTCDay():localDate(newDate(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(me+5)%7:F.w+F.U*7-(me+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,utcDate(F)):localDate(F)}}function Y(G,ie,ne,F){for(var ue=0,se=ie.length,me=ne.length,de,be;ue<se;){if(F>=me)return-1;if(de=ie.charCodeAt(ue++),de===37){if(de=ie.charAt(ue++),be=O[de in pads?ie.charAt(ue++):de],!be||(F=be(G,ne,F))<0)return-1}else if(de!=ne.charCodeAt(F++))return-1}return F}function te(G,ie,ne){var F=I.exec(ie.slice(ne));return F?(G.p=D.get(F[0].toLowerCase()),ne+F[0].length):-1}function J(G,ie,ne){var F=L.exec(ie.slice(ne));return F?(G.w=R.get(F[0].toLowerCase()),ne+F[0].length):-1}function B(G,ie,ne){var F=A.exec(ie.slice(ne));return F?(G.w=P.get(F[0].toLowerCase()),ne+F[0].length):-1}function ee(G,ie,ne){var F=z.exec(ie.slice(ne));return F?(G.m=j.get(F[0].toLowerCase()),ne+F[0].length):-1}function K(G,ie,ne){var F=N.exec(ie.slice(ne));return F?(G.m=H.get(F[0].toLowerCase()),ne+F[0].length):-1}function Q(G,ie,ne){return Y(G,w,ie,ne)}function Z(G,ie,ne){return Y(G,C,ie,ne)}function he(G,ie,ne){return Y(G,k,ie,ne)}function le(G){return M[G.getDay()]}function X(G){return S[G.getDay()]}function oe(G){return E[G.getMonth()]}function ae(G){return $[G.getMonth()]}function pe(G){return T[+(G.getHours()>=12)]}function _e(G){return 1+~~(G.getMonth()/3)}function ke(G){return M[G.getUTCDay()]}function we(G){return S[G.getUTCDay()]}function Ce(G){return E[G.getUTCMonth()]}function Te(G){return $[G.getUTCMonth()]}function fe(G){return T[+(G.getUTCHours()>=12)]}function Se(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var ie=q(G+="",W);return ie.toString=function(){return G},ie},parse:function(G){var ie=V(G+="",!1);return ie.toString=function(){return G},ie},utcFormat:function(G){var ie=q(G+="",U);return ie.toString=function(){return G},ie},utcParse:function(G){var ie=V(G+="",!0);return ie.toString=function(){return G},ie}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(b,w,C){var k=b<0?"-":"",T=(k?-b:b)+"",S=T.length;return k+(S<C?new Array(C-S+1).join(w)+T:T)}function requote(b){return b.replace(requoteRe,"\\$&")}function formatRe(b){return new RegExp("^(?:"+b.map(requote).join("|")+")","i")}function formatLookup(b){return new Map(b.map((w,C)=>[w.toLowerCase(),C]))}function parseWeekdayNumberSunday(b,w,C){var k=numberRe.exec(w.slice(C,C+1));return k?(b.w=+k[0],C+k[0].length):-1}function parseWeekdayNumberMonday(b,w,C){var k=numberRe.exec(w.slice(C,C+1));return k?(b.u=+k[0],C+k[0].length):-1}function parseWeekNumberSunday(b,w,C){var k=numberRe.exec(w.slice(C,C+2));return k?(b.U=+k[0],C+k[0].length):-1}function parseWeekNumberISO(b,w,C){var k=numberRe.exec(w.slice(C,C+2));return k?(b.V=+k[0],C+k[0].length):-1}function parseWeekNumberMonday(b,w,C){var k=numberRe.exec(w.slice(C,C+2));return k?(b.W=+k[0],C+k[0].length):-1}function parseFullYear(b,w,C){var k=numberRe.exec(w.slice(C,C+4));return k?(b.y=+k[0],C+k[0].length):-1}function parseYear(b,w,C){var k=numberRe.exec(w.slice(C,C+2));return k?(b.y=+k[0]+(+k[0]>68?1900:2e3),C+k[0].length):-1}function parseZone(b,w,C){var k=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(w.slice(C,C+6));return k?(b.Z=k[1]?0:-(k[2]+(k[3]||"00")),C+k[0].length):-1}function parseQuarter(b,w,C){var k=numberRe.exec(w.slice(C,C+1));return k?(b.q=k[0]*3-3,C+k[0].length):-1}function parseMonthNumber(b,w,C){var k=numberRe.exec(w.slice(C,C+2));return k?(b.m=k[0]-1,C+k[0].length):-1}function parseDayOfMonth(b,w,C){var k=numberRe.exec(w.slice(C,C+2));return k?(b.d=+k[0],C+k[0].length):-1}function parseDayOfYear(b,w,C){var k=numberRe.exec(w.slice(C,C+3));return k?(b.m=0,b.d=+k[0],C+k[0].length):-1}function parseHour24(b,w,C){var k=numberRe.exec(w.slice(C,C+2));return k?(b.H=+k[0],C+k[0].length):-1}function parseMinutes(b,w,C){var k=numberRe.exec(w.slice(C,C+2));return k?(b.M=+k[0],C+k[0].length):-1}function parseSeconds(b,w,C){var k=numberRe.exec(w.slice(C,C+2));return k?(b.S=+k[0],C+k[0].length):-1}function parseMilliseconds(b,w,C){var k=numberRe.exec(w.slice(C,C+3));return k?(b.L=+k[0],C+k[0].length):-1}function parseMicroseconds(b,w,C){var k=numberRe.exec(w.slice(C,C+6));return k?(b.L=Math.floor(k[0]/1e3),C+k[0].length):-1}function parseLiteralPercent(b,w,C){var k=percentRe.exec(w.slice(C,C+1));return k?C+k[0].length:-1}function parseUnixTimestamp(b,w,C){var k=numberRe.exec(w.slice(C));return k?(b.Q=+k[0],C+k[0].length):-1}function parseUnixTimestampSeconds(b,w,C){var k=numberRe.exec(w.slice(C));return k?(b.s=+k[0],C+k[0].length):-1}function formatDayOfMonth(b,w){return pad(b.getDate(),w,2)}function formatHour24(b,w){return pad(b.getHours(),w,2)}function formatHour12(b,w){return pad(b.getHours()%12||12,w,2)}function formatDayOfYear(b,w){return pad(1+timeDay.count(timeYear(b),b),w,3)}function formatMilliseconds(b,w){return pad(b.getMilliseconds(),w,3)}function formatMicroseconds(b,w){return formatMilliseconds(b,w)+"000"}function formatMonthNumber(b,w){return pad(b.getMonth()+1,w,2)}function formatMinutes(b,w){return pad(b.getMinutes(),w,2)}function formatSeconds(b,w){return pad(b.getSeconds(),w,2)}function formatWeekdayNumberMonday(b){var w=b.getDay();return w===0?7:w}function formatWeekNumberSunday(b,w){return pad(timeSunday.count(timeYear(b)-1,b),w,2)}function dISO(b){var w=b.getDay();return w>=4||w===0?timeThursday(b):timeThursday.ceil(b)}function formatWeekNumberISO(b,w){return b=dISO(b),pad(timeThursday.count(timeYear(b),b)+(timeYear(b).getDay()===4),w,2)}function formatWeekdayNumberSunday(b){return b.getDay()}function formatWeekNumberMonday(b,w){return pad(timeMonday.count(timeYear(b)-1,b),w,2)}function formatYear(b,w){return pad(b.getFullYear()%100,w,2)}function formatYearISO(b,w){return b=dISO(b),pad(b.getFullYear()%100,w,2)}function formatFullYear(b,w){return pad(b.getFullYear()%1e4,w,4)}function formatFullYearISO(b,w){var C=b.getDay();return b=C>=4||C===0?timeThursday(b):timeThursday.ceil(b),pad(b.getFullYear()%1e4,w,4)}function formatZone(b){var w=b.getTimezoneOffset();return(w>0?"-":(w*=-1,"+"))+pad(w/60|0,"0",2)+pad(w%60,"0",2)}function formatUTCDayOfMonth(b,w){return pad(b.getUTCDate(),w,2)}function formatUTCHour24(b,w){return pad(b.getUTCHours(),w,2)}function formatUTCHour12(b,w){return pad(b.getUTCHours()%12||12,w,2)}function formatUTCDayOfYear(b,w){return pad(1+utcDay.count(utcYear(b),b),w,3)}function formatUTCMilliseconds(b,w){return pad(b.getUTCMilliseconds(),w,3)}function formatUTCMicroseconds(b,w){return formatUTCMilliseconds(b,w)+"000"}function formatUTCMonthNumber(b,w){return pad(b.getUTCMonth()+1,w,2)}function formatUTCMinutes(b,w){return pad(b.getUTCMinutes(),w,2)}function formatUTCSeconds(b,w){return pad(b.getUTCSeconds(),w,2)}function formatUTCWeekdayNumberMonday(b){var w=b.getUTCDay();return w===0?7:w}function formatUTCWeekNumberSunday(b,w){return pad(utcSunday.count(utcYear(b)-1,b),w,2)}function UTCdISO(b){var w=b.getUTCDay();return w>=4||w===0?utcThursday(b):utcThursday.ceil(b)}function formatUTCWeekNumberISO(b,w){return b=UTCdISO(b),pad(utcThursday.count(utcYear(b),b)+(utcYear(b).getUTCDay()===4),w,2)}function formatUTCWeekdayNumberSunday(b){return b.getUTCDay()}function formatUTCWeekNumberMonday(b,w){return pad(utcMonday.count(utcYear(b)-1,b),w,2)}function formatUTCYear(b,w){return pad(b.getUTCFullYear()%100,w,2)}function formatUTCYearISO(b,w){return b=UTCdISO(b),pad(b.getUTCFullYear()%100,w,2)}function formatUTCFullYear(b,w){return pad(b.getUTCFullYear()%1e4,w,4)}function formatUTCFullYearISO(b,w){var C=b.getUTCDay();return b=C>=4||C===0?utcThursday(b):utcThursday.ceil(b),pad(b.getUTCFullYear()%1e4,w,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(b){return+b}function formatUnixTimestampSeconds(b){return Math.floor(+b/1e3)}var locale,timeFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(b){return locale=formatLocale(b),timeFormat=locale.format,locale.parse,locale.utcFormat,locale.utcParse,locale}function date(b){return new Date(b)}function number(b){return b instanceof Date?+b:+new Date(+b)}function calendar(b,w,C,k,T,S,M,$,E,I){var D=continuous(),A=D.invert,P=D.domain,L=I(".%L"),R=I(":%S"),N=I("%I:%M"),H=I("%I %p"),z=I("%a %d"),j=I("%b %d"),W=I("%B"),U=I("%Y");function O(q){return(E(q)<q?L:$(q)<q?R:M(q)<q?N:S(q)<q?H:k(q)<q?T(q)<q?z:j:C(q)<q?W:U)(q)}return D.invert=function(q){return new Date(A(q))},D.domain=function(q){return arguments.length?P(Array.from(q,number)):P().map(date)},D.ticks=function(q){var V=P();return b(V[0],V[V.length-1],q??10)},D.tickFormat=function(q,V){return V==null?O:I(V)},D.nice=function(q){var V=P();return(!q||typeof q.range!="function")&&(q=w(V[0],V[V.length-1],q??10)),q?P(nice(V,q)):D},D.copy=function(){return copy$1(D,calendar(b,w,C,k,T,S,M,$,E,I))},D}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function constant$1(b){return function(){return b}}const pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(b){this._+=b[0];for(let w=1,C=b.length;w<C;++w)this._+=arguments[w]+b[w]}function appendRound(b){let w=Math.floor(b);if(!(w>=0))throw new Error(`invalid digits: ${b}`);if(w>15)return append;const C=10**w;return function(k){this._+=k[0];for(let T=1,S=k.length;T<S;++T)this._+=Math.round(arguments[T]*C)/C+k[T]}}class Path{constructor(w){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=w==null?append:appendRound(w)}moveTo(w,C){this._append`M${this._x0=this._x1=+w},${this._y0=this._y1=+C}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(w,C){this._append`L${this._x1=+w},${this._y1=+C}`}quadraticCurveTo(w,C,k,T){this._append`Q${+w},${+C},${this._x1=+k},${this._y1=+T}`}bezierCurveTo(w,C,k,T,S,M){this._append`C${+w},${+C},${+k},${+T},${this._x1=+S},${this._y1=+M}`}arcTo(w,C,k,T,S){if(w=+w,C=+C,k=+k,T=+T,S=+S,S<0)throw new Error(`negative radius: ${S}`);let M=this._x1,$=this._y1,E=k-w,I=T-C,D=M-w,A=$-C,P=D*D+A*A;if(this._x1===null)this._append`M${this._x1=w},${this._y1=C}`;else if(P>epsilon)if(!(Math.abs(A*E-I*D)>epsilon)||!S)this._append`L${this._x1=w},${this._y1=C}`;else{let L=k-M,R=T-$,N=E*E+I*I,H=L*L+R*R,z=Math.sqrt(N),j=Math.sqrt(P),W=S*Math.tan((pi-Math.acos((N+P-H)/(2*z*j)))/2),U=W/j,O=W/z;Math.abs(U-1)>epsilon&&this._append`L${w+U*D},${C+U*A}`,this._append`A${S},${S},0,0,${+(A*L>D*R)},${this._x1=w+O*E},${this._y1=C+O*I}`}}arc(w,C,k,T,S,M){if(w=+w,C=+C,k=+k,M=!!M,k<0)throw new Error(`negative radius: ${k}`);let $=k*Math.cos(T),E=k*Math.sin(T),I=w+$,D=C+E,A=1^M,P=M?T-S:S-T;this._x1===null?this._append`M${I},${D}`:(Math.abs(this._x1-I)>epsilon||Math.abs(this._y1-D)>epsilon)&&this._append`L${I},${D}`,k&&(P<0&&(P=P%tau+tau),P>tauEpsilon?this._append`A${k},${k},0,1,${A},${w-$},${C-E}A${k},${k},0,1,${A},${this._x1=I},${this._y1=D}`:P>epsilon&&this._append`A${k},${k},0,${+(P>=pi)},${A},${this._x1=w+k*Math.cos(S)},${this._y1=C+k*Math.sin(S)}`)}rect(w,C,k,T){this._append`M${this._x0=this._x1=+w},${this._y0=this._y1=+C}h${k=+k}v${+T}h${-k}Z`}toString(){return this._}}function withPath(b){let w=3;return b.digits=function(C){if(!arguments.length)return w;if(C==null)w=null;else{const k=Math.floor(C);if(!(k>=0))throw new RangeError(`invalid digits: ${C}`);w=k}return b},()=>new Path(w)}function array(b){return typeof b=="object"&&"length"in b?b:Array.from(b)}function Linear(b){this._context=b}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(b,w){switch(b=+b,w=+w,this._point){case 0:this._point=1,this._line?this._context.lineTo(b,w):this._context.moveTo(b,w);break;case 1:this._point=2;default:this._context.lineTo(b,w);break}}};function curveLinear(b){return new Linear(b)}function x$2(b){return b[0]}function y$2(b){return b[1]}function line(b,w){var C=constant$1(!0),k=null,T=curveLinear,S=null,M=withPath($);b=typeof b=="function"?b:b===void 0?x$2:constant$1(b),w=typeof w=="function"?w:w===void 0?y$2:constant$1(w);function $(E){var I,D=(E=array(E)).length,A,P=!1,L;for(k==null&&(S=T(L=M())),I=0;I<=D;++I)!(I<D&&C(A=E[I],I,E))===P&&((P=!P)?S.lineStart():S.lineEnd()),P&&S.point(+b(A,I,E),+w(A,I,E));if(L)return S=null,L+""||null}return $.x=function(E){return arguments.length?(b=typeof E=="function"?E:constant$1(+E),$):b},$.y=function(E){return arguments.length?(w=typeof E=="function"?E:constant$1(+E),$):w},$.defined=function(E){return arguments.length?(C=typeof E=="function"?E:constant$1(!!E),$):C},$.curve=function(E){return arguments.length?(T=E,k!=null&&(S=T(k)),$):T},$.context=function(E){return arguments.length?(E==null?k=S=null:S=T(k=E),$):k},$}var curveRadialLinear=curveRadial(curveLinear);function Radial(b){this._curve=b}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(b,w){this._curve.point(w*Math.sin(b),w*-Math.cos(b))}};function curveRadial(b){function w(C){return new Radial(b(C))}return w._curve=b,w}function lineRadial(b){var w=b.curve;return b.angle=b.x,delete b.x,b.radius=b.y,delete b.y,b.curve=function(C){return arguments.length?w(curveRadial(C)):w()._curve},b}function lineRadial$1(){return lineRadial(line().curve(curveRadialLinear))}function get_each_context$3(b,w,C){const k=b.slice();return k[13]=w[C],k}function get_each_context_1$3(b,w,C){const k=b.slice();return k[13]=w[C],k}function create_if_block$4(b){let w,C="Percentage of Negative Songs Over Time",k,T,S,M,$,E,I,D,A,P,L,R=`This chart reveals a clear upward trend in the percentage of songs with a
			predominantly negative emotional sentiment, particularly since the
			mid-2010s.`,N=ensure_array_like(b[3].ticks(10)),H=[];for(let W=0;W<N.length;W+=1)H[W]=create_each_block_1$3(get_each_context_1$3(b,N,W));let z=ensure_array_like(b[2].ticks(5)),j=[];for(let W=0;W<z.length;W+=1)j[W]=create_each_block$3(get_each_context$3(b,z,W));return{c(){w=element("h3"),w.textContent=C,k=space(),T=svg_element("svg"),S=svg_element("g"),M=svg_element("path"),E=svg_element("g");for(let W=0;W<H.length;W+=1)H[W].c();D=svg_element("g");for(let W=0;W<j.length;W+=1)j[W].c();P=space(),L=element("p"),L.textContent=R,this.h()},l(W){w=claim_element(W,"H3",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(w)!=="svelte-31xtl"&&(w.textContent=C),k=claim_space(W),T=claim_svg_element(W,"svg",{width:!0,height:!0});var U=children(T);S=claim_svg_element(U,"g",{transform:!0});var O=children(S);M=claim_svg_element(O,"path",{class:!0,d:!0}),children(M).forEach(detach),E=claim_svg_element(O,"g",{class:!0,transform:!0});var q=children(E);for(let Y=0;Y<H.length;Y+=1)H[Y].l(q);q.forEach(detach),D=claim_svg_element(O,"g",{class:!0});var V=children(D);for(let Y=0;Y<j.length;Y+=1)j[Y].l(V);V.forEach(detach),O.forEach(detach),U.forEach(detach),P=claim_space(W),L=claim_element(W,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(L)!=="svelte-pa7tg5"&&(L.textContent=R),this.h()},h(){attr(w,"class","chart-title svelte-q7472g"),attr(M,"class","chart-line svelte-q7472g"),attr(M,"d",$=b[8](b[0])),attr(E,"class","x-axis svelte-q7472g"),attr(E,"transform",I="translate(0, "+b[4]+")"),attr(D,"class","y-axis svelte-q7472g"),attr(S,"transform",A="translate("+b[6].left+", "+b[6].top+")"),attr(T,"width",b[1]),attr(T,"height",height$3),attr(L,"class","chart-description svelte-q7472g")},m(W,U){insert_hydration(W,w,U),insert_hydration(W,k,U),insert_hydration(W,T,U),append_hydration(T,S),append_hydration(S,M),append_hydration(S,E);for(let O=0;O<H.length;O+=1)H[O]&&H[O].m(E,null);append_hydration(S,D);for(let O=0;O<j.length;O+=1)j[O]&&j[O].m(D,null);insert_hydration(W,P,U),insert_hydration(W,L,U)},p(W,U){if(U&257&&$!==($=W[8](W[0]))&&attr(M,"d",$),U&520){N=ensure_array_like(W[3].ticks(10));let O;for(O=0;O<N.length;O+=1){const q=get_each_context_1$3(W,N,O);H[O]?H[O].p(q,U):(H[O]=create_each_block_1$3(q),H[O].c(),H[O].m(E,null))}for(;O<H.length;O+=1)H[O].d(1);H.length=N.length}if(U&16&&I!==(I="translate(0, "+W[4]+")")&&attr(E,"transform",I),U&36){z=ensure_array_like(W[2].ticks(5));let O;for(O=0;O<z.length;O+=1){const q=get_each_context$3(W,z,O);j[O]?j[O].p(q,U):(j[O]=create_each_block$3(q),j[O].c(),j[O].m(D,null))}for(;O<j.length;O+=1)j[O].d(1);j.length=z.length}U&64&&A!==(A="translate("+W[6].left+", "+W[6].top+")")&&attr(S,"transform",A),U&2&&attr(T,"width",W[1])},d(W){W&&(detach(w),detach(k),detach(T),detach(P),detach(L)),destroy_each(H,W),destroy_each(j,W)}}}function create_each_block_1$3(b){let w,C,k,T=b[9](b[13])+"",S,M;return{c(){w=svg_element("g"),C=svg_element("line"),k=svg_element("text"),S=text$1(T),this.h()},l($){w=claim_svg_element($,"g",{class:!0,transform:!0});var E=children(w);C=claim_svg_element(E,"line",{y2:!0,stroke:!0,class:!0}),children(C).forEach(detach),k=claim_svg_element(E,"text",{dy:!0,y:!0,"text-anchor":!0,class:!0});var I=children(k);S=claim_text(I,T),I.forEach(detach),E.forEach(detach),this.h()},h(){attr(C,"y2","6"),attr(C,"stroke","currentColor"),attr(C,"class","svelte-q7472g"),attr(k,"dy","0.71em"),attr(k,"y","9"),attr(k,"text-anchor","middle"),attr(k,"class","svelte-q7472g"),attr(w,"class","tick svelte-q7472g"),attr(w,"transform",M="translate("+b[3](b[13])+", 0)")},m($,E){insert_hydration($,w,E),append_hydration(w,C),append_hydration(w,k),append_hydration(k,S)},p($,E){E&8&&T!==(T=$[9]($[13])+"")&&set_data(S,T),E&8&&M!==(M="translate("+$[3]($[13])+", 0)")&&attr(w,"transform",M)},d($){$&&detach(w)}}}function create_each_block$3(b){let w,C,k,T=b[13]*100+"",S,M,$;return{c(){w=svg_element("g"),C=svg_element("line"),k=svg_element("text"),S=text$1(T),M=text$1("%"),this.h()},l(E){w=claim_svg_element(E,"g",{class:!0,transform:!0});var I=children(w);C=claim_svg_element(I,"line",{x2:!0,stroke:!0,class:!0}),children(C).forEach(detach),k=claim_svg_element(I,"text",{x:!0,dy:!0,"text-anchor":!0,class:!0});var D=children(k);S=claim_text(D,T),M=claim_text(D,"%"),D.forEach(detach),I.forEach(detach),this.h()},h(){attr(C,"x2",b[5]),attr(C,"stroke","currentColor"),attr(C,"class","svelte-q7472g"),attr(k,"x","-9"),attr(k,"dy","0.32em"),attr(k,"text-anchor","end"),attr(k,"class","svelte-q7472g"),attr(w,"class","tick svelte-q7472g"),attr(w,"transform",$="translate(0, "+b[2](b[13])+")")},m(E,I){insert_hydration(E,w,I),append_hydration(w,C),append_hydration(w,k),append_hydration(k,S),append_hydration(k,M)},p(E,I){I&32&&attr(C,"x2",E[5]),I&4&&T!==(T=E[13]*100+"")&&set_data(S,T),I&4&&$!==($="translate(0, "+E[2](E[13])+")")&&attr(w,"transform",$)},d(E){E&&detach(w)}}}function create_fragment$b(b){let w,C,k,T=b[0].length>0&&create_if_block$4(b);return{c(){w=element("div"),T&&T.c(),this.h()},l(S){w=claim_element(S,"DIV",{class:!0});var M=children(w);T&&T.l(M),M.forEach(detach),this.h()},h(){attr(w,"class","chart-container svelte-q7472g")},m(S,M){insert_hydration(S,w,M),T&&T.m(w,null),b[11](w),C||(k=listen(w,"resize",b[10]),C=!0)},p(S,[M]){S[0].length>0?T?T.p(S,M):(T=create_if_block$4(S),T.c(),T.m(w,null)):T&&(T.d(1),T=null)},i:noop,o:noop,d(S){S&&detach(w),T&&T.d(),b[11](null),C=!1,k()}}}let height$3=400;function instance$8(b,w,C){let k,T,S,M,$,E,I=[],D=800,A;const P=timeFormat("%Y"),L=H=>{const j=H.filter(W=>{const U=+W.chart_week.slice(0,4);return U>=1960&&U<=2020}).reduce((W,U)=>{const O=U.chart_week.slice(0,4);return W[O]||(W[O]={total:0,negative:0}),W[O].total++,U.Sentiment==="Negative"&&W[O].negative++,W},{});return Object.entries(j).map(([W,{total:U,negative:O}])=>({year:new Date(W),percentage:O/U}))};onMount(async()=>{C(0,I=L(await csv("assets/billboard.csv")))});function R(){C(1,D=A.clientWidth)}function N(H){binding_callbacks[H?"unshift":"push"](()=>{A=H,C(7,A)})}return b.$$.update=()=>{b.$$.dirty&66&&C(5,T=D-k.left-k.right),b.$$.dirty&64&&C(4,S=height$3-k.top-k.bottom),b.$$.dirty&33&&C(3,M=time().domain(extent(I,H=>H.year)).range([0,T])),b.$$.dirty&16&&C(2,$=linear().domain([0,1]).range([S,0])),b.$$.dirty&12&&C(8,E=line().x(H=>M(H.year)).y(H=>$(H.percentage)).defined(H=>H.year>=new Date("1960")&&H.year<=new Date("2020")))},C(6,k={top:20,right:30,bottom:30,left:40}),[I,D,$,M,S,T,k,A,E,P,R,N]}class NegativeSongsChart extends SvelteComponent{constructor(w){super(),init(this,w,instance$8,create_fragment$b,safe_not_equal,{})}}function get_each_context$2(b,w,C){const k=b.slice();return k[14]=w[C],k[15]=w,k[16]=C,k}function get_each_context_1$2(b,w,C){const k=b.slice();return k[17]=w[C],k}function get_each_context_2$1(b,w,C){const k=b.slice();return k[17]=w[C],k}function create_if_block$3(b){let w,C="Average Emotions in Songs Over Time",k,T,S,M,$=`These small multiples reveal the evolving emotional landscape of popular
			music, with negative emotions like sadness, fear, and anger on the rise,
			while joy, though still prevalent, shows a relative decline.`,E=ensure_array_like(b[5]),I=[];for(let D=0;D<E.length;D+=1)I[D]=create_each_block$2(get_each_context$2(b,E,D));return{c(){w=element("h3"),w.textContent=C,k=space(),T=element("div");for(let D=0;D<I.length;D+=1)I[D].c();S=space(),M=element("p"),M.textContent=$,this.h()},l(D){w=claim_element(D,"H3",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(w)!=="svelte-1hpxoj"&&(w.textContent=C),k=claim_space(D),T=claim_element(D,"DIV",{class:!0});var A=children(T);for(let P=0;P<I.length;P+=1)I[P].l(A);A.forEach(detach),S=claim_space(D),M=claim_element(D,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(M)!=="svelte-1cyquby"&&(M.textContent=$),this.h()},h(){attr(w,"class","chart-title svelte-1qtg1r"),attr(T,"class","small-multiples svelte-1qtg1r"),attr(M,"class","chart-description svelte-1qtg1r")},m(D,A){insert_hydration(D,w,A),insert_hydration(D,k,A),insert_hydration(D,T,A);for(let P=0;P<I.length;P+=1)I[P]&&I[P].m(T,null);insert_hydration(D,S,A),insert_hydration(D,M,A)},p(D,A){if(A&2047){E=ensure_array_like(D[5]);let P;for(P=0;P<E.length;P+=1){const L=get_each_context$2(D,E,P);I[P]?I[P].p(L,A):(I[P]=create_each_block$2(L),I[P].c(),I[P].m(T,null))}for(;P<I.length;P+=1)I[P].d(1);I.length=E.length}},d(D){D&&(detach(w),detach(k),detach(T),detach(S),detach(M)),destroy_each(I,D)}}}function create_each_block_2$1(b){let w,C,k,T=b[10](b[17])+"",S,M;return{c(){w=svg_element("g"),C=svg_element("line"),k=svg_element("text"),S=text$1(T),this.h()},l($){w=claim_svg_element($,"g",{class:!0,transform:!0});var E=children(w);C=claim_svg_element(E,"line",{y2:!0,stroke:!0,class:!0}),children(C).forEach(detach),k=claim_svg_element(E,"text",{dy:!0,y:!0,"text-anchor":!0,class:!0});var I=children(k);S=claim_text(I,T),I.forEach(detach),E.forEach(detach),this.h()},h(){attr(C,"y2","6"),attr(C,"stroke","currentColor"),attr(C,"class","svelte-1qtg1r"),attr(k,"dy","0.71em"),attr(k,"y","9"),attr(k,"text-anchor","middle"),attr(k,"class","svelte-1qtg1r"),attr(w,"class","tick svelte-1qtg1r"),attr(w,"transform",M="translate("+b[2](b[17])+", 0)")},m($,E){insert_hydration($,w,E),append_hydration(w,C),append_hydration(w,k),append_hydration(k,S)},p($,E){E&4&&T!==(T=$[10]($[17])+"")&&set_data(S,T),E&4&&M!==(M="translate("+$[2]($[17])+", 0)")&&attr(w,"transform",M)},d($){$&&detach(w)}}}function create_each_block_1$2(b){let w,C,k,T=b[17]+"",S,M;return{c(){w=svg_element("g"),C=svg_element("line"),k=svg_element("text"),S=text$1(T),this.h()},l($){w=claim_svg_element($,"g",{class:!0,transform:!0});var E=children(w);C=claim_svg_element(E,"line",{x2:!0,stroke:!0,class:!0}),children(C).forEach(detach),k=claim_svg_element(E,"text",{x:!0,dy:!0,"text-anchor":!0,class:!0});var I=children(k);S=claim_text(I,T),I.forEach(detach),E.forEach(detach),this.h()},h(){attr(C,"x2",b[8]),attr(C,"stroke","currentColor"),attr(C,"class","svelte-1qtg1r"),attr(k,"x","-9"),attr(k,"dy","0.32em"),attr(k,"text-anchor","end"),attr(k,"class","svelte-1qtg1r"),attr(w,"class","tick svelte-1qtg1r"),attr(w,"transform",M="translate(0, "+b[3](b[17])+")")},m($,E){insert_hydration($,w,E),append_hydration(w,C),append_hydration(w,k),append_hydration(k,S)},p($,E){E&8&&T!==(T=$[17]+"")&&set_data(S,T),E&8&&M!==(M="translate(0, "+$[3]($[17])+")")&&attr(w,"transform",M)},d($){$&&detach(w)}}}function create_each_block$2(b){let w,C,k,T,S,M,$,E,I,D=b[14]+"",A,P,L=b[16],R=ensure_array_like(b[2].ticks(3)),N=[];for(let U=0;U<R.length;U+=1)N[U]=create_each_block_2$1(get_each_context_2$1(b,R,U));let H=ensure_array_like(b[3].ticks(3)),z=[];for(let U=0;U<H.length;U+=1)z[U]=create_each_block_1$2(get_each_context_1$2(b,H,U));const j=()=>b[11](w,L),W=()=>b[11](null,L);return{c(){w=element("div"),C=svg_element("svg"),k=svg_element("g"),T=svg_element("path"),M=svg_element("g");for(let U=0;U<N.length;U+=1)N[U].c();$=svg_element("g");for(let U=0;U<z.length;U+=1)z[U].c();E=space(),I=element("div"),A=text$1(D),P=space(),this.h()},l(U){w=claim_element(U,"DIV",{class:!0});var O=children(w);C=claim_svg_element(O,"svg",{width:!0,height:!0});var q=children(C);k=claim_svg_element(q,"g",{transform:!0});var V=children(k);T=claim_svg_element(V,"path",{class:!0,d:!0,stroke:!0}),children(T).forEach(detach),M=claim_svg_element(V,"g",{class:!0,transform:!0});var Y=children(M);for(let B=0;B<N.length;B+=1)N[B].l(Y);Y.forEach(detach),$=claim_svg_element(V,"g",{class:!0});var te=children($);for(let B=0;B<z.length;B+=1)z[B].l(te);te.forEach(detach),V.forEach(detach),q.forEach(detach),E=claim_space(O),I=claim_element(O,"DIV",{class:!0});var J=children(I);A=claim_text(J,D),J.forEach(detach),P=claim_space(O),O.forEach(detach),this.h()},h(){attr(T,"class","chart-line svelte-1qtg1r"),attr(T,"d",S=b[4][b[16]](b[0])),attr(T,"stroke",b[6][b[16]]),attr(M,"class","x-axis svelte-1qtg1r"),attr(M,"transform","translate(0, "+b[9]+")"),attr($,"class","y-axis svelte-1qtg1r"),attr(k,"transform","translate("+b[7].left+", "+b[7].top+")"),attr(C,"width",width),attr(C,"height",height$2),attr(I,"class","chart-title svelte-1qtg1r"),attr(w,"class","chart-wrapper svelte-1qtg1r")},m(U,O){insert_hydration(U,w,O),append_hydration(w,C),append_hydration(C,k),append_hydration(k,T),append_hydration(k,M);for(let q=0;q<N.length;q+=1)N[q]&&N[q].m(M,null);append_hydration(k,$);for(let q=0;q<z.length;q+=1)z[q]&&z[q].m($,null);append_hydration(w,E),append_hydration(w,I),append_hydration(I,A),append_hydration(w,P),j()},p(U,O){if(b=U,O&17&&S!==(S=b[4][b[16]](b[0]))&&attr(T,"d",S),O&1028){R=ensure_array_like(b[2].ticks(3));let q;for(q=0;q<R.length;q+=1){const V=get_each_context_2$1(b,R,q);N[q]?N[q].p(V,O):(N[q]=create_each_block_2$1(V),N[q].c(),N[q].m(M,null))}for(;q<N.length;q+=1)N[q].d(1);N.length=R.length}if(O&264){H=ensure_array_like(b[3].ticks(3));let q;for(q=0;q<H.length;q+=1){const V=get_each_context_1$2(b,H,q);z[q]?z[q].p(V,O):(z[q]=create_each_block_1$2(V),z[q].c(),z[q].m($,null))}for(;q<z.length;q+=1)z[q].d(1);z.length=H.length}L!==b[16]&&(W(),L=b[16],j())},d(U){U&&detach(w),destroy_each(N,U),destroy_each(z,U),W()}}}function create_fragment$a(b){let w,C=b[0].length>0&&create_if_block$3(b);return{c(){w=element("div"),C&&C.c(),this.h()},l(k){w=claim_element(k,"DIV",{class:!0,id:!0});var T=children(w);C&&C.l(T),T.forEach(detach),this.h()},h(){attr(w,"class","chart-container svelte-1qtg1r"),attr(w,"id","emotions-small-multiples")},m(k,T){insert_hydration(k,w,T),C&&C.m(w,null)},p(k,[T]){k[0].length>0?C?C.p(k,T):(C=create_if_block$3(k),C.c(),C.m(w,null)):C&&(C.d(1),C=null)},i:noop,o:noop,d(k){k&&detach(w),C&&C.d()}}}let width=200,height$2=150;function instance$7($$self,$$props,$$invalidate){let data=[];const emotions=["anger","anticipation","disgust","fear","joy","sadness","surprise","trust"],colors=["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628","#ffff33"];let chartRefs=new Array(emotions.length);const margin={top:20,right:20,bottom:30,left:40},chartWidth=width-margin.left-margin.right,chartHeight=height$2-margin.top-margin.bottom,formatDate=timeFormat("%Y");let xScale,yScale,lineGenerators;const normalizeEmotions=b=>{const w=Object.values(b).reduce((C,k)=>C+k,0);return Object.entries(b).reduce((C,[k,T])=>(C[k]=T/w,C),{})},processData=data=>{const filteredData=data.filter(b=>{const w=+b.chart_week.slice(0,4);return w>=1960&&w<=2020}),groupedData=rollups(filteredData,v=>{const emotionSums=v.reduce((acc,d)=>{try{const parsedEmotions=eval("("+d.Emotions+")");if(Object.keys(parsedEmotions).length>0){const b=normalizeEmotions(parsedEmotions);emotions.forEach(w=>{acc[w]+=b[w]||0})}}catch(b){console.warn("Error parsing emotions:",d.Emotions)}return acc},Object.fromEntries(emotions.map(b=>[b,0]))),totalSongs=v.length,averageEmotions=Object.entries(emotionSums).reduce((b,[w,C])=>(b[w]=C/totalSongs,b),{});return averageEmotions},b=>b.chart_week.slice(0,4));return Array.from(groupedData,([b,w])=>({year:new Date(b),...w}))};onMount(async()=>{$$invalidate(0,data=processData(await csv("assets/billboard.csv"))),$$invalidate(2,xScale=time().domain(extent(data,b=>b.year)).range([0,chartWidth])),$$invalidate(3,yScale=linear().domain([0,.5]).range([chartHeight,0])),$$invalidate(4,lineGenerators=emotions.map(b=>line().x(w=>xScale(w.year)).y(w=>yScale(w[b])).defined(w=>w.year>=new Date("1960")&&w.year<=new Date("2020"))))});function div1_binding(b,w){binding_callbacks[b?"unshift":"push"](()=>{chartRefs[w]=b,$$invalidate(1,chartRefs)})}return[data,chartRefs,xScale,yScale,lineGenerators,emotions,colors,margin,chartWidth,chartHeight,formatDate,div1_binding]}class EmotionChart extends SvelteComponent{constructor(w){super(),init(this,w,instance$7,create_fragment$a,safe_not_equal,{})}}function select(b){return typeof b=="string"?new Selection([[document.querySelector(b)]],[document.documentElement]):new Selection([[b]],root)}function tree_add(b){const w=+this._x.call(null,b),C=+this._y.call(null,b);return add(this.cover(w,C),w,C,b)}function add(b,w,C,k){if(isNaN(w)||isNaN(C))return b;var T,S=b._root,M={data:k},$=b._x0,E=b._y0,I=b._x1,D=b._y1,A,P,L,R,N,H,z,j;if(!S)return b._root=M,b;for(;S.length;)if((N=w>=(A=($+I)/2))?$=A:I=A,(H=C>=(P=(E+D)/2))?E=P:D=P,T=S,!(S=S[z=H<<1|N]))return T[z]=M,b;if(L=+b._x.call(null,S.data),R=+b._y.call(null,S.data),w===L&&C===R)return M.next=S,T?T[z]=M:b._root=M,b;do T=T?T[z]=new Array(4):b._root=new Array(4),(N=w>=(A=($+I)/2))?$=A:I=A,(H=C>=(P=(E+D)/2))?E=P:D=P;while((z=H<<1|N)===(j=(R>=P)<<1|L>=A));return T[j]=S,T[z]=M,b}function addAll(b){var w,C,k=b.length,T,S,M=new Array(k),$=new Array(k),E=1/0,I=1/0,D=-1/0,A=-1/0;for(C=0;C<k;++C)isNaN(T=+this._x.call(null,w=b[C]))||isNaN(S=+this._y.call(null,w))||(M[C]=T,$[C]=S,T<E&&(E=T),T>D&&(D=T),S<I&&(I=S),S>A&&(A=S));if(E>D||I>A)return this;for(this.cover(E,I).cover(D,A),C=0;C<k;++C)add(this,M[C],$[C],b[C]);return this}function tree_cover(b,w){if(isNaN(b=+b)||isNaN(w=+w))return this;var C=this._x0,k=this._y0,T=this._x1,S=this._y1;if(isNaN(C))T=(C=Math.floor(b))+1,S=(k=Math.floor(w))+1;else{for(var M=T-C||1,$=this._root,E,I;C>b||b>=T||k>w||w>=S;)switch(I=(w<k)<<1|b<C,E=new Array(4),E[I]=$,$=E,M*=2,I){case 0:T=C+M,S=k+M;break;case 1:C=T-M,S=k+M;break;case 2:T=C+M,k=S-M;break;case 3:C=T-M,k=S-M;break}this._root&&this._root.length&&(this._root=$)}return this._x0=C,this._y0=k,this._x1=T,this._y1=S,this}function tree_data(){var b=[];return this.visit(function(w){if(!w.length)do b.push(w.data);while(w=w.next)}),b}function tree_extent(b){return arguments.length?this.cover(+b[0][0],+b[0][1]).cover(+b[1][0],+b[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(b,w,C,k,T){this.node=b,this.x0=w,this.y0=C,this.x1=k,this.y1=T}function tree_find(b,w,C){var k,T=this._x0,S=this._y0,M,$,E,I,D=this._x1,A=this._y1,P=[],L=this._root,R,N;for(L&&P.push(new Quad(L,T,S,D,A)),C==null?C=1/0:(T=b-C,S=w-C,D=b+C,A=w+C,C*=C);R=P.pop();)if(!(!(L=R.node)||(M=R.x0)>D||($=R.y0)>A||(E=R.x1)<T||(I=R.y1)<S))if(L.length){var H=(M+E)/2,z=($+I)/2;P.push(new Quad(L[3],H,z,E,I),new Quad(L[2],M,z,H,I),new Quad(L[1],H,$,E,z),new Quad(L[0],M,$,H,z)),(N=(w>=z)<<1|b>=H)&&(R=P[P.length-1],P[P.length-1]=P[P.length-1-N],P[P.length-1-N]=R)}else{var j=b-+this._x.call(null,L.data),W=w-+this._y.call(null,L.data),U=j*j+W*W;if(U<C){var O=Math.sqrt(C=U);T=b-O,S=w-O,D=b+O,A=w+O,k=L.data}}return k}function tree_remove(b){if(isNaN(D=+this._x.call(null,b))||isNaN(A=+this._y.call(null,b)))return this;var w,C=this._root,k,T,S,M=this._x0,$=this._y0,E=this._x1,I=this._y1,D,A,P,L,R,N,H,z;if(!C)return this;if(C.length)for(;;){if((R=D>=(P=(M+E)/2))?M=P:E=P,(N=A>=(L=($+I)/2))?$=L:I=L,w=C,!(C=C[H=N<<1|R]))return this;if(!C.length)break;(w[H+1&3]||w[H+2&3]||w[H+3&3])&&(k=w,z=H)}for(;C.data!==b;)if(T=C,!(C=C.next))return this;return(S=C.next)&&delete C.next,T?(S?T.next=S:delete T.next,this):w?(S?w[H]=S:delete w[H],(C=w[0]||w[1]||w[2]||w[3])&&C===(w[3]||w[2]||w[1]||w[0])&&!C.length&&(k?k[z]=C:this._root=C),this):(this._root=S,this)}function removeAll(b){for(var w=0,C=b.length;w<C;++w)this.remove(b[w]);return this}function tree_root(){return this._root}function tree_size(){var b=0;return this.visit(function(w){if(!w.length)do++b;while(w=w.next)}),b}function tree_visit(b){var w=[],C,k=this._root,T,S,M,$,E;for(k&&w.push(new Quad(k,this._x0,this._y0,this._x1,this._y1));C=w.pop();)if(!b(k=C.node,S=C.x0,M=C.y0,$=C.x1,E=C.y1)&&k.length){var I=(S+$)/2,D=(M+E)/2;(T=k[3])&&w.push(new Quad(T,I,D,$,E)),(T=k[2])&&w.push(new Quad(T,S,D,I,E)),(T=k[1])&&w.push(new Quad(T,I,M,$,D)),(T=k[0])&&w.push(new Quad(T,S,M,I,D))}return this}function tree_visitAfter(b){var w=[],C=[],k;for(this._root&&w.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));k=w.pop();){var T=k.node;if(T.length){var S,M=k.x0,$=k.y0,E=k.x1,I=k.y1,D=(M+E)/2,A=($+I)/2;(S=T[0])&&w.push(new Quad(S,M,$,D,A)),(S=T[1])&&w.push(new Quad(S,D,$,E,A)),(S=T[2])&&w.push(new Quad(S,M,A,D,I)),(S=T[3])&&w.push(new Quad(S,D,A,E,I))}C.push(k)}for(;k=C.pop();)b(k.node,k.x0,k.y0,k.x1,k.y1);return this}function defaultX(b){return b[0]}function tree_x(b){return arguments.length?(this._x=b,this):this._x}function defaultY(b){return b[1]}function tree_y(b){return arguments.length?(this._y=b,this):this._y}function quadtree(b,w,C){var k=new Quadtree(w??defaultX,C??defaultY,NaN,NaN,NaN,NaN);return b==null?k:k.addAll(b)}function Quadtree(b,w,C,k,T,S){this._x=b,this._y=w,this._x0=C,this._y0=k,this._x1=T,this._y1=S,this._root=void 0}function leaf_copy(b){for(var w={data:b.data},C=w;b=b.next;)C=C.next={data:b.data};return w}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var b=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),w=this._root,C,k;if(!w)return b;if(!w.length)return b._root=leaf_copy(w),b;for(C=[{source:w,target:b._root=new Array(4)}];w=C.pop();)for(var T=0;T<4;++T)(k=w.source[T])&&(k.length?C.push({source:k,target:w.target[T]=new Array(4)}):w.target[T]=leaf_copy(k));return b};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant(b){return function(){return b}}function jiggle(b){return(b()-.5)*1e-6}function x$1(b){return b.x+b.vx}function y$1(b){return b.y+b.vy}function collide(b){var w,C,k,T=1,S=1;typeof b!="function"&&(b=constant(b==null?1:+b));function M(){for(var I,D=w.length,A,P,L,R,N,H,z=0;z<S;++z)for(A=quadtree(w,x$1,y$1).visitAfter($),I=0;I<D;++I)P=w[I],N=C[P.index],H=N*N,L=P.x+P.vx,R=P.y+P.vy,A.visit(j);function j(W,U,O,q,V){var Y=W.data,te=W.r,J=N+te;if(Y){if(Y.index>P.index){var B=L-Y.x-Y.vx,ee=R-Y.y-Y.vy,K=B*B+ee*ee;K<J*J&&(B===0&&(B=jiggle(k),K+=B*B),ee===0&&(ee=jiggle(k),K+=ee*ee),K=(J-(K=Math.sqrt(K)))/K*T,P.vx+=(B*=K)*(J=(te*=te)/(H+te)),P.vy+=(ee*=K)*J,Y.vx-=B*(J=1-J),Y.vy-=ee*J)}return}return U>L+J||q<L-J||O>R+J||V<R-J}}function $(I){if(I.data)return I.r=C[I.data.index];for(var D=I.r=0;D<4;++D)I[D]&&I[D].r>I.r&&(I.r=I[D].r)}function E(){if(w){var I,D=w.length,A;for(C=new Array(D),I=0;I<D;++I)A=w[I],C[A.index]=+b(A,I,w)}}return M.initialize=function(I,D){w=I,k=D,E()},M.iterations=function(I){return arguments.length?(S=+I,M):S},M.strength=function(I){return arguments.length?(T=+I,M):T},M.radius=function(I){return arguments.length?(b=typeof I=="function"?I:constant(+I),E(),M):b},M}const a$1=1664525,c$1=1013904223,m=4294967296;function lcg(){let b=1;return()=>(b=(a$1*b+c$1)%m)/m}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(b){var w,C=1,k=.001,T=1-Math.pow(k,1/300),S=0,M=.6,$=new Map,E=timer(A),I=dispatch("tick","end"),D=lcg();b==null&&(b=[]);function A(){P(),I.call("tick",w),C<k&&(E.stop(),I.call("end",w))}function P(N){var H,z=b.length,j;N===void 0&&(N=1);for(var W=0;W<N;++W)for(C+=(S-C)*T,$.forEach(function(U){U(C)}),H=0;H<z;++H)j=b[H],j.fx==null?j.x+=j.vx*=M:(j.x=j.fx,j.vx=0),j.fy==null?j.y+=j.vy*=M:(j.y=j.fy,j.vy=0);return w}function L(){for(var N=0,H=b.length,z;N<H;++N){if(z=b[N],z.index=N,z.fx!=null&&(z.x=z.fx),z.fy!=null&&(z.y=z.fy),isNaN(z.x)||isNaN(z.y)){var j=initialRadius*Math.sqrt(.5+N),W=N*initialAngle;z.x=j*Math.cos(W),z.y=j*Math.sin(W)}(isNaN(z.vx)||isNaN(z.vy))&&(z.vx=z.vy=0)}}function R(N){return N.initialize&&N.initialize(b,D),N}return L(),w={tick:P,restart:function(){return E.restart(A),w},stop:function(){return E.stop(),w},nodes:function(N){return arguments.length?(b=N,L(),$.forEach(R),w):b},alpha:function(N){return arguments.length?(C=+N,w):C},alphaMin:function(N){return arguments.length?(k=+N,w):k},alphaDecay:function(N){return arguments.length?(T=+N,w):+T},alphaTarget:function(N){return arguments.length?(S=+N,w):S},velocityDecay:function(N){return arguments.length?(M=1-N,w):1-M},randomSource:function(N){return arguments.length?(D=N,$.forEach(R),w):D},force:function(N,H){return arguments.length>1?(H==null?$.delete(N):$.set(N,R(H)),w):$.get(N)},find:function(N,H,z){var j=0,W=b.length,U,O,q,V,Y;for(z==null?z=1/0:z*=z,j=0;j<W;++j)V=b[j],U=N-V.x,O=H-V.y,q=U*U+O*O,q<z&&(Y=V,z=q);return Y},on:function(N,H){return arguments.length>1?(I.on(N,H),w):I.on(N)}}}function x(b){var w=constant(.1),C,k,T;typeof b!="function"&&(b=constant(b==null?0:+b));function S($){for(var E=0,I=C.length,D;E<I;++E)D=C[E],D.vx+=(T[E]-D.x)*k[E]*$}function M(){if(C){var $,E=C.length;for(k=new Array(E),T=new Array(E),$=0;$<E;++$)k[$]=isNaN(T[$]=+b(C[$],$,C))?0:+w(C[$],$,C)}}return S.initialize=function($){C=$,M()},S.strength=function($){return arguments.length?(w=typeof $=="function"?$:constant(+$),M(),S):w},S.x=function($){return arguments.length?(b=typeof $=="function"?$:constant(+$),M(),S):b},S}function y(b){var w=constant(.1),C,k,T;typeof b!="function"&&(b=constant(b==null?0:+b));function S($){for(var E=0,I=C.length,D;E<I;++E)D=C[E],D.vy+=(T[E]-D.y)*k[E]*$}function M(){if(C){var $,E=C.length;for(k=new Array(E),T=new Array(E),$=0;$<E;++$)k[$]=isNaN(T[$]=+b(C[$],$,C))?0:+w(C[$],$,C)}}return S.initialize=function($){C=$,M()},S.strength=function($){return arguments.length?(w=typeof $=="function"?$:constant(+$),M(),S):w},S.y=function($){return arguments.length?(b=typeof $=="function"?$:constant(+$),M(),S):b},S}function create_if_block$2(b){let w,C;return{c(){w=element("div"),C=text$1(b[4]),this.h()},l(k){w=claim_element(k,"DIV",{class:!0,style:!0});var T=children(w);C=claim_text(T,b[4]),T.forEach(detach),this.h()},h(){attr(w,"class","tooltip"),set_style(w,"left",b[2]+"px"),set_style(w,"top",b[3]+"px"),set_style(w,"background-color","white"),set_style(w,"color","black"),set_style(w,"padding","5px"),set_style(w,"border-radius","4px"),set_style(w,"box-shadow","0 2px 4px rgba(0, 0, 0, 0.2)"),set_style(w,"z-index","9999")},m(k,T){insert_hydration(k,w,T),append_hydration(w,C)},p(k,T){T&16&&set_data(C,k[4]),T&4&&set_style(w,"left",k[2]+"px"),T&8&&set_style(w,"top",k[3]+"px")},d(k){k&&detach(w)}}}function create_fragment$9(b){let w,C,k,T,S,M=b[1]&&create_if_block$2(b);return{c(){w=element("div"),C=svg_element("svg"),k=svg_element("title"),T=text$1("Artist Sentiment Scores"),S=space(),M&&M.c(),this.h()},l($){w=claim_element($,"DIV",{class:!0});var E=children(w);C=claim_svg_element(E,"svg",{id:!0,width:!0,height:!0});var I=children(C);k=claim_svg_element(I,"title",{});var D=children(k);T=claim_text(D,"Artist Sentiment Scores"),D.forEach(detach),I.forEach(detach),S=claim_space(E),M&&M.l(E),E.forEach(detach),this.h()},h(){attr(C,"id","chart"),attr(C,"width",b[0]),attr(C,"height",height$1),attr(w,"class","chart-container svelte-1d45vpu")},m($,E){insert_hydration($,w,E),append_hydration(w,C),append_hydration(C,k),append_hydration(k,T),append_hydration(w,S),M&&M.m(w,null),b[6](w)},p($,[E]){E&1&&attr(C,"width",$[0]),$[1]?M?M.p($,E):(M=create_if_block$2($),M.c(),M.m(w,null)):M&&(M.d(1),M=null)},i:noop,o:noop,d($){$&&detach(w),M&&M.d(),b[6](null)}}}let height$1=600,minSongs=3;function instance$6(b,w,C){let k=[],T=0,S={top:20,right:20,bottom:50,left:100},M=0,$=height$1-S.top-S.bottom,E=!1,I=0,D=0,A="",P;onMount(async()=>{const z=await(await fetch("assets/billboard.csv")).text();return k=await csvParse(z,j=>({performer:j.performer.split(", "),sentiment:j.Sentiment==="Positive"?1:-1,title:j.title})),k=flatRollup(k,j=>({sentiment:sum(j,W=>W.sentiment)/j.length,count:j.length}),j=>j.performer.join(", ")),k=k.map(([j,{sentiment:W,count:U}])=>({performer:j,sentiment:W,count:U})).filter(j=>j.count>=minSongs).sort((j,W)=>descending(j.sentiment,W.sentiment)),typeof window<"u"&&(R(),window.addEventListener("resize",L)),L(),()=>{typeof window<"u"&&window.removeEventListener("resize",L)}});function L(){P&&(C(0,T=P.clientWidth),M=T-S.left-S.right,R())}function R(){const H=select("#chart");H.selectAll("*").remove(),H.attr("width",T).attr("height",height$1);const z=linear().domain(extent(k,U=>U.sentiment)).range([$,0]),j=sqrt().domain([0,max(k,U=>U.count)]).range([0,10]),W=simulation(k).force("x",x(M/2)).force("y",y(U=>z(U.sentiment))).force("collision",collide().radius(U=>j(U.count)+2)).stop();for(let U=0;U<300;++U)W.tick();H.append("g").attr("transform",`translate(${S.left},${S.top})`).selectAll("circle").data(k).enter().append("circle").attr("cx",U=>U.x).attr("cy",U=>U.y).attr("r",U=>j(U.count)).attr("fill",U=>U.sentiment>0?"var(--chart-color-2)":"var(--chart-color-1)").attr("tabindex","0").attr("role","graphics-symbol").attr("aria-roledescription","circle").attr("aria-label",U=>`${U.performer}: Sentiment ${U.sentiment.toFixed(2)}, Songs ${U.count}`).on("mouseover focus",function(U,O){select(this).attr("opacity",.8),C(1,E=!0),C(2,I=U.pageX),C(3,D=U.pageY),C(4,A=O.performer)}).on("mouseout blur",function(){select(this).attr("opacity",1),C(1,E=!1)}).on("click",function(U,O){E&&A===O.performer?C(1,E=!1):(C(1,E=!0),C(2,I=U.pageX),C(3,D=U.pageY),C(4,A=O.performer))}),H.append("text").attr("class","x-label").attr("text-anchor","middle").attr("x",T/2).attr("y",height$1-10).text("Performer"),H.append("text").attr("class","y-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-height$1/2).attr("y",20).text("Sentiment Score")}function N(H){binding_callbacks[H?"unshift":"push"](()=>{P=H,C(5,P)})}return[T,E,I,D,A,P,N]}class ArtistScatterplot extends SvelteComponent{constructor(w){super(),init(this,w,instance$6,create_fragment$9,safe_not_equal,{})}}function create_fragment$8(b){let w,C='<svg class="radar-chart"><title>Artist Emotion Comparison</title></svg>';return{c(){w=element("div"),w.innerHTML=C,this.h()},l(k){w=claim_element(k,"DIV",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(w)!=="svelte-jxewvh"&&(w.innerHTML=C),this.h()},h(){attr(w,"class","chart-container svelte-1tfds4d")},m(k,T){insert_hydration(k,w,T),b[1](w)},p:noop,i:noop,o:noop,d(k){k&&detach(w),b[1](null)}}}let height=400;function instance$5(b,w,C){let k=[],T=0,S={top:50,right:50,bottom:50,left:50},M=["anger","anticipation","disgust","joy","surprise","trust","fear","sadness"],$=0,E=height-S.top-S.bottom,I=0,D;const A=["Billie Eilish","Ariana Grande"];onMount(async()=>{const H=await(await fetch("assets/billboard.csv")).text();return k=await csvParse(H,z=>({performer:z.performer.split(", "),emotions:JSON.parse(z.Emotions.replace(/'/g,'"')),title:z.title})),k=flatRollup(k,z=>{const j=z.map(U=>{const O=sum(Object.values(U.emotions));return Object.fromEntries(Object.entries(U.emotions).map(([q,V])=>[q,V/O]))});return M.reduce((U,O)=>(U[O]=mean(j,q=>q[O]||0),U),{})},z=>z.performer.join(", ")),k=Array.from(k,([z,j])=>({performer:z,emotions:j})).filter(z=>A.includes(z.performer)),typeof window<"u"&&(P(),window.addEventListener("resize",P)),()=>{typeof window<"u"&&window.removeEventListener("resize",P)}});function P(){D&&(T=D.clientWidth,$=(T-S.left-S.right)/2,I=Math.min($,E)/2,L())}function L(){const N=select(D).select("svg");N.selectAll("*").remove(),N.attr("width",T).attr("height",height);const H=point().domain(M).range([0,2*Math.PI]),z=linear().domain([0,1]).range([0,I]),j=lineRadial$1().angle(W=>H(W[0])).radius(W=>z(W[1]));k.forEach((W,U)=>{const O=N.append("g").attr("class","chart-group").attr("transform",`translate(${S.left+$/2+U*($+S.right)},${height/2})`),q=O.append("g").attr("class","axis");q.selectAll("line").data(M).enter().append("line").attr("x1",0).attr("y1",0).attr("x2",V=>z(1)*Math.cos(H(V))).attr("y2",V=>z(1)*Math.sin(H(V))).attr("stroke","currentColor").attr("stroke-width",1),q.selectAll("text").data(M).enter().append("text").attr("x",V=>z(1.1)*Math.cos(H(V))).attr("y",V=>z(1.1)*Math.sin(H(V))).attr("dy","0.35em").attr("text-anchor","middle").text(V=>V),O.append("path").attr("class","radar-line").attr("d",j(Object.entries(W.emotions))).attr("fill",`rgba(${U*255}, ${255-U*255}, 255, 0.2)`).attr("stroke",`rgb(${U*255}, ${255-U*255}, 255)`).attr("stroke-width",2),O.append("text").attr("class","artist-label").attr("x",0).attr("y",-I-20).attr("text-anchor","middle").text(W.performer)})}function R(N){binding_callbacks[N?"unshift":"push"](()=>{D=N,C(0,D)})}return[D,R]}class ArtistRadarChart extends SvelteComponent{constructor(w){super(),init(this,w,instance$5,create_fragment$8,safe_not_equal,{})}}function create_fragment$7(b){let w,C=`So what does this all mean? Why is popular music getting sadder? There are no
	easy answers, but a few potential factors come to mind.`,k,T,S=`On a socio-cultural level, the rise of social media has made it more
	acceptable and even encouraged to publicly express negative emotions. Global
	events like the pandemic, political upheavals, and the climate crisis have
	also undoubtedly affected our collective mood.`,M,$,E=`There may also be a certain catharsis or relatability in hearing our own
	struggles echoed in the music we listen to. In an age of curated perfection on
	Instagram, there's a raw authenticity to an artist baring their emotional
	vulnerabilities.`,I,D,A=`It's worth noting that music has always been a reflection of its time. The
	protest songs of the 60s, the nihilistic punk of the 70s, the angsty grunge of
	the 90s - each era has its own emotional tone. Perhaps we are in the age of
	sad bangers, where melancholy and catchiness are not mutually exclusive.`,P,L,R=`Will this trend towards negativity continue? It's hard to say. Music is
	cyclical, and perhaps a brighter, more optimistic phase is around the corner.
	Or maybe we are entering a new normal, where sadness is the default mode of
	popular song.`,N,H,z='<img src="assets/emotional-journey-image.jpg" alt="A winding path represents the emotional journey of popular music from the 1960s to the present. The path is divided into sections, each marked with distinctive styles and colors to indicate the predominant emotions of that era. The colors transition from bright and cheerful hues in the earlier decades to darker and more somber tones in recent years. Iconic symbols and silhouettes along the path represent significant milestones, genres, and artists. Small charts and graphs illustrate the changing proportions of emotions over time. The background complements the emotional journey with abstract shapes, textures, and patterns that evoke the mood of each era. A legend explains the significance of the colors, symbols, and charts used." class="svelte-1lv1wdy"/> <p class="image-caption svelte-1lv1wdy">The Emotional Evolution of Popular Music</p>',j,W,U=`Regardless, one thing is clear: music has the profound power to reflect and
	shape our emotions. The songs we listen to are not just background noise; they
	are a mirror of our times, a shared emotional language. As we navigate an
	increasingly complex and challenging world, maybe a little musical melancholy
	is just what we need to feel less alone. After all, in the words of another
	recent hit, "Everybody hurts sometimes."`;return{c(){w=element("p"),w.textContent=C,k=space(),T=element("p"),T.textContent=S,M=space(),$=element("p"),$.textContent=E,I=space(),D=element("p"),D.textContent=A,P=space(),L=element("p"),L.textContent=R,N=space(),H=element("div"),H.innerHTML=z,j=space(),W=element("p"),W.textContent=U,this.h()},l(O){w=claim_element(O,"P",{"data-svelte-h":!0}),get_svelte_dataset(w)!=="svelte-uex27x"&&(w.textContent=C),k=claim_space(O),T=claim_element(O,"P",{"data-svelte-h":!0}),get_svelte_dataset(T)!=="svelte-glup5x"&&(T.textContent=S),M=claim_space(O),$=claim_element(O,"P",{"data-svelte-h":!0}),get_svelte_dataset($)!=="svelte-119zk8h"&&($.textContent=E),I=claim_space(O),D=claim_element(O,"P",{"data-svelte-h":!0}),get_svelte_dataset(D)!=="svelte-t10t68"&&(D.textContent=A),P=claim_space(O),L=claim_element(O,"P",{"data-svelte-h":!0}),get_svelte_dataset(L)!=="svelte-14phkdh"&&(L.textContent=R),N=claim_space(O),H=claim_element(O,"DIV",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(H)!=="svelte-fg10lq"&&(H.innerHTML=z),j=claim_space(O),W=claim_element(O,"P",{"data-svelte-h":!0}),get_svelte_dataset(W)!=="svelte-1q4o23v"&&(W.textContent=U),this.h()},h(){attr(H,"class","emotional-journey-image svelte-1lv1wdy")},m(O,q){insert_hydration(O,w,q),insert_hydration(O,k,q),insert_hydration(O,T,q),insert_hydration(O,M,q),insert_hydration(O,$,q),insert_hydration(O,I,q),insert_hydration(O,D,q),insert_hydration(O,P,q),insert_hydration(O,L,q),insert_hydration(O,N,q),insert_hydration(O,H,q),insert_hydration(O,j,q),insert_hydration(O,W,q)},p:noop,i:noop,o:noop,d(O){O&&(detach(w),detach(k),detach(T),detach(M),detach($),detach(I),detach(D),detach(P),detach(L),detach(N),detach(H),detach(j),detach(W))}}}class Conclusion extends SvelteComponent{constructor(w){super(),init(this,w,null,create_fragment$7,safe_not_equal,{})}}function create_fragment$6(b){let w,C=`Our analysis is based on the Billboard Hot 100 year-end top 10 songs from 1960
	to 2020. The lyrics for each song were sourced from the Genius API.`,k,T,S=`To determine the emotional content of each song, we used the NRC Sentiment and
	Emotion Lexicons. These lexicons contain a list of English words and their
	associations with eight basic emotions (anger, fear, anticipation, trust,
	surprise, sadness, joy, and disgust) and two sentiments (negative and
	positive).`,M,$,E=`Each song's lyrics were analyzed and assigned a score for each of the eight
	emotions based on the frequency and intensity of emotion-related words. The
	primary sentiment (positive or negative) was determined by which sentiment had
	the higher score.`,I,D,A=`It's important to note that this is an automated analysis based on word
	associations, and may not always capture the full nuance and context of a
	song's emotional content. Sarcasm, for example, or complex storytelling may be
	misinterpreted. However, across a large dataset, it provides a robust overall
	picture of the patterns and trends in the emotional landscape of popular
	music.`,P,L,R=`You can explore the full datasets and code used in this analysis on our
	<a href="https://github.com/your-repo-here" target="_blank">Github repo</a>.`;return{c(){w=element("p"),w.textContent=C,k=space(),T=element("p"),T.textContent=S,M=space(),$=element("p"),$.textContent=E,I=space(),D=element("p"),D.textContent=A,P=space(),L=element("p"),L.innerHTML=R},l(N){w=claim_element(N,"P",{"data-svelte-h":!0}),get_svelte_dataset(w)!=="svelte-1tjors8"&&(w.textContent=C),k=claim_space(N),T=claim_element(N,"P",{"data-svelte-h":!0}),get_svelte_dataset(T)!=="svelte-ysp56e"&&(T.textContent=S),M=claim_space(N),$=claim_element(N,"P",{"data-svelte-h":!0}),get_svelte_dataset($)!=="svelte-fa7cuk"&&($.textContent=E),I=claim_space(N),D=claim_element(N,"P",{"data-svelte-h":!0}),get_svelte_dataset(D)!=="svelte-183pkqc"&&(D.textContent=A),P=claim_space(N),L=claim_element(N,"P",{"data-svelte-h":!0}),get_svelte_dataset(L)!=="svelte-re1v80"&&(L.innerHTML=R)},m(N,H){insert_hydration(N,w,H),insert_hydration(N,k,H),insert_hydration(N,T,H),insert_hydration(N,M,H),insert_hydration(N,$,H),insert_hydration(N,I,H),insert_hydration(N,D,H),insert_hydration(N,P,H),insert_hydration(N,L,H)},p:noop,i:noop,o:noop,d(N){N&&(detach(w),detach(k),detach(T),detach(M),detach($),detach(I),detach(D),detach(P),detach(L))}}}class Methodology extends SvelteComponent{constructor(w){super(),init(this,w,null,create_fragment$6,safe_not_equal,{})}}class Footer extends SvelteComponent{constructor(w){super(),init(this,w,null,null,safe_not_equal,{})}}function create_fragment$5(b){let w,C,k,T="← See the process",S,M,$,E,I,D,A,P,L="The Rise of Negativity",R,N,H,z,j=`Our analysis reveals a clear upward trend in the percentage of songs
				with a predominantly negative emotional sentiment, particularly since
				the mid-2010s. In 2020, for the first time in the history of our
				dataset, negative songs outnumbered positive ones in the year-end top
				10.`,W,U,O=`This rise in negativity is not attributable to any single emotion, but
				rather a confluence of increases in sadness, fear, disgust, and anger.
				Joy, while still the most common individual emotion, has been on a
				relative decline.`,q,V,Y,te,J=`Interestingly, this shift coincides with the rise of Hip hop/Rap as the
				dominant genre in popular music, overtaking the more traditionally
				upbeat Pop. Hip hop songs, on average, tend to have a much higher
				proportion of negative emotions compared to other genres.`,B,ee,K=`But this is not to say that negativity is confined to Hip hop. Across
				the board, from Pop to Rock to R&B, songs with darker themes have been
				on the ascent. It seems to be a cross-genre zeitgeist, a pervasive mood
				in the music of our times.`,Q,Z,he,le="The Artist Landscape",X,oe,ae=`Of course, behind every song is an artist, and each artist has their own
				distinctive emotional style or "fingerprint." Some, like Billie Eilish
				or Juice WRLD, are known for their consistently dark and moody lyrics,
				while others, like Ariana Grande or BTS, tend towards a more positive,
				uplifting tone.`,pe,_e,ke,we,Ce=`Explore the scatterplot above to see where your favorite artists fall on
				the spectrum of musical emotion. You can search for specific artists,
				filter by genre and decade, and dive into any artist's full emotional
				profile.`,Te,fe,Se,G,ie=`What's fascinating is how an artist's emotional fingerprint can evolve
				over their career, often reflecting their personal growth and struggles.
				Taylor Swift, for example, started out with mostly positive, lovestruck
				anthems, but has increasingly explored darker, more introspective themes
				in her recent work.`,ne,F,ue,se="Conclusion",me,de,be,xe,$e,We="Methodology",Ne,Ee,Re,Ie,ze,Ae,He,Le;return $=new Header$1({}),I=new Introduction({}),N=new NegativeSongsChart({}),V=new EmotionChart({}),_e=new ArtistScatterplot({}),fe=new ArtistRadarChart({}),de=new Conclusion({}),Ee=new Methodology({}),Ie=new Footer({}),{c(){w=element("div"),C=element("div"),k=element("button"),k.textContent=T,S=space(),M=element("article"),create_component($.$$.fragment),E=space(),create_component(I.$$.fragment),D=space(),A=element("section"),P=element("h2"),P.textContent=L,R=space(),create_component(N.$$.fragment),H=space(),z=element("p"),z.textContent=j,W=space(),U=element("p"),U.textContent=O,q=space(),create_component(V.$$.fragment),Y=space(),te=element("p"),te.textContent=J,B=space(),ee=element("p"),ee.textContent=K,Q=space(),Z=element("section"),he=element("h2"),he.textContent=le,X=space(),oe=element("p"),oe.textContent=ae,pe=space(),create_component(_e.$$.fragment),ke=space(),we=element("p"),we.textContent=Ce,Te=space(),create_component(fe.$$.fragment),Se=space(),G=element("p"),G.textContent=ie,ne=space(),F=element("section"),ue=element("h2"),ue.textContent=se,me=space(),create_component(de.$$.fragment),be=space(),xe=element("section"),$e=element("h2"),$e.textContent=We,Ne=space(),create_component(Ee.$$.fragment),Re=space(),create_component(Ie.$$.fragment),this.h()},l(ce){w=claim_element(ce,"DIV",{id:!0,class:!0});var Me=children(w);C=claim_element(Me,"DIV",{class:!0});var Ue=children(C);k=claim_element(Ue,"BUTTON",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(k)!=="svelte-7zolvu"&&(k.textContent=T),Ue.forEach(detach),S=claim_space(Me),M=claim_element(Me,"ARTICLE",{class:!0});var ge=children(M);claim_component($.$$.fragment,ge),E=claim_space(ge),claim_component(I.$$.fragment,ge),D=claim_space(ge),A=claim_element(ge,"SECTION",{class:!0});var ye=children(A);P=claim_element(ye,"H2",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(P)!=="svelte-53wktd"&&(P.textContent=L),R=claim_space(ye),claim_component(N.$$.fragment,ye),H=claim_space(ye),z=claim_element(ye,"P",{"data-svelte-h":!0}),get_svelte_dataset(z)!=="svelte-h4ggtc"&&(z.textContent=j),W=claim_space(ye),U=claim_element(ye,"P",{"data-svelte-h":!0}),get_svelte_dataset(U)!=="svelte-cf6c50"&&(U.textContent=O),q=claim_space(ye),claim_component(V.$$.fragment,ye),Y=claim_space(ye),te=claim_element(ye,"P",{"data-svelte-h":!0}),get_svelte_dataset(te)!=="svelte-1yht604"&&(te.textContent=J),B=claim_space(ye),ee=claim_element(ye,"P",{"data-svelte-h":!0}),get_svelte_dataset(ee)!=="svelte-1u5qzk0"&&(ee.textContent=K),ye.forEach(detach),Q=claim_space(ge),Z=claim_element(ge,"SECTION",{class:!0});var ve=children(Z);he=claim_element(ve,"H2",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(he)!=="svelte-yedn0x"&&(he.textContent=le),X=claim_space(ve),oe=claim_element(ve,"P",{"data-svelte-h":!0}),get_svelte_dataset(oe)!=="svelte-1ojuycu"&&(oe.textContent=ae),pe=claim_space(ve),claim_component(_e.$$.fragment,ve),ke=claim_space(ve),we=claim_element(ve,"P",{"data-svelte-h":!0}),get_svelte_dataset(we)!=="svelte-19llaoe"&&(we.textContent=Ce),Te=claim_space(ve),claim_component(fe.$$.fragment,ve),Se=claim_space(ve),G=claim_element(ve,"P",{"data-svelte-h":!0}),get_svelte_dataset(G)!=="svelte-1o8q7uw"&&(G.textContent=ie),ve.forEach(detach),ne=claim_space(ge),F=claim_element(ge,"SECTION",{class:!0});var De=children(F);ue=claim_element(De,"H2",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(ue)!=="svelte-grw4hp"&&(ue.textContent=se),me=claim_space(De),claim_component(de.$$.fragment,De),De.forEach(detach),be=claim_space(ge),xe=claim_element(ge,"SECTION",{class:!0});var Pe=children(xe);$e=claim_element(Pe,"H2",{class:!0,"data-svelte-h":!0}),get_svelte_dataset($e)!=="svelte-rgjxwn"&&($e.textContent=We),Ne=claim_space(Pe),claim_component(Ee.$$.fragment,Pe),Pe.forEach(detach),Re=claim_space(ge),claim_component(Ie.$$.fragment,ge),ge.forEach(detach),Me.forEach(detach),this.h()},h(){attr(k,"class","svelte-cc7884"),attr(C,"class","switcher svelte-cc7884"),attr(P,"class","svelte-cc7884"),attr(A,"class","svelte-cc7884"),attr(he,"class","svelte-cc7884"),attr(Z,"class","svelte-cc7884"),attr(ue,"class","svelte-cc7884"),attr(F,"class","svelte-cc7884"),attr($e,"class","svelte-cc7884"),attr(xe,"class","svelte-cc7884"),attr(M,"class","svelte-cc7884"),add_render_callback(()=>b[4].call(M)),attr(w,"id","product"),attr(w,"class","svelte-cc7884"),toggle_class(w,"visible",b[0]==="right")},m(ce,Me){insert_hydration(ce,w,Me),append_hydration(w,C),append_hydration(C,k),append_hydration(w,S),append_hydration(w,M),mount_component($,M,null),append_hydration(M,E),mount_component(I,M,null),append_hydration(M,D),append_hydration(M,A),append_hydration(A,P),append_hydration(A,R),mount_component(N,A,null),append_hydration(A,H),append_hydration(A,z),append_hydration(A,W),append_hydration(A,U),append_hydration(A,q),mount_component(V,A,null),append_hydration(A,Y),append_hydration(A,te),append_hydration(A,B),append_hydration(A,ee),append_hydration(M,Q),append_hydration(M,Z),append_hydration(Z,he),append_hydration(Z,X),append_hydration(Z,oe),append_hydration(Z,pe),mount_component(_e,Z,null),append_hydration(Z,ke),append_hydration(Z,we),append_hydration(Z,Te),mount_component(fe,Z,null),append_hydration(Z,Se),append_hydration(Z,G),append_hydration(M,ne),append_hydration(M,F),append_hydration(F,ue),append_hydration(F,me),mount_component(de,F,null),append_hydration(M,be),append_hydration(M,xe),append_hydration(xe,$e),append_hydration(xe,Ne),mount_component(Ee,xe,null),append_hydration(M,Re),mount_component(Ie,M,null),ze=add_iframe_resize_listener(M,b[4].bind(M)),Ae=!0,He||(Le=listen(k,"click",b[3]),He=!0)},p(ce,[Me]){(!Ae||Me&1)&&toggle_class(w,"visible",ce[0]==="right")},i(ce){Ae||(transition_in($.$$.fragment,ce),transition_in(I.$$.fragment,ce),transition_in(N.$$.fragment,ce),transition_in(V.$$.fragment,ce),transition_in(_e.$$.fragment,ce),transition_in(fe.$$.fragment,ce),transition_in(de.$$.fragment,ce),transition_in(Ee.$$.fragment,ce),transition_in(Ie.$$.fragment,ce),Ae=!0)},o(ce){transition_out($.$$.fragment,ce),transition_out(I.$$.fragment,ce),transition_out(N.$$.fragment,ce),transition_out(V.$$.fragment,ce),transition_out(_e.$$.fragment,ce),transition_out(fe.$$.fragment,ce),transition_out(de.$$.fragment,ce),transition_out(Ee.$$.fragment,ce),transition_out(Ie.$$.fragment,ce),Ae=!1},d(ce){ce&&detach(w),destroy_component($),destroy_component(I),destroy_component(N),destroy_component(V),destroy_component(_e),destroy_component(fe),destroy_component(de),destroy_component(Ee),destroy_component(Ie),ze(),He=!1,Le()}}}function instance$4(b,w,C){let k,T;component_subscribe(b,side,E=>C(0,k=E)),component_subscribe(b,productHeight,E=>C(1,T=E));const S=createEventDispatcher(),M=()=>S("switch","left");function $(){T=this.offsetHeight,productHeight.set(T)}return[k,T,S,M,$]}class Index_Product extends SvelteComponent{constructor(w){super(),init(this,w,instance$4,create_fragment$5,safe_not_equal,{})}}var e$1={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function n$1(b){return b.replace(RegExp("^"+(b.match(/^(\t| )+/)||"")[0],"gm"),"")}function r$1(b){return(b+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t$1(b,w){var C,k,T,S,M,$=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,E=[],I="",D=w||{},A=0;function P(R){var N=e$1[R[1]||""],H=E[E.length-1]==R;return N?N[1]?(H?E.pop():E.push(R),N[0|H]):N[0]:R}function L(){for(var R="";E.length;)R+=P(E[E.length-1]);return R}for(b=b.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(R,N,H){return D[N.toLowerCase()]=H,""}).replace(/^\n+|\n+$/g,"");T=$.exec(b);)k=b.substring(A,T.index),A=$.lastIndex,C=T[0],k.match(/[^\\](\\\\)*\\$/)||((M=T[3]||T[4])?C='<pre class="code '+(T[4]?"poetry":T[2].toLowerCase())+'"><code'+(T[2]?' class="language-'+T[2].toLowerCase()+'"':"")+">"+n$1(r$1(M).replace(/^\n+|\n+$/g,""))+"</code></pre>":(M=T[6])?(M.match(/\./)&&(T[5]=T[5].replace(/^\d+/gm,"")),S=t$1(n$1(T[5].replace(/^\s*[>*+.-]/gm,""))),M==">"?M="blockquote":(M=M.match(/\./)?"ol":"ul",S=S.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),C="<"+M+">"+S+"</"+M+">"):T[8]?C='<img src="'+r$1(T[8])+'" alt="'+r$1(T[7])+'">':T[10]?(I=I.replace("<a>",'<a href="'+r$1(T[11]||D[k.toLowerCase()])+'">'),C=L()+"</a>"):T[9]?C="<a>":T[12]||T[14]?C="<"+(M="h"+(T[14]?T[14].length:T[13]>"="?1:2))+">"+t$1(T[12]||T[15],D)+"</"+M+">":T[16]?C="<code>"+r$1(T[16])+"</code>":(T[17]||T[1])&&(C=P(T[17]||"--"))),I+=k,I+=C;return(I+b.substring(A)+L()).replace(/^\n+|\n+$/g,"")}const code1a=`import requests
import csv

# Replace 'YOUR_API_KEY' with your actual Billboard API key
api_key = 'YOUR_API_KEY'

# Specify the range of years
start_year = 1960
end_year = 2020

# Output file name
output_file = 'billboard_top_100.csv'

# Write the data to a CSV file
with open(output_file, 'w', newline='', encoding='utf-8') as csvfile:
    writer = csv.writer(csvfile)
    writer.writerow(['Year', 'Position', 'Song', 'Artist'])

    for year in range(start_year, end_year + 1):
        print(f"Fetching data for year {year}")

        # Make a request to the Billboard API
        url = f"https://api.billboard.com/charts/hot-100/{year}-12-31?api_key={api_key}"
        response = requests.get(url)

        if response.status_code == 200:
            data = response.json()
            songs = data['content']['charts'][0]['items']

            for position, song_data in enumerate(songs, start=1):
                song_title = song_data['title']
                artist = song_data['artist_name']
                writer.writerow([year, position, song_title, artist])
        else:
            print(f"Error fetching data for year {year}: {response.status_code}")
`,code1b=`import requests
import csv
from bs4 import BeautifulSoup

# Replace 'YOUR_ACCESS_TOKEN' with your actual Genius API access token
access_token = 'YOUR_ACCESS_TOKEN'

# Input file name
input_file = 'billboard_top_100.csv'

# Output file name
output_file = 'song_lyrics.csv'

# Write the data to a CSV file
with open(input_file, 'r', encoding='utf-8') as infile, open(output_file, 'w', newline='', encoding='utf-8') as outfile:
    reader = csv.reader(infile)
    writer = csv.writer(outfile)
    writer.writerow(['Year', 'Position', 'Song', 'Artist', 'Lyrics'])

    next(reader)  # Skip the header row

    for row in reader:
        year, position, song_title, artist = row
        print(f"Fetching lyrics for {song_title} by {artist}")

        # Search for the song on Genius
        search_url = f"https://api.genius.com/search?q={song_title} {artist}"
        headers = {'Authorization': f'Bearer {access_token}'}
        response = requests.get(search_url, headers=headers)

        if response.status_code == 200:
            data = response.json()
            if data['response']['hits']:
                song_url = data['response']['hits'][0]['result']['url']
                song_response = requests.get(song_url)
                soup = BeautifulSoup(song_response.text, 'html.parser')
                lyrics_div = soup.find('div', class_='lyrics')
                if lyrics_div:
                    lyrics = lyrics_div.get_text(separator='\\n').strip()
                    writer.writerow([year, position, song_title, artist, lyrics])
                else:
                    print(f"Lyrics not found for {song_title} by {artist}")
            else:
                print(f"Song not found: {song_title} by {artist}")
        else:
            print(f"Error fetching lyrics for {song_title} by {artist}: {response.status_code}")`,code1c=`import csv
from nltk.sentiment import SentimentIntensityAnalyzer

# Input file name
input_file = 'song_lyrics.csv'

# Output file name
output_file = 'song_sentiment.csv'

# Initialize the sentiment analyzer
sia = SentimentIntensityAnalyzer()

# Write the data to a CSV file
with open(input_file, 'r', encoding='utf-8') as infile, open(output_file, 'w', newline='', encoding='utf-8') as outfile:
    reader = csv.reader(infile)
    writer = csv.writer(outfile)
    writer.writerow(['Year', 'Position', 'Song', 'Artist', 'Sentiment', 'Positive', 'Negative', 'Neutral', 'Compound'])

    next(reader)  # Skip the header row

    for row in reader:
        year, position, song_title, artist, lyrics = row
        print(f"Analyzing sentiment for {song_title} by {artist}")

        # Perform sentiment analysis on the lyrics
        sentiment_scores = sia.polarity_scores(lyrics)
        sentiment = max(sentiment_scores, key=sentiment_scores.get)
        positive = sentiment_scores['pos']
        negative = sentiment_scores['neg']
        neutral = sentiment_scores['neu']
        compound = sentiment_scores['compound']

        writer.writerow([year, position, song_title, artist, sentiment, positive, negative, neutral, compound])`,code2a=`import csv
import os
import lyricsgenius

# Replace 'YOUR_ACCESS_TOKEN' with your actual Genius API access token
access_token = 'YOUR_ACCESS_TOKEN'

# Input file name (Billboard data from GitHub repo)
input_file = 'billboard_data.csv'

# Output directory for storing lyrics files
output_dir = 'lyrics'

# Create the output directory if it doesn't exist
os.makedirs(output_dir, exist_ok=True)

# Initialize the Genius API client
genius = lyricsgenius.Genius(access_token)

# Read the Billboard data from the CSV file
with open(input_file, 'r', encoding='utf-8') as infile:
    reader = csv.DictReader(infile)

    # Keep track of processed songs to avoid duplicates
    processed_songs = set()

    for row in reader:
        peak_pos = int(row['peak_pos'])
        song_title = row['title']
        artist = row['performer']

        # Filter songs based on peak position and remove duplicates
        if peak_pos <= 10 and (song_title, artist) not in processed_songs:
            processed_songs.add((song_title, artist))

            chart_week = row['chart_week']
            year = chart_week.split('-')[0]

            print(f"Fetching lyrics for {song_title} by {artist}")

            try:
                # Search for the song on Genius
                song = genius.search_song(song_title, artist)

                if song:
                    # Generate a unique filename for the lyrics file
                    filename = f"{year}_{song_title}_{artist}.txt"
                    filename = ''.join(c for c in filename if c.isalnum() or c in ['-', '_', '.'])

                    # Save the lyrics to a separate file
                    with open(os.path.join(output_dir, filename), 'w', encoding='utf-8') as outfile:
                        outfile.write(song.lyrics)
                else:
                    print(f"Song not found: {song_title} by {artist}")

            except Exception as e:
                print(f"Error fetching lyrics for {song_title} by {artist}: {str(e)}")`,code3a=`import csv
import os
import nltk
from nltk.corpus import stopwords
from nltk.tokenize import word_tokenize
from nrclex import NRCLex

nltk.download('punkt')
nltk.download('stopwords')

# Input file name (filtered Billboard data)
input_file = 'filtered_billboard_data.csv'

# Output file name for the emotion analysis results
output_file = 'song_emotion_results.csv'

# Directory containing the lyrics files
lyrics_dir = 'lyrics'

# Read the filtered Billboard data from the CSV file
with open(input_file, 'r', encoding='utf-8') as infile, open(output_file, 'w', newline='', encoding='utf-8') as outfile:
    reader = csv.DictReader(infile)
    fieldnames = reader.fieldnames + ['Sentiment', 'Emotions']
    writer = csv.DictWriter(outfile, fieldnames=fieldnames)

    # Write the header row
    writer.writeheader()

    for row in reader:
        song_title = row['title']
        artist = row['performer']
        chart_week = row['chart_week']
        year = chart_week.split('-')[0]

        print(f"Processing: {song_title} by {artist}")

        # Generate the filename for the lyrics file
        filename = f"{year}_{song_title}_{artist}.txt"
        filename = ''.join(c for c in filename if c.isalnum() or c in ['-', '_', '.'])

        # Check if the lyrics file exists
        if os.path.exists(os.path.join(lyrics_dir, filename)):
            # Read the lyrics from the file
            with open(os.path.join(lyrics_dir, filename), 'r', encoding='utf-8') as lyrics_file:
                lyrics = lyrics_file.read()

            # Tokenize the lyrics and remove stopwords
            tokens = word_tokenize(lyrics)
            tokens = [word.lower() for word in tokens if word.isalpha() and word.lower() not in stopwords.words('english')]
            cleaned_lyrics = ' '.join(tokens)

            # Initialize the NRC Emotion Lexicon with the cleaned lyrics
            nrc = NRCLex(cleaned_lyrics)

            # Perform emotion analysis using the NRC Emotion Lexicon
            emotion_scores = nrc.raw_emotion_scores
            sentiment = 'Positive' if emotion_scores['positive'] >= emotion_scores['negative'] else 'Negative'
            emotions = {emotion: score for emotion, score in emotion_scores.items() if emotion not in ['positive', 'negative']}

            # Add the emotion analysis results to the row
            row['Sentiment'] = sentiment
            row['Emotions'] = str(emotions)

            # Write the row to the output file
            writer.writerow(row)
        else:
            print(f"Lyrics file not found for {song_title} by {artist}")`,code3b="emotion_scores = nrc.raw_emotion_scores",code4a=`import pandas as pd
import matplotlib.pyplot as plt

# Read the data from a CSV file
data = pd.read_csv('billboard_data.csv')

# Convert the 'chart_week' column to datetime
data['chart_week'] = pd.to_datetime(data['chart_week'])

# Extract the year from the 'chart_week' column
data['year'] = data['chart_week'].dt.year

# Group the data by year and calculate the percentage of negative songs
yearly_sentiment = data.groupby(['year', 'Sentiment']).size().unstack(fill_value=0)
yearly_sentiment['total'] = yearly_sentiment.sum(axis=1)
yearly_sentiment['percent_negative'] = yearly_sentiment['Negative'] / yearly_sentiment['total'] * 100

# Create a line chart
plt.figure(figsize=(10, 6))
plt.plot(yearly_sentiment.index, yearly_sentiment['percent_negative'], marker='o')
plt.xlabel('Year')
plt.ylabel('Percentage of Negative Songs')
plt.title('Year-over-Year Trend of Negative Songs in the Hot 100')
plt.grid(True)
plt.xticks(rotation=45)

# Add annotations for key shifts or points of interest
# (You can customize this based on your specific data and insights)
plt.annotate('Key Shift', xy=(2015, 60), xytext=(2015, 65),
             arrowprops=dict(facecolor='black', shrink=0.05))

plt.tight_layout()
plt.show()`,code5a=`import pandas as pd
import matplotlib.pyplot as plt
import ast

# Read the data from the CSV file
data = pd.read_csv('song_emotion_results.csv')

# Convert the 'chart_week' column to datetime
data['chart_week'] = pd.to_datetime(data['chart_week'])

# Extract the year and decade from the 'chart_week' column
data['year'] = data['chart_week'].dt.year
data['decade'] = (data['year'] // 10) * 10

# Filter the data to include only songs that reached the top 10
top_10_data = data[data['peak_pos'] <= 10]

# Convert the 'Emotions' column from string to dictionary
top_10_data['Emotions'] = top_10_data['Emotions'].apply(ast.literal_eval)

# Define the emotions to analyze
emotions = ['anger', 'anticipation', 'disgust', 'joy', 'surprise', 'trust', 'fear', 'sadness']

# Define positive and negative emotions
positive_emotions = ['anticipation', 'joy', 'surprise', 'trust']
negative_emotions = ['anger', 'disgust', 'fear', 'sadness']

# Calculate the normalized emotion scores for each song
def normalize_emotions(row):
    emotion_scores = [row['Emotions'].get(emotion, 0) for emotion in emotions]
    total_score = sum(emotion_scores)
    if total_score > 0:
        normalized_scores = [score / total_score for score in emotion_scores]
    else:
        normalized_scores = [0] * len(emotions)
    return pd.Series(normalized_scores, index=emotions)

top_10_data[emotions] = top_10_data.apply(normalize_emotions, axis=1)

# Calculate the average normalized emotion scores for each decade
decade_emotion_avg = top_10_data.groupby('decade')[emotions].mean()

# Reorder the columns to have positive emotions on the bottom and negative emotions on the top
decade_emotion_avg = pd.concat([decade_emotion_avg[positive_emotions], decade_emotion_avg[negative_emotions]], axis=1)

# Create a stacked bar chart
ax = decade_emotion_avg.plot(kind='bar', stacked=True, figsize=(10, 6))
ax.set_xlabel('Decade')
ax.set_ylabel('Share of Emotions')
ax.set_title('Average Emotional Profile of Top 10 Hits by Decade')
ax.legend(title='Emotion', bbox_to_anchor=(1.05, 1), loc='upper left')

# Rotate x-tick labels for better readability
plt.xticks(rotation=45)

plt.tight_layout()
plt.show()`,code6a=`<script>
  import Header from './Header.svelte';
  import Introduction from './Introduction.svelte';
  import NegativeSongsChart from './NegativeSongsChart.svelte';
  import EmotionChart from './EmotionChart.svelte';
  import ArtistScatterplot from './ArtistScatterplot.svelte';
  import ArtistRadarChart from './ArtistRadarChart.svelte';
  import Conclusion from './Conclusion.svelte';
  import Methodology from './Methodology.svelte';
  import Footer from './Footer.svelte';
<\/script>

<main>
  <Header />

  <Introduction />

  <section>
    <h2>The Rise of Negativity</h2>
    <NegativeSongsChart />
    <EmotionChart />
  </section>

  <section>
    <h2>The Artist Landscape</h2>
    <ArtistScatterplot />
    <ArtistRadarChart />
  </section>

  <Conclusion />

  <Methodology />

  <Footer />
</main>

<style>
  main {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
  }

  section {
    margin-bottom: 40px;
  }

  h2 {
    font-size: 24px;
    margin-bottom: 20px;
  }
</style>`,code7a=`<script>
  import { onMount } from 'svelte';
  import { csv } from 'd3-fetch';
  import { scaleTime, scaleLinear } from 'd3-scale';
  import { line } from 'd3-shape';
  import { extent, rollups } from 'd3-array';
  import { timeFormat } from 'd3-time-format';

  let data = [];
  let width = 800;
  let height = 400;

  const margin = { top: 20, right: 30, bottom: 30, left: 40 };
  const chartWidth = width - margin.left - margin.right;
  const chartHeight = height - margin.top - margin.bottom;

  const formatDate = timeFormat('%Y');

  let xScale;
  let yScale;
  let chartLine;

  const processData = (data) => {
    const groupedData = rollups(
      data,
      (v) => v.length,
      (d) => d.chart_week.slice(0, 4),
      (d) => d.Sentiment
    );

    const transformedData = Array.from(groupedData, ([year, sentimentData]) => {
      const total = sentimentData.reduce((sum, [sentiment, count]) => sum + count, 0);
      const negativePercentage = (sentimentData.find(([sentiment]) => sentiment === 'Negative')?.[1] || 0) / total;
      return { year: new Date(year), negativePercentage };
    });

    return transformedData;
  };

  onMount(async () => {
    data = processData(await csv('assets/billboard.csv'));

    xScale = scaleTime()
      .domain(extent(data, (d) => d.year))
      .range([0, chartWidth]);

    yScale = scaleLinear()
      .domain([0, 1])
      .range([chartHeight, 0]);

    chartLine = line()
      .x((d) => xScale(d.year))
      .y((d) => yScale(d.negativePercentage));
  });
<\/script>

<div class="chart-container" bind:clientWidth={width}>
  <h3 class="chart-title">Percentage of Negative Songs Over Time</h3>
  <svg {width} {height} aria-labelledby="chartTitle chartDesc" role="img">
    <title id="chartTitle">Percentage of Negative Songs Over Time</title>
    <desc id="chartDesc">A line chart showing the percentage of negative songs in the Billboard Hot 100 top 10 from 1960 to 2020.</desc>
    <g transform="translate({margin.left}, {margin.top})">
      <path class="chart-line" d={chartLine(data)} />
      <g class="x-axis" transform="translate(0, {chartHeight})">
        {#each xScale.ticks(5) as tick}
          <g class="tick" transform="translate({xScale(tick)}, 0)">
            <line y2="6" stroke="currentColor" />
            <text dy="0.71em" y="9" text-anchor="middle">{formatDate(tick)}</text>
          </g>
        {/each}
      </g>
      <g class="y-axis">
        {#each yScale.ticks(5) as tick}
          <g class="tick" transform="translate(0, {yScale(tick)})">
            <line x2={chartWidth} stroke="currentColor" />
            <text x="-9" dy="0.32em" text-anchor="end">{tick * 100}%</text>
          </g>
        {/each}
      </g>
    </g>
  </svg>
</div>

<style>
  .chart-container {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
  }

  .chart-title {
    font-family: var(--font-sans);
    font-size: 20px;
    margin-bottom: 10px;
    text-align: center;
  }

  .chart-line {
    fill: none;
    stroke: var(--accent-color);
    stroke-width: 2;
  }

  .x-axis,
  .y-axis {
    font-family: var(--font-sans);
    font-size: 12px;
  }

  .tick line {
    stroke: var(--text-color);
    stroke-opacity: 0.2;
  }

  .tick text {
    fill: var(--text-color);
  }
</style>`;function get_each_context$1(b,w,C){const k=b.slice();return k[9]=w[C].type,k[10]=w[C].value,k}function get_each_context_1$1(b,w,C){const k=b.slice();return k[9]=w[C].type,k[10]=w[C].value,k}function create_if_block$1(b){let w,C,k,T,S=b[4]?"▼":"▶",M,$,E,I,D,A,P,L,R,N,H,z,j,W=b[5]?"▼":"▶",U,O,q,V,Y,te,J,B,ee,K,Q=ensure_array_like(b[0]),Z=[];for(let X=0;X<Q.length;X+=1)Z[X]=create_each_block_1$1(get_each_context_1$1(b,Q,X));let he=ensure_array_like(b[1]),le=[];for(let X=0;X<he.length;X+=1)le[X]=create_each_block$1(get_each_context$1(b,he,X));return{c(){w=element("details"),C=element("summary"),k=element("p"),T=element("span"),M=text$1(S),$=space(),E=element("img"),D=element("span"),A=text$1(b[2]),P=space(),L=element("div");for(let X=0;X<Z.length;X+=1)Z[X].c();R=space(),N=element("details"),H=element("summary"),z=element("p"),j=element("span"),U=text$1(W),O=space(),q=element("img"),Y=element("span"),te=text$1(b[3]),J=space(),B=element("div");for(let X=0;X<le.length;X+=1)le[X].c();this.h()},l(X){w=claim_element(X,"DETAILS",{class:!0});var oe=children(w);C=claim_element(oe,"SUMMARY",{class:!0});var ae=children(C);k=claim_element(ae,"P",{class:!0});var pe=children(k);T=claim_element(pe,"SPAN",{class:!0});var _e=children(T);M=claim_text(_e,S),_e.forEach(detach),$=claim_space(pe),E=claim_element(pe,"IMG",{src:!0,alt:!0,class:!0}),D=claim_element(pe,"SPAN",{});var ke=children(D);A=claim_text(ke,b[2]),ke.forEach(detach),pe.forEach(detach),ae.forEach(detach),P=claim_space(oe),L=claim_element(oe,"DIV",{class:!0});var we=children(L);for(let ne=0;ne<Z.length;ne+=1)Z[ne].l(we);we.forEach(detach),oe.forEach(detach),R=claim_space(X),N=claim_element(X,"DETAILS",{class:!0});var Ce=children(N);H=claim_element(Ce,"SUMMARY",{class:!0});var Te=children(H);z=claim_element(Te,"P",{class:!0});var fe=children(z);j=claim_element(fe,"SPAN",{class:!0});var Se=children(j);U=claim_text(Se,W),Se.forEach(detach),O=claim_space(fe),q=claim_element(fe,"IMG",{src:!0,alt:!0,class:!0}),Y=claim_element(fe,"SPAN",{});var G=children(Y);te=claim_text(G,b[3]),G.forEach(detach),fe.forEach(detach),Te.forEach(detach),J=claim_space(Ce),B=claim_element(Ce,"DIV",{class:!0});var ie=children(B);for(let ne=0;ne<le.length;ne+=1)le[ne].l(ie);ie.forEach(detach),Ce.forEach(detach),this.h()},h(){attr(T,"class","arrow svelte-gg6qa"),src_url_equal(E.src,I="assets/pudding-black.png")||attr(E,"src",I),attr(E,"alt","pudding logo"),attr(E,"class","svelte-gg6qa"),attr(k,"class","svelte-gg6qa"),attr(C,"class","svelte-gg6qa"),attr(L,"class","inner svelte-gg6qa"),attr(w,"class","prompt svelte-gg6qa"),attr(j,"class","arrow svelte-gg6qa"),src_url_equal(q.src,V="assets/claude.png")||attr(q,"src",V),attr(q,"alt","claude logo"),attr(q,"class","svelte-gg6qa"),attr(z,"class","svelte-gg6qa"),attr(H,"class","svelte-gg6qa"),attr(B,"class","inner svelte-gg6qa"),attr(N,"class","response svelte-gg6qa")},m(X,oe){insert_hydration(X,w,oe),append_hydration(w,C),append_hydration(C,k),append_hydration(k,T),append_hydration(T,M),append_hydration(k,$),append_hydration(k,E),append_hydration(k,D),append_hydration(D,A),append_hydration(w,P),append_hydration(w,L);for(let ae=0;ae<Z.length;ae+=1)Z[ae]&&Z[ae].m(L,null);w.open=b[4],insert_hydration(X,R,oe),insert_hydration(X,N,oe),append_hydration(N,H),append_hydration(H,z),append_hydration(z,j),append_hydration(j,U),append_hydration(z,O),append_hydration(z,q),append_hydration(z,Y),append_hydration(Y,te),append_hydration(N,J),append_hydration(N,B);for(let ae=0;ae<le.length;ae+=1)le[ae]&&le[ae].m(B,null);N.open=b[5],ee||(K=[listen(w,"toggle",b[7]),listen(N,"toggle",b[8])],ee=!0)},p(X,oe){if(oe&16&&S!==(S=X[4]?"▼":"▶")&&set_data(M,S),oe&4&&set_data(A,X[2]),oe&1){Q=ensure_array_like(X[0]);let ae;for(ae=0;ae<Q.length;ae+=1){const pe=get_each_context_1$1(X,Q,ae);Z[ae]?Z[ae].p(pe,oe):(Z[ae]=create_each_block_1$1(pe),Z[ae].c(),Z[ae].m(L,null))}for(;ae<Z.length;ae+=1)Z[ae].d(1);Z.length=Q.length}if(oe&16&&(w.open=X[4]),oe&32&&W!==(W=X[5]?"▼":"▶")&&set_data(U,W),oe&8&&set_data(te,X[3]),oe&66){he=ensure_array_like(X[1]);let ae;for(ae=0;ae<he.length;ae+=1){const pe=get_each_context$1(X,he,ae);le[ae]?le[ae].p(pe,oe):(le[ae]=create_each_block$1(pe),le[ae].c(),le[ae].m(B,null))}for(;ae<le.length;ae+=1)le[ae].d(1);le.length=he.length}oe&32&&(N.open=X[5])},d(X){X&&(detach(w),detach(R),detach(N)),destroy_each(Z,X),destroy_each(le,X),ee=!1,run_all(K)}}}function create_each_block_1$1(b){let w,C,k=t$1(b[10])+"";return{c(){w=element("div"),C=new HtmlTagHydration(!1),this.h()},l(T){w=claim_element(T,"DIV",{});var S=children(w);C=claim_html_tag(S,!1),S.forEach(detach),this.h()},h(){C.a=null},m(T,S){insert_hydration(T,w,S),C.m(k,w)},p(T,S){S&1&&k!==(k=t$1(T[10])+"")&&C.p(k)},d(T){T&&detach(w)}}}function create_if_block_2$1(b){let w,C,k=b[6][`code${b[10]}`]+"",T;return{c(){w=element("pre"),C=element("code"),T=text$1(k),this.h()},l(S){w=claim_element(S,"PRE",{class:!0});var M=children(w);C=claim_element(M,"CODE",{});var $=children(C);T=claim_text($,k),$.forEach(detach),M.forEach(detach),this.h()},h(){attr(w,"class","svelte-gg6qa")},m(S,M){insert_hydration(S,w,M),append_hydration(w,C),append_hydration(C,T)},p(S,M){M&2&&k!==(k=S[6][`code${S[10]}`]+"")&&set_data(T,k)},d(S){S&&detach(w)}}}function create_if_block_1$1(b){let w,C,k=t$1(b[10])+"";return{c(){w=element("div"),C=new HtmlTagHydration(!1),this.h()},l(T){w=claim_element(T,"DIV",{});var S=children(w);C=claim_html_tag(S,!1),S.forEach(detach),this.h()},h(){C.a=null},m(T,S){insert_hydration(T,w,S),C.m(k,w)},p(T,S){S&2&&k!==(k=t$1(T[10])+"")&&C.p(k)},d(T){T&&detach(w)}}}function create_each_block$1(b){let w;function C(S,M){if(S[9]==="text")return create_if_block_1$1;if(S[9]==="code")return create_if_block_2$1}let k=C(b),T=k&&k(b);return{c(){T&&T.c(),w=empty()},l(S){T&&T.l(S),w=empty()},m(S,M){T&&T.m(S,M),insert_hydration(S,w,M)},p(S,M){k===(k=C(S))&&T?T.p(S,M):(T&&T.d(1),T=k&&k(S),T&&(T.c(),T.m(w.parentNode,w)))},d(S){S&&detach(w),T&&T.d(S)}}}function create_fragment$4(b){let w,C=b[0]&&b[1]&&create_if_block$1(b);return{c(){w=element("div"),C&&C.c(),this.h()},l(k){w=claim_element(k,"DIV",{class:!0});var T=children(w);C&&C.l(T),T.forEach(detach),this.h()},h(){attr(w,"class","chat svelte-gg6qa")},m(k,T){insert_hydration(k,w,T),C&&C.m(w,null)},p(k,[T]){k[0]&&k[1]?C?C.p(k,T):(C=create_if_block$1(k),C.c(),C.m(w,null)):C&&(C.d(1),C=null)},i:noop,o:noop,d(k){k&&detach(w),C&&C.d()}}}function instance$3(b,w,C){let{prompt:k}=w,{response:T}=w,{promptSummary:S}=w,{responseSummary:M}=w,$,E;const I={code1a,code1b,code1c,code2a,code3a,code3b,code4a,code5a,code6a,code7a};function D(){$=this.open,C(4,$)}function A(){E=this.open,C(5,E)}return b.$$set=P=>{"prompt"in P&&C(0,k=P.prompt),"response"in P&&C(1,T=P.response),"promptSummary"in P&&C(2,S=P.promptSummary),"responseSummary"in P&&C(3,M=P.responseSummary)},[k,T,S,M,$,E,I,D,A]}class Chat extends SvelteComponent{constructor(w){super(),init(this,w,instance$3,create_fragment$4,safe_not_equal,{prompt:0,response:1,promptSummary:2,responseSummary:3})}}function create_fragment$3(b){let w,C,k,T;return{c(){w=element("header"),C=element("div"),k=element("a"),T=new HtmlTagHydration(!1),this.h()},l(S){w=claim_element(S,"HEADER",{});var M=children(w);C=claim_element(M,"DIV",{class:!0});var $=children(C);k=claim_element($,"A",{href:!0,"aria-label":!0,target:!0,class:!0});var E=children(k);T=claim_html_tag(E,!1),E.forEach(detach),$.forEach(detach),M.forEach(detach),this.h()},h(){T.a=null,attr(k,"href","https://pudding.cool"),attr(k,"aria-label","The Pudding"),attr(k,"target","_self"),attr(k,"class","svelte-1euzoyo"),attr(C,"class","wordmark svelte-1euzoyo")},m(S,M){insert_hydration(S,w,M),append_hydration(w,C),append_hydration(C,k),T.m(wordmark,k)},p:noop,i:noop,o:noop,d(S){S&&detach(w)}}}class Header extends SvelteComponent{constructor(w){super(),init(this,w,null,create_fragment$3,safe_not_equal,{})}}const title="We had an AI attempt to make a data-driven story like we do at The Pudding",description="We review and grade what it created.",hed="Can an AI make a data-driven, visual story?",byline="By <a href=https://pudding.cool/author/russell-samora/ target=_blank>Russell Samora</a> and <a href=https://pudding.cool/author/michelle-mcghee/ target=_blank>Michelle McGhee</a>",process=[{type:"text",value:"With LLMs (henceforth, <strong>AI</strong>) in the spotlight – blowing minds, raking in venture capital, and prompting existential crises – we at The Pudding were curious: Will this make our jobs obsolete? How scared should we be that someone else could replicate what we do without the time, training, and expertise we have?"},{type:"text",value:"Basically, <strong>can an AI make a data-driven, visual story, much like we do at <a href=https://pudding.cool target=_blank rel=noreferrer>The Pudding?</a></strong> What does it actually “do,” and how well does it do it?"},{type:"text",value:"So, we tried replacing ourselves with <a href=https://claude.ai/ target=_blank rel=noreferrer>Claude</a>, an AI from Anthropic."},{type:"cta",value:"<strong>Want to see what the AI made?</strong> Switch between the process and the AI’s story at any point by tapping the button on the side of the screen or using the arrow keys."},{type:"text",value:"We broke the process of creating a story made at <a href=https://pudding.cool target=_blank rel=noreferrer>The Pudding</a> into four steps, and guided the AI through them."},{type:"ol",value:[{id:"idea",text:"Idea Generation"},{id:"data",text:"Data Collection & Analysis"},{id:"storyboard",text:"Storyboarding & Prototyping"},{id:"development",text:"Development & Writing"}]},{type:"text",value:"Before we started, we created a set of rules and guidelines for our interactions with the AI:"},{type:"ul",value:["For each task, we prompted it until it either completed the task or failed repeatedly, at which point, we modified the task to make it surmountable.","Other than guiding it through the process and adjusting when necessary, we attempted to intervene as little as possible. We tried to mimic how a data-storytelling-inclined layperson would interact with the AI, refraining from using as much of our data visualization or journalism expertise as possible."]},{type:"text",value:"We started the process in parallel with both ChatGPT (4) and Claude (3 Opus), but we were more satisfied with Claude’s work. So partway through, we decided to focus solely on that."},{type:"text",value:"Before we started on the story, we introduced ourselves and gave Claude some background reading on The Pudding’s process."},{type:"video",value:{src:"claude.mp4",caption:"Screen recording of our first interaction with the Claude chat interface."}},{type:"text",value:"Here’s some of the background reading we gave Claude on how to make a story fit for The Pudding."},{type:"ul",value:["<a href=https://pudding.cool/process/how-to-make-dope-shit-part-3/ target=_blank>How to Make Dope Shit (Part 3: Storytelling)</a>","<a href=https://pudding.cool/process/pivot-continue-down/ target=_blank>Continue, Pivot, or Put it Down</a>","<a href=https://pudding.cool/process/pitching-gendered-descriptions/ target=_blank>The Courage (and Disappointment) of Pitching a Visual Essay</a>"]},{type:"heading",value:{id:"idea",text:"Part 1: Idea Generation"}},{type:"text",value:"After Claude learned about what makes a good story on The Pudding, we asked it to generate several idea pitches. Here’s what it came up with:"},{type:"editorNote",value:"Each chat below is a TLDR recap of each prompt/response we created that distilled the core point of the exchange. You can expand each chat to see the actual prompt and response (which can be quite lengthy)."},{type:"chat",value:{promptSummary:"Can you give us some story ideas?",responseSummary:"Here are ideas about female characters in video games, fast fashion environmental impact, and emotional content in songs across decades.",prompt:[{type:"text",value:"This is our pitch form. Please give us 3 ideas, and answer all questions for each one. Be as specific as possible and if you’re using data, make sure you have an idea of how you will obtain and analyze the data."},{type:"text",value:"Pitch form questions:"},{type:"text",value:"1. What is your story about? The elevator pitch, if you will."},{type:"text",value:"2. Can you summarize in one sentence the single point you’re making? Think of it as a snappy headline or distillation. It should not be in the form of a question."},{type:"text",value:"3. Why is it exciting to you? Why do *you* want to tell this story?"},{type:"text",value:"4. What makes this story interesting and sets it apart from others?"},{type:"text",value:"5. What will be the “aha” moment for the audience, or the surprising element?"},{type:"text",value:"6. Provide one or more feasible options for data sources."},{type:"text",value:"7. Describe some ideas for the core visuals of this piece. What do you imagine the piece will look like? What’s the first thing you’d draw on a whiteboard?"}],response:[{type:"text",value:"Pitch 1:"},{type:"text",value:"1. This story explores how the portrayal of female characters in video games has evolved over the past four decades, from the damsel-in-distress trope to more empowered and diverse representations."},{type:"text",value:"2. The representation of women in video games has become more diverse and less stereotypical since the 1980s, but there's still room for improvement."},{type:"text",value:"3. As an avid gamer, I've witnessed the evolution of female characters in games firsthand. I believe this story is important to highlight the progress made and the work that still needs to be done to create more inclusive and representative gaming experiences."},{type:"text",value:"4. While there have been discussions about women in video games, this story stands out by taking a data-driven approach to analyze the changes in female character representation across various game genres and decades."},{type:"text",value:'5. The "aha" moment will be revealing the specific trends and shifts in female character portrayal, such as the increase in playable female protagonists and the decrease in overly sexualized character designs.'},{type:"text",value:"6. Data sources:"},{type:"text",value:"* Video game database APIs (e.g., IGDB, GiantBomb) to gather game information, character details, and release dates."},{type:"text",value:"* Crowdsourced data collection and analysis by a diverse group of gamers to assess character attributes, roles, and portrayals."},{type:"text",value:"* Existing research and studies on gender representation in video games."},{type:"text",value:"7. Core visuals:"},{type:"text",value:"* A timeline showcasing the evolution of iconic female video game characters across decades."},{type:"text",value:"* Interactive charts displaying the change in proportion of female protagonists, supporting characters, and antagonists over time."},{type:"text",value:"* Side-by-side comparisons of female character designs from different gaming eras to highlight visual changes."},{type:"text",value:`* A "report card" grading the video game industry's progress in female representation across various metrics.`},{type:"text",value:"Pitch 2:"},{type:"text",value:"1. This story investigates the environmental impact of popular fast fashion brands by analyzing their carbon footprint, water usage, and waste generation."},{type:"text",value:"2. Fast fashion brands have a significant and often underreported environmental impact, contributing to climate change, water scarcity, and pollution."},{type:"text",value:"3. As someone who cares deeply about sustainability and conscious consumerism, I want to shed light on the hidden environmental costs of our fashion choices and encourage readers to make more informed decisions."},{type:"text",value:"4. This story goes beyond the surface-level discussions of fast fashion's environmental impact by quantifying and comparing the specific environmental metrics of major brands, making the abstract concept more tangible and relatable."},{type:"text",value:'5. The "aha" moment will be revealing which fast fashion brands have the largest environmental footprints and illustrating the scale of their impact in terms of carbon emissions, water consumption, and waste generation.'},{type:"text",value:"6. Data sources:"},{type:"text",value:"* Sustainability reports and disclosures from fast fashion brands."},{type:"text",value:"* Environmental databases (e.g., Carbon Disclosure Project, Water Footprint Network) for industry benchmarks and comparative analysis."},{type:"text",value:"* Research studies and articles on the environmental impact of the fashion industry."},{type:"text",value:"7. Core visuals:"},{type:"text",value:"* An interactive map displaying the global environmental impact of fast fashion brands, with options to filter by brand, country, and impact metric."},{type:"text",value:'* A "closet of shame" visual showcasing the environmental cost of a typical fast fashion wardrobe, itemized by clothing type.'},{type:"text",value:"* Comparative charts ranking fast fashion brands based on their carbon footprint, water usage, and waste generation."},{type:"text",value:"* An interactive calculator allowing readers to input their fast fashion purchases and see their personal environmental impact."},{type:"text",value:"Pitch 3:"},{type:"text",value:"1. This story analyzes the lyrics of popular songs across genres and decades to reveal trends in the emotional content and sentiment expressed in music."},{type:"text",value:"2. The emotional landscape of popular music has shifted over time, with certain feelings and sentiments becoming more or less prevalent across different genres and eras."},{type:"text",value:"3. As a music enthusiast and data nerd, I'm fascinated by the idea of using data analysis to uncover hidden patterns and trends in the music we love, and I believe this story will provide a fresh perspective on the emotional resonance of popular songs."},{type:"text",value:"4. While there have been studies on the musical and lyrical content of songs, this story stands out by focusing specifically on the emotional aspects and sentiment analysis of lyrics across a wide range of genres and time periods."},{type:"text",value:'5. The "aha" moment will be uncovering surprising trends in the emotional content of popular music, such as the rise or decline of certain sentiments over time, or the differences in emotional expression between various genres.'},{type:"text",value:"6. Data sources:"},{type:"text",value:"* Lyrics databases (e.g., Genius, AZLyrics, LyricFind) to gather song lyrics for analysis."},{type:"text",value:"* Music metadata APIs (e.g., Spotify API, Last.fm API) for song and artist information, genre classifications, and popularity metrics."},{type:"text",value:"* Natural language processing libraries and sentiment analysis tools (e.g., NLTK, TextBlob, VADER) for analyzing the emotional content of lyrics."},{type:"text",value:"7. Core visuals:"},{type:"text",value:'* An interactive "mood map" of popular music genres, displaying the prevalent emotions and sentiments associated with each genre.'},{type:"text",value:"* A timeline showcasing the evolution of emotional content in popular music over the decades, with options to filter by genre and sentiment."},{type:"text",value:"* Sentiment-driven playlists, where users can input an emotion and receive a curated playlist of songs that strongly express that sentiment."},{type:"text",value:'* A "lyrical mirror" visualization that allows users to input their own text (e.g., a personal story or diary entry) and see which popular songs have lyrics that resonate emotionally with their input.'}]}},{type:"text",value:"Off to a solid start! It’s clear the model trained on our data, as several of the ideas feel like something we’d do or have thought about doing. Our favorite idea was the one about emotions in music, so we moved forward with that. We asked Claude to get a bit more specific with its plan for the data."},{type:"chat",value:{promptSummary:"We like the song idea, can you get more specific?",responseSummary:"Sure, let me clarify some details for you.",prompt:[{type:"text",value:"We like #3 - the idea about lyrics of popular songs and their emotional content, but some of the details and specificity are unclear to us. The biggest two questions we have are: What is the unit of emotional analysis? In other words, on the song overall, specific phrases, etc. Are there any constraints in mind? Like what is the corpus of songs, timeframe, genres, etc."}],response:[{type:"text",value:"Great question! Let me clarify the details and address your concerns regarding the unit of emotional analysis and the constraints of the song corpus."},{type:"text",value:"Unit of emotional analysis:"},{type:"text",value:"The primary unit of analysis will be the overall emotional sentiment of each song, determined by analyzing the lyrics in their entirety. This approach will give us a high-level understanding of the dominant emotions and sentiments expressed in the song."},{type:"text",value:"However, to add depth to the analysis, we can also explore the emotional trajectory within each song by breaking down the lyrics into smaller units, such as verses and choruses. This will allow us to identify any significant emotional shifts or contrasts within a song, providing a more nuanced understanding of the emotional narrative."},{type:"text",value:"Additionally, we can highlight specific phrases or lines that strongly contribute to the overall emotional sentiment of the song, serving as representative examples of the dominant emotions expressed."},{type:"text",value:"Corpus constraints:"},{type:"text",value:"To create a manageable and focused dataset, we'll establish the following constraints for the song corpus:"},{type:"Timeframe",value:"We'll focus on songs released between 1960 and 2020, covering six decades of popular music. This timeframe encompasses significant musical eras and cultural shifts, allowing us to analyze trends and changes in emotional expression over time."},{type:"Genres",value:"We'll include songs from five main genres: pop, rock, hip-hop/rap, country, and R&B/soul. These genres have been consistently popular and influential throughout the chosen timeframe. By comparing emotional trends across genres, we can identify any genre-specific patterns or differences in emotional expression."},{type:"Popularity",value:"To ensure the songs analyzed are representative of mainstream music consumption, we'll focus on songs that have achieved significant popularity. This can be determined by factors such as chart performance (e.g., Billboard Hot 100), sales figures, and streaming numbers. We can establish a popularity threshold (e.g., songs that reached the top 50 on the charts) to filter the dataset."},{type:"Language",value:"To maintain consistency in the emotional analysis and interpretation, we'll limit the corpus to songs with English lyrics. This constraint will help avoid potential challenges related to translation and cultural differences in emotional expression."},{type:"text",value:"By applying these constraints, we'll create a focused and relevant dataset that allows for meaningful comparisons and trend analysis across time, genres, and popularity levels."},{type:"text",value:"Data sources:"},{type:"text",value:"To build the song corpus based on the above constraints, we can leverage the following data sources:"},{type:"text",value:"Lyrics databases (e.g., Genius, AZLyrics, LyricFind) to gather song lyrics for analysis."},{type:"text",value:"Music metadata APIs (e.g., Spotify API, Last.fm API) for song and artist information, genre classifications, and popularity metrics."},{type:"text",value:"Chart data archives (e.g., Billboard, Official Charts Company) to determine song popularity and chart performance."},{type:"text",value:"By combining these data sources and applying the specified constraints, we can create a comprehensive and focused dataset for analyzing the emotional content of popular songs over the past six decades."},{type:"text",value:"Please let me know if you have any further questions or if you'd like me to elaborate on any aspect of the emotional analysis or corpus constraints."}]}},{type:"reaction",value:{summary:"Ideas are fine, but not impressive. We can work with this.",grade:"C+",text:[{type:"text",value:"These ideas are… fine. Some don’t seem feasible data-wise, but they all could probably be made into solid data stories. We were impressed by how Claude was able to drill down and be specific about the scope of the project when prompted."},{type:"text",value:"But ultimately, these ideas just weren’t that interesting to us. Many of them are just topics and not concrete stories with a point or clear question that someone would find surprising or interesting. It feels like Claude struggles to generate what a human would find intriguing."}]}},{type:"heading",value:{id:"data",text:"Part 2: Data collection and analysis"}},{type:"text",value:"Once we have an idea, we typically begin by collecting the data needed to tell the story and seeing what it says. For Claude, that meant scraping lyrics from <a href=https://www.billboard.com/charts/ target=_blank>Billboard top 100 hits</a> from <a href=https://genius.com/ target=_blank>Genius.com</a>. We asked it to write Python scripts which we ran for it (since this model was not able to run them internally)."},{type:"chat",value:{promptSummary:"The project has been greenlighted. Write some scripts to collect the data.",responseSummary:"Absolutely! Here is a bunch of code.",prompt:[{type:"text",value:"Great. We are going to greenlight this project and move to the data collection phase. One note: let’s just start analysis at the song level, if we want to go deeper we will have that data to explore."},{type:"text",value:"It sounds like we need three phases of data collection; get the top 100 billboard songs from each year, get the lyrics for each song, then analyze the sentiment for each song. Can you write some scripts that we can run for you to collect that data from the web?"}],response:[{type:"text",value:"Absolutely! I'll break down the data collection process into three phases and provide you with scripts for each phase. Please note that these scripts are written in Python and require certain libraries to be installed. Phase 1: Retrieve the top 100 Billboard songs for each year This script uses the Billboard API to fetch the top 100 songs for each year from 1960 to 2020. You'll need to sign up for a Billboard API account and replace 'YOUR_API_KEY' with your actual API key."},{type:"code",value:"1a"},{type:"text",value:"Phase 2: Retrieve the lyrics for each song"},{type:"text",value:"This script reads the Billboard top 100 songs from the CSV file generated in Phase 1 and uses the Genius API to fetch the lyrics for each song. You'll need to sign up for a Genius API account and replace 'YOUR_ACCESS_TOKEN' with your actual access token."},{type:"code",value:"1b"},{type:"text",value:"Phase 3: Analyze the sentiment for each song"},{type:"text",value:"This script reads the song lyrics from the CSV file generated in Phase 2 and uses the NLTK library to perform sentiment analysis on each song's lyrics. You'll need to have NLTK installed and download the required resources (vader_lexicon)."},{type:"code",value:"1c"},{type:"text",value:"These scripts should help you collect the necessary data for your analysis. Please make sure to replace the placeholders ('YOUR_API_KEY' and 'YOUR_ACCESS_TOKEN') with your actual API credentials."},{type:"Note",value:"The scripts assume you have the required libraries (requests, csv, bs4, nltk) installed. You can install them using pip if needed."},{type:"text",value:"Let me know if you have any further questions or if you need assistance with running the scripts!"}]}},{type:"text",value:"When things went well, Claude could write scripts much faster than we would be able to. Within minutes, we had a script running that was scraping lyrics from Genius.com."},{type:"figure",value:{src:"scraping.jpg",alt:"Our Python notebook where we ran Claude’s scripts. This script takes Billboard Top 100 songs and fetches their lyrics from the Genius.com API.",caption:"Our Python notebook where we ran Claude’s scripts. This script takes Billboard Top 100 songs and fetches their lyrics from the Genius.com API."}},{type:"text",value:"Like any coder, Claude made some mistakes along the way. For example: some songs have multiple artists, like “Cold Heart” by <code>Dua Lipa & Elton John</code>. Instead of parsing the names and storing them in a list, it just stored this artist as <code>Dua Lipa & Elton John</code>. Not the end of the world, but it means that if we were to count songs by <code>Elton John</code>, this song would not be included in the count."},{type:"text",value:"When its mistakes were larger, we directed it (as lightly as we could) to fix things."},{type:"chat",value:{promptSummary:"We noticed some things, can you make some adjustments?",responseSummary:"Absolutely! Here are some rationalizations and code updates.",prompt:[{type:"text",value:`we noticed that the billboard data is way bigger than we expected - it has 343,000 rows since it is each week a song that appeared on the top 100 chart. this means 2 things; 1 - songs are repeated, and 2 - we probably don't care about any song that appeared on the top 100, but the most popular ones. using the variables in the csv, can you come up with a plan to filter the "popular" ones and explain your reasoning? here are the definitions of the column names:`},{type:"text",value:"chart\\_week: the week on the list current\\_week: rank current week title: title of song performer: name of artist last\\_week: rank previous week peak\\_pos: lowest rank position ever on top 100 chart wks\\_on\\_chart: number of weeks on top 100 chart"}],response:[{type:"text",value:`Absolutely! I understand your concern about the size of the dataset and the presence of repeated songs. To filter the "popular" songs and reduce the dataset to a more manageable size, we can use a combination of the available variables in the CSV file. Here's a plan to filter the popular songs, along with the reasoning behind each step:`},{type:"text",value:"Keep only the songs that reached a peak position of 10 or higher:"},{type:"Reason",value:"Songs that reached the top 10 positions on the Billboard Hot 100 chart can be considered highly popular and successful. By filtering based on the peak_pos column and keeping only the songs with a value of 10 or less, we can focus on the most popular songs."},{type:"text",value:"Remove duplicate songs based on the song title and artist:"},{type:"Reason",value:"Since the dataset contains weekly chart data, the same song may appear multiple times if it remains on the chart for several weeks. To avoid analyzing the same song multiple times, we can remove duplicate entries based on the combination of the title and performer columns. This ensures that each song is considered only once, regardless of how many weeks it appeared on the chart."},{type:"text",value:"(Optional) Filter songs based on the number of weeks on the chart:"},{type:"Reason",value:"If you want to further refine the dataset and focus on songs with longer-term popularity, you can consider filtering based on the wks_on_chart column. For example, you might want to keep only the songs that appeared on the chart for at least 10 weeks, indicating a sustained level of popularity."},{type:"text",value:"Here's an updated Python script that incorporates these filtering steps:"},{type:"code",value:"2a"},{type:"text",value:"In this updated script, we first filter the songs based on the `peak_pos` column, keeping only the songs that reached a peak position of 10 or higher. We then use a set called `processed_songs` to keep track of the songs that have already been processed, avoiding duplicates based on the combination of the song title and artist."},{type:"text",value:"If you want to further filter the songs based on the number of weeks on the chart, you can add an additional condition in the if statement, such as `int(row['wks_on_chart']) >= 10`, to keep only the songs that appeared on the chart for at least 10 weeks."},{type:"text",value:"By applying these filtering steps, you can focus on the most popular and successful songs, reducing the dataset to a more manageable size while still capturing the essence of the Billboard Hot 100 chart."},{type:"text",value:"Let me know if you have any further questions or if you need assistance with running the updated script!"}]}},{type:"text",value:"When its code produced an error, we just gave it the error message and asked it to try again."},{type:"chat",value:{promptSummary:"Uh oh, here is an error message.",responseSummary:"I apologize Here is the corrected script.",prompt:[{type:"text",value:"\\--------------------------------------------------------------------------- TypeError Traceback (most recent call last) Input In \\[5\\], in <module> 53 nrc = NRCLex(cleaned\\_lyrics) 55 # Perform emotion analysis using the NRC Emotion Lexicon ---> 56 emotion\\_scores = nrc.raw\\_emotion\\_scores() 57 sentiment = 'Positive' if emotion\\_scores\\['positive'\\] >= emotion\\_scores\\['negative'\\] else 'Negative' 58 emotions = {emotion: score for emotion, score in emotion\\_scores.items() if emotion not in \\['positive', 'negative'\\]} TypeError: 'dict' object is not callable"}],response:[{type:"text",value:"I apologize for the confusion. It seems that there was an error in the way I used the `raw_emotion_scores` method. According to the `nrclex` library documentation, `raw_emotion_scores` is a dictionary attribute, not a callable method."},{type:"text",value:"Here's the corrected script:"},{type:"code",value:"3a"},{type:"text",value:"The correction is in the following line:"},{type:"code",value:"3b"},{type:"text",value:"Instead of calling `raw_emotion_scores()` as a method, we directly access `raw_emotion_scores` as an attribute of the `nrc` object."},{type:"text",value:"This should resolve the `TypeError` and allow the script to run without issues."},{type:"text",value:"Apologies for any inconvenience caused. Please let me know if you have any further questions or if you encounter any other problems while running the script!"}]}},{type:"text",value:"In the end, it produced a data file containing songs and their quantified emotional profiles. Then, we asked it to do some basic analysis."},{type:"figure",value:{src:"results.jpg",alt:"Screenshot of Claude’s cleaned data file",caption:"The first 5 rows of Claude’s cleaned data file"}},{type:"chat",value:{promptSummary:"Here is a sample of the data, analyze it.",responseSummary:"Analyzed. Check out this summary of my findings.",prompt:[{type:"text",value:"Here is a sample (not all years, about half). Can you analyze it and give us a summary of your findings and insights. Propose what you think would be the most interesting central focus of the story based on the analysis."}],response:[{type:"text",value:"I've analyzed the data you provided, which includes Billboard Hot 100 song rankings along with sentiment analysis scores for each song from 1994 to 2021. Here's a summary of my findings and insights:"},{type:"text",value:"Sentiment Trends Over Time:"},{type:"text",value:"* Overall, positive sentiment songs seem to consistently outweigh negative sentiment songs across the decades. In an average year, around 60-70% of the top charting songs express predominantly positive emotions."},{type:"text",value:"* However, there appears to be a very slight trend towards an increasing proportion of negative sentiment songs in more recent years, especially since the mid-2010s. Songs with darker, more pessimistic themes may be becoming marginally more common in popular music."},{type:"text",value:"* Joy is consistently the most prevalent emotion across the years, followed by trust and anticipation. Sadness is the most common negative emotion, followed by fear. Anger and disgust are less frequent."},{type:"text",value:"* Some years buck the positive trend more notably, with 2018 having an almost 50-50 split between positive and negative songs. Interestingly, 2020 - the first pandemic year - actually skewed more positive than the couple years prior."},{type:"text",value:"Genre & Artist Insights:"},{type:"text",value:"* Hip hop songs, especially from male artists, appear to express negative emotions more frequently compared to pop and other genres. Anger, disgust, and fear are notably more prevalent."},{type:"text",value:"* In contrast, dance-pop songs, often from female artists, tend to be more consistently positive, emphasizing joy, anticipation and trust."},{type:"text",value:"* Some artists are outliers for their genre - Eminem's rap has a lot more negativity and anger compared to Drake's, for example. And Billie Eilish's pop is more negative than the norm for that genre."},{type:"text",value:"* Collaborations, especially those that cross genres like rap/pop, can produce interesting mixes of positive and negative emotions in a single song."},{type:"text",value:"Most Positive & Negative Songs:"},{type:"text",value:`* The most purely joyful hit seems to be Pharrell's "Happy" in 2014`},{type:"text",value:`* Other highly positive, joyful hits include Beyonce's "Love On Top", Justin Timberlake's "Can't Stop the Feeling", and Taylor Swift's "Shake It Off"`},{type:"text",value:`* The most emotionally negative #1 hit is Lil Nas X's "Panini" in 2019`},{type:"text",value:`* Other strongly negative charting songs include Lil Baby's "Emotionally Scarred", Lil Wayne's "Mona Lisa", and Kanye West's "Jail"`},{type:"text",value:"Potential Focus for a Data Story:"},{type:"text",value:"Based on this analysis, I think an engaging angle would be to explore the steady rise of negative sentiment in popular music over the last decade. The story could investigate questions like:"},{type:"text",value:"* What factors are contributing to the increase of darker, sadder, angrier songs topping the charts? Is it a reflection of the national mood and cultural events?"},{type:"text",value:"* How does the trend correlate with the rise of Hip hop/Rap and decline of bubblier Pop music as the dominant commercial genres?"},{type:"text",value:"* Are there certain artists leading the way in making pessimistic and angsty themes more mainstream?"},{type:"text",value:"* How have major historical events like the pandemic and social justice movements affectd the emotional tone of the hit songs those years?"},{type:"text",value:"* Interactive elements could allow readers to explore the most positive and negative hit songs each year, the emotional profiles of their favorite artists over time, or the sentiment fingerprints of different genres."},{type:"text",value:"The story would aim to provide data-driven insights into how and why the emotional landscape of popular music is slowly shifting, and what that says about our culture's emotional state as a whole. Mixing data analysis with some music criticism and cultural commentary could make for an intriguing piece."},{type:"text",value:"Let me know if you would like me to elaborate on any part of this analysis or the story idea! I'm happy to brainstorm further."}]}},{type:"reaction",value:{grade:"B-",summary:"A too-literal but adequate data analyst",text:[{type:"text",value:"This is pretty impressive. A huge part of coding is learning to be very thorough and specific with how you give a computer instructions. Here, we simply asked Claude to Tk task, which is super vague, and it nailed it almost immediately. During this stage, we often found ourselves giddy with the fun of working with such a powerful tool."},{type:"text",value:"Which didn’t always last for long. It felt like if it ever got derailed, it was hard to get it back on track. We’ve found that when we’re interacting with AI with our technical background, we’re able to help it solve bugs quickly by helping it identify the issue. But since we acted as if we had no coding skills for this story, and simply reported errors and asked Claude to fix them, it often felt inefficient, and sometimes Claude couldn't recover."},{type:"text",value:"For complex coding tasks, we feel like these tools are only as good as their operator. You might get lucky and get flawless code, but chances are, it will falter eventually and struggle to correct itself. Even when its scripts worked, a closer look revealed some sloppiness. At every step, Claude made a few mistakes or oversights. For example: sometimes a song has multiple artists listed, but it did nothing to consider that."},{type:"text",value:"Unless prompted, Claude couldn’t notice or account for issues like this. It does the bare minimum, strictly following its prompts, for better or worse (or, “garbage in, garbage out”). The effort it takes us to fix things like this and produce pieces that cover all the bases can often take days on end. It involves questioning results, identifying edge cases, doing more research, and repeating. This stage of our projects is often the most deceptively time-consuming. So while Claude was faster, it is “satisfied” with whatever it generates. Critical thinking still falls to the user. On top of Claude’s “complacency,” its mistakes and oversights trickled down and became issues later on."}]}},{type:"heading",value:{id:"storyboard",text:"Part 3: Storyboard and prototyping"}},{type:"text",value:"Next, we asked Claude to create a storyboard – an outline of the story’s main points including ideas for charts and visuals."},{type:"chat",value:{promptSummary:"Can you write a storyboard?",responseSummary:"No problem, here is my outline.",prompt:[{type:"text",value:"Thank you for the insights. We are ready to move on to the storyboard stage of this project. Here is what we are looking for: an outline of the actual story. There should be discrete sections that explain what a summary of the copy will be about, what data and chart types you might use. Keep in mind The Pudding's approach to storytelling, it should be a tight narrative with visuals that support the thesis. We will give you a round of feedback after your first draft before moving into production. Keep in mind you haven't seen the full data, but assume your insights (or at least their general concepts) will be interesting on the full data."}],response:[{type:"text",value:"Understood! Here's my proposed outline for the data story on the rise of negative sentiment in popular music:"},{type:"Title",value:'"The Sadness of Song: How Pop Music is Turning to the Dark Side"'},{type:"text",value:"Section 1: Introduction"},{type:"text",value:"* Open with an anecdote about a recent hit song with surprisingly dark/negative lyrics"},{type:"text",value:"* Thesis: Over the past decade, there has been a steady rise in the proportion of emotionally negative songs topping the Billboard charts, reflecting a broader shift in popular music's emotional landscape."},{type:"text",value:"* Preview key insights: the trend correlates with Hip hop's chart dominance, turbulent cultural events, and certain artists' influence"},{type:"Visuals",value:""},{type:"text",value:"* Engaging cover art juxtaposing positive and negative imagery/lyrics from hit songs"},{type:"text",value:"Section 2: The Sentiment Trendline"},{type:"text",value:"* Analyze the year-over-year trend of the percentage of negative songs in the Hot 100"},{type:"text",value:"* Highlight the inflection point in the mid-2010s when negative songs started rising notably"},{type:"text",value:'* Compare the average "emotional profile" of a top 10 hit now vs. 10 and 20 years ago'},{type:"Visuals",value:""},{type:"text",value:"* Line chart of % of negative songs per year, with key shifts annotated"},{type:"text",value:"* Small multiples of stacked bar charts showing relative proportions of 8 emotions in top hits for selected years"},{type:"text",value:"Section 3: Genre and the Rise of Rap"},{type:"text",value:"* Explore how the trend coincides with Hip hop/Rap overtaking Pop as the most popular genre"},{type:"text",value:"* Compare the average emotional fingerprints of Hit Rap vs Pop songs"},{type:"text",value:"* Discuss how Hip hop tends to express more negative emotions like anger, fear, and disgust"},{type:"Visuals",value:""},{type:"text",value:"* Dumbbell chart comparing average emotion scores of Rap vs. Pop"},{type:"text",value:"* Area chart showing rise of Rap and decline of Pop in Hot 100 over time, overlaid with % negative line"},{type:"text",value:"Section 4: Cultural Shifts and Emotional Trends"},{type:"text",value:"* Discuss how music often reflects its cultural moment, and how the last decade has been particularly turbulent"},{type:"text",value:"* Analyze how specific events like the pandemic, Trump presidency, BLM protests etc. affected the charts those years"},{type:"text",value:'* Explore the paradox of why dance-focused "escapist" hits also rose alongside negative songs in hard times'},{type:"Visuals",value:""},{type:"text",value:"* Annotated timeline of major cultural events and the sentiment of the #1 song that week"},{type:"text",value:"* Side-by-side bar charts of emotions in hit songs in key years (e.g. 2019 vs 2020)"},{type:"text",value:"Section 5: Artist Case Studies"},{type:"text",value:"* Dive into a few influential artists known for darker themes, like Billie Eilish and Juice WRLD"},{type:"text",value:"* Trace how their emotional style has evolved over their career"},{type:"text",value:"* Contrast them with artists still known for more consistently positive music, like BTS or Ariana Grande"},{type:"Visuals",value:""},{type:"text",value:`* "Sentiment sparklines" showing the emotional journey of selected artists' hits over time`},{type:"text",value:"* Radar charts comparing the overall emotional profile of positive vs. negative-leaning artists"},{type:"text",value:"Section 6: The Future of Feelings in Music"},{type:"text",value:"* Recap the key insights and consider what the trend says about our cultural psyche"},{type:"text",value:"* Ponder whether negative themes will continue to rise or if a positive pushback is due"},{type:"text",value:"* End on a hopeful note about music's power to capture and change emotions"},{type:"Visuals",value:""},{type:"text",value:"* Grid of images/lyrics of upcoming artists whose style may shape the next sentimental shift"},{type:"text",value:"Methodology Notes:"},{type:"text",value:"* Provide clarity on criteria for classifying a song as positive or negative"},{type:"text",value:"* Explain any key nuances or limitations in the sentiment analysis process"},{type:"text",value:"* Link to Github for full data and methodology details"},{type:"text",value:"Let me know your thoughts on this outline! I aimed to create a narrative that explores this intriguing trend from multiple angles, with a mix of data-driven insights and cultural commentary. The visuals are designed to allow readers to emotionally engage with the story while understanding the underlying data."}]}},{type:"chat",value:{promptSummary:"Here is some feedback, please integrate.",responseSummary:"Done and done.",prompt:[{type:"text",value:"this was great, please rewrite the storyboard that incorporates all these revisions. make sure to include when (and what) the interactive features are so we know what to expect when it comes to development."}],response:[{type:"Title",value:'"The Sadness of Song: How Pop Music is Turning to the Dark Side"'},{type:"text",value:"Section 1: Introduction"},{type:"text",value:"* Open with an anecdote about a recent hit song with surprisingly dark/negative lyrics"},{type:"text",value:"* Thesis: Over the past decade, there has been a steady rise in the proportion of emotionally negative songs topping the Billboard charts, reflecting a broader shift in popular music's emotional landscape."},{type:"text",value:"* Preview key insights: the trend correlates with certain genres and artists, and may reflect broader cultural shifts"},{type:"Visuals",value:""},{type:"text",value:"* Engaging cover art juxtaposing positive and negative imagery/lyrics from hit songs"},{type:"text",value:"Section 2: The Rise of Negativity"},{type:"text",value:"* Lead with the central visual: a line chart showing the rise of negative songs over time"},{type:"text",value:"* Annotate key inflection points and eras on the chart, highlighting the mid-2010s uptick"},{type:"text",value:"* Use small multiples of line charts to show how the prevalence of specific emotions (joy, sadness, anger, etc.) have shifted over decades"},{type:"text",value:"* Discuss how the trend coincides with the rise of Hip hop/Rap and the decline of bubblegum Pop"},{type:"Visuals",value:""},{type:"text",value:"* Interactive line chart of % of negative songs per year, with annotations"},{type:"text",value:"* Small multiple line charts of individual emotions over time"},{type:"Interactivity",value:""},{type:"text",value:"* Tooltips on the main line chart to show exact % values for each year"},{type:"text",value:"* Ability to toggle specific emotion lines on/off in the small multiples"},{type:"text",value:"Section 3: The Artist Landscape"},{type:"text",value:`* Introduce the concept of each artist's "emotional fingerprint" based on the avg sentiment of their hits`},{type:"text",value:"* Present a scatterplot showing all artists' positions on a positive-negative spectrum"},{type:"text",value:"* Allow users to filter the chart by genre, decade, and other key factors"},{type:"text",value:"* Implement a search function for users to find specific artists"},{type:"text",value:"* On hover, display the artist's name, image, and key stats (# of charting hits, most positive/negative song, etc.)"},{type:"text",value:"* Spotlight a few key artists known for contrasting styles, e.g. Billie Eilish vs. Ariana Grande"},{type:"text",value:"* Use radar charts to compare the full emotional profile of these spotlight artists"},{type:"Visuals",value:""},{type:"text",value:"* Interactive scatterplot of artists' average sentiment scores"},{type:"text",value:"* Radar charts comparing spotlight artists"},{type:"Interactivity",value:""},{type:"text",value:"* Scatterplot filters by genre, decade, etc."},{type:"text",value:"* Search function to find specific artists"},{type:"text",value:"* Tooltips with artist details on hover"},{type:"text",value:"* Radar chart of artist's emotional profile on click"},{type:"text",value:"Section 4: Conclusion"},{type:"text",value:"* Recap the key findings: pop music's emotional landscape is shifting, with negative songs on the rise"},{type:"text",value:"* Discuss potential cultural factors driving this shift, from social media to global events"},{type:"text",value:"* Ponder whether the trend will continue or if a positive pushback is brewing"},{type:"text",value:"* End on a thought-provoking note about music's power to reflect and shape our collective emotions"},{type:"Visuals",value:""},{type:"text",value:"* Engaging data art or illustration summarizing the emotional journey of popular music"},{type:"text",value:"Section 5: Methodology"},{type:"text",value:"* Detail the sentiment analysis process, including data source, scoring system, and any limitations"},{type:"text",value:"* Explain how songs and artists were classified as positive or negative"},{type:"text",value:"* Discuss any key data cleaning or processing steps"},{type:"text",value:"* Link to Github repo with full datasets and code"},{type:"Visuals",value:""},{type:"text",value:"* Clear explanatory diagrams of sentiment scoring and classification process"},{type:"text",value:"With this revised storyboard, I believe we have a clear and compelling narrative arc that will take readers on a journey through the data. The introduction sets up the thesis, the main body sections dive into the evidence from different angles, and the conclusion zooms back out to ponder the broader implications."},{type:"text",value:"The interactivity is strategically integrated to allow users to explore the data for themselves, while still being guided by the overarching narrative. The key interactive elements - the main trend line chart, the artist scatterplot, and the radar chart comparisons - each serve to enrich one of the central story points."},{type:"text",value:"Please let me know if this aligns with your vision for the piece, or if there are any other refinements you'd suggest. I'm excited to start bringing this story to life!"}]}},{type:"text",value:"We asked it to prototype the visual ideas to make sure they worked with the real data. Again, it wrote Python code to generate the charts which we ran by copy and pasting into a Jupyter Notebook."},{type:"chat",value:{promptSummary:"Ok, make a chart of negativity over time.",responseSummary:"Here is some code to generate that chart.",prompt:[{type:"text",value:'write a script to visualize "year-over-year trend of the percentage of negative songs in the Hot 100”'}],response:[{type:"text",value:"To visualize the year-over-year trend of the percentage of negative songs in the Hot 100, we can use the pandas library for data manipulation and the matplotlib library for creating the line chart. Here's a Python script to achieve this:"},{type:"code",value:"4a"},{type:"text",value:"This script does the following:"},{type:"text",value:"1. We assume the data is stored in a CSV file named 'billboard_data.csv'. You can replace this with the actual file path of your dataset."},{type:"text",value:"2. We read the data from the CSV file using `pd.read_csv()` and store it in a DataFrame called `data`."},{type:"text",value:"3. We convert the 'chart_week' column to datetime using `pd.to_datetime()` to extract the year later."},{type:"text",value:"4. We extract the year from the 'chart_week' column using `dt.year` and store it in a new column called 'year'."},{type:"text",value:"5. We group the data by 'year' and 'Sentiment' using `groupby()` and calculate the count of each sentiment for each year using `size()`. We then reshape the data using `unstack()` to have 'Negative' and 'Positive' as columns."},{type:"text",value:"6. We calculate the total number of songs for each year by summing the 'Negative' and 'Positive' columns and store it in a new column called 'total'."},{type:"text",value:"7. We calculate the percentage of negative songs for each year by dividing the 'Negative' column by the 'total' column and multiplying by 100. We store this in a new column called 'percent_negative'."},{type:"text",value:"8. We create a line chart using `plt.plot()`, with the year on the x-axis and the percentage of negative songs on the y-axis."},{type:"text",value:"9. We customize the chart by adding labels, a title, a grid, and rotating the x-tick labels for better readability."},{type:"text",value:"10. We add an annotation for a key shift or point of interest using `plt.annotate()`. You can customize this based on your specific data and insights."},{type:"text",value:"11. Finally, we display the chart using `plt.show()`."},{type:"text",value:"Make sure to replace 'billboard_data.csv' with the actual file path of your dataset. Also, ensure that you have the necessary libraries installed (`pandas` and `matplotlib`)."}]}},{type:"figure",value:{src:"4a.jpg",alt:"A line chart that shows the rise in negative sentiment in Billboard songs over decades",caption:"Screenshot of a chart generated from Claude’s Python script"}},{type:"text",value:"Here are some other charts it generated, all within seconds. Some made more sense than others."},{type:"figure",value:{src:"multiples.jpg",alt:"8 line charts, one for each emotion, showing the average emotion score of top 10 hits by year",caption:"Small multiples showing the average amount of each emotion in top 10 hits over time"}},{type:"figure",value:{src:"radar.jpg",alt:"4 radar charts showing the spread of emotions for BTS, Lizzo, Billie Eilish, and Julice WRLD",caption:"Claude chose these 4 artists based on its understanding of their music"}},{type:"figure",value:{src:"sparklines.jpg",alt:"4 charts that are broken and don’t show anything",caption:"Here, we fed it the exact language it included in the storyboard (“emotional sparklines”) and it generated this…"}},{type:"reaction",value:{summary:"A surprisingly solid (high-level) storyteller and time-saver.",grade:"B+",text:[{type:"text",value:"Claude produced a solid imitation of what we might have done (even including little details like a methods section and a Glink to an imaginary GitHub repo of data). We often start stories with a specific example to illustrate a single data point (like starting with the song “Issues” by Julia Michaels), and then pull back to view the entire data."},{type:"text",value:"Using Claude to prototype charts is pretty amazing, reducing sometimes hour-long tasks (for us) to seconds. We have continued to use AI tools for this step, since it’s such a quick and easy way to try things out."},{type:"text",value:"The outline it produced felt like it only contained safe choices, like a B student, nothing that blew our minds, but serviceable. Yet again we saw that Claude produced things quickly, but the big difference from our process is the lack of iteration. It’s just trying to get things done, and theoretically as a statistical model trained on so much, it should produce good things on the first go. But as humans, we would typically iterate a lot on this step, and that’s what takes things from good to great."}]}},{type:"heading",value:{id:"development",text:"Part 4: Development and writing"}},{type:"text",value:"We asked Claude to transform the outline into a fully fleshed out draft. For the visuals, we moved into The Pudding’s development environment, Svelte, and asked it to structure the codebase, deciding which components to make and how they were nested. We gave it some of the predefined standards in our codebase (e.g., font stack), then we asked it to write the entirety of each component, making the charts that it had described and prototyped."},{type:"chat",value:{promptSummary:"Start writing some Svelte components.",responseSummary:"Here is some code for the main component.",prompt:[{type:"text",value:"lets go through each one, just one a time. give us the full component code for the first one, and we will test it out."}],response:[{type:"text",value:"Sure! Let's start with the first component, App.svelte. This will serve as the main entry point for your application and will import and render the other components. Here's the suggested code for App.svelte:"},{type:"code",value:"6a"},{type:"text",value:"In this component:"},{type:"text",value:"1. We import all the necessary child components at the top of the script section."},{type:"text",value:"2. In the HTML section, we render the imported components in the desired order within the `main` element."},{type:"text",value:'3. We wrap the `NegativeSongsChart` and `EmotionChart` components inside a `section` element with a heading "The Rise of Negativity".'},{type:"text",value:'4. Similarly, we wrap the `ArtistScatterplot` and `ArtistRadarChart` components inside another `section` element with a heading "The Artist Landscape".'},{type:"text",value:"5. In the `style` section, we define some basic styles for the `main` element, `section` elements, and `h2` headings to provide a consistent layout and spacing."},{type:"text",value:"Remember, this is just a starting point, and you can further customize the styles and layout to match your desired design."},{type:"text",value:"To test this component, make sure you have the necessary child components created (even if they are empty) and then import the App component into your main Svelte application file."},{type:"text",value:"Let me know if you have any questions or if you would like to proceed with the next component!"}]}},{type:"text",value:"Tk sometimes it worked pretty well, it’s good at isolated tasks."},{type:"chat",value:{promptSummary:"Okay, create the first line chart.",responseSummary:"Certainly, here’s the responsive and accessible code.",prompt:[{type:"text",value:'we are ready to make NegativeSongsChart.svelte. for this and the remaining components, be sure to consider responsiveness and mobile devices, and best accessibility practices for charts. the data file is located at "assets/billboard.csv". the columns "chart\\_week" (e.g., "2019-04-20") and "Sentiment" ("Positive" or "Negative").'}],response:[{type:"text",value:"Certainly! Here's the code for the NegativeSongsChart.svelte component, taking into account responsiveness, mobile devices, and accessibility best practices:"},{type:"code",value:"7a"},{type:"text",value:"In this component:"},{type:"text",value:"1. We import the necessary dependencies from D3.js for data fetching, scales, line generator, and date formatting."},{type:"text",value:"2. We define the chart dimensions and margins."},{type:"text",value:'3. We fetch the data from the "assets/billboard.csv" file using the `csv` function from D3.js.'},{type:"text",value:"4. We process the data in the `processData` function, grouping it by year and sentiment, and calculating the percentage of negative songs for each year."},{type:"text",value:"5. In the `onMount` lifecycle function, we set up the scales and line generator based on the processed data."},{type:"text",value:"6. We create an SVG element with the chart dimensions and accessibility attributes."},{type:"text",value:"7. We render the chart line using the `d` attribute and the line generator."},{type:"text",value:"8. We render the x-axis and y-axis with ticks and labels."},{type:"text",value:"9. We use the `bind:clientWidth` directive to make the chart responsive to the container width."},{type:"text",value:"10. We apply styles to the chart elements using CSS variables for colors and fonts."},{type:"text",value:"To ensure responsiveness, we bind the `clientWidth` of the chart container to the `width` variable, so the chart will adjust its width based on the container size. The SVG dimensions are set using the `width` and `height` attributes."},{type:"text",value:"For accessibility, we include a `title` and `desc` element within the SVG to provide a meaningful title and description of the chart. The SVG also has the `aria-labelledby` attribute pointing to these elements."},{type:"text",value:'Make sure to have the "assets/billboard.csv" file in the specified location with the required columns.'},{type:"text",value:"Let me know if you have any further questions or if you would like to proceed with the next component!"}]}},{type:"text",value:"But with more complex charts, like the scatterplot of artists, it struggled much more. We went back and forth a lot before it had something passable."},{type:"figure-grid",value:{figures:[{src:"scatterplot1.jpg",alt:"",caption:"Claude’s first attempt at the bubble chart."},{src:"scatterplot2.jpg",alt:"",caption:"“it looks like the bubbles go from the top left to the bottom right, which is not what i expected”"},{src:"scatterplot3.jpg",alt:"",caption:"“i should be clearer, a swarm chart uses d3 force to prevent overlap”"},{src:"scatterplot4.jpg",alt:"",caption:"“it looks like the red and green colors are spread throughout, i expect positive to be at the top, and negative to be at bottom”"},{src:"scatterplot5.jpg",alt:"",caption:"“it looks like negative/positive is horizontal, not vertical”"},{src:"scatterplot6.jpg",alt:"",caption:"“very close - except the circles also go from left to right, they should all try to be in the center on the x axis”"}]}},{type:"text",value:"Tk reflecting a little on the issues"},{type:"text",value:"It described two images for us to generate, but since that is not a feature of Claude, we outsourced the work to…ChatGPT. The hero image/art was meant to be an illustration, but the final image was supposed to be more of a chart. Despite its thorough description, ChatGPT ended up creating more of an abstract art piece than a functional chart."},{type:"chat",value:{promptSummary:"Can you generate the hero art you mentioned?",responseSummary:"Actually no… but here is a description of it.",prompt:[{type:"text",value:'for the intro, you told us before you wanted "Engaging cover art juxtaposing positive and negative imagery/lyrics from hit songs" - could you supply that please (in code to put into Introduction.svelte)'}],response:[{type:"text",value:"I apologize for the confusion, but as an AI language model, I am not able to generate, produce, edit, manipulate or create images. My capabilities are limited to processing and analyzing text. However, I can provide you with a description or suggestion of what the cover art could potentially look like, which you can then use as a reference to create the actual image yourself or with the help of a graphic designer. For the cover art, you could consider creating a split image, with one half representing positive imagery and the other half representing negative imagery. On the positive side, you could depict elements like bright colors, smiling faces, uplifting lyrics or symbols associated with joy and happiness. On the negative side, you could use darker colors, sad or angry faces, lyrics that express sadness, heartbreak or despair. To tie it together, you could have a hit song lyric that starts on the positive side and continues onto the negative side, showing the contrast and juxtaposition. Once you have the image created, you can include it in your Introduction.svelte file using an <img> tag with the appropriate source path."}]}},{type:"figure",value:{src:"gpt_images.jpg",alt:"4 Chat GPT-generated images showing an abstract rendering of music, emotions, and time.",caption:"4 early drafts of images of the “emotional journey.”"}},{type:"chat",value:{promptSummary:"And how about a description of the data art of the “emotional journey.”",responseSummary:"Here is an extremely thorough description for you.",prompt:[{type:"text",value:'you mentioned "Engaging data art or illustration summarizing the emotional journey of popular music" in the conclusion. provide a description of that please'}],response:[{type:"text",value:`Certainly! Here's a description for a static image that illustrates the emotional journey of popular music: Title: "The Emotional Evolution of Popular Music" Description: The image should be a visually striking and thought-provoking representation of how the emotional landscape of popular music has changed over time. The main focus of the image will be a winding path or road that represents the journey of popular music from the 1960s to the present day. The path should start on the left side of the image, symbolizing the beginning of the timeline, and move towards the right, signifying the progression of time. The path can be divided into different sections or decades, each marked with a distinctive style or design element to indicate the predominant emotions of that era. As the path progresses, the colors and visual elements surrounding it should gradually shift from bright, vibrant, and cheerful hues (representing the more positive and upbeat emotions of earlier decades) to darker, more somber, and introspective tones (reflecting the increase in negative emotions in recent years). This transition can be achieved through the use of color gradients, shading, and carefully placed visual elements. Along the path, include iconic symbols or silhouettes that represent significant milestones, genres, or artists that have shaped the emotional trajectory of popular music. For example, you could include a silhouette of The Beatles to represent the optimism and innocence of the 1960s, or a grungy guitar to symbolize the angst and rebellion of the 1990s. To further emphasize the emotional shift, you can incorporate small charts or graphs at key points along the path. These charts could show the changing proportions of different emotions over time, such as a pie chart that illustrates the growing slice of sadness and diminishing slice of joy. The background of the image should complement the emotional journey depicted by the path. You can use abstract shapes, textures, or patterns that evoke the mood and atmosphere of each era. For example, the background could start with soft, pastel colors and flowing lines to represent the gentler, more innocent tunes of the early decades, and gradually become more chaotic, fragmented, and dark to reflect the increasing complexity and heaviness of modern pop music. Include a legend or key that explains the significance of the different colors, symbols, and charts used in the image. This will help viewers understand the emotional coding and interpret the journey more easily. Overall, the static image should tell a compelling visual story of how popular music has evolved emotionally over the decades. It should invite viewers to reflect on the changing nature of popular culture and the ways in which music reflects and shapes our collective emotional experiences. The image can be created using various graphic design tools such as Adobe Illustrator, Photoshop, or even hand-drawn and digitized for a more organic feel. By including this evocative static image in the conclusion, you will leave a lasting impact on your readers and reinforce the key insights and takeaways from your data-driven story.`}]}},{type:"reaction",value:{grade:"D",summary:"Really helpful in isolated work, but can’t handle a full project or overcome complex tasks.",text:[{type:"text",value:"Claude definitely didn’t write code in the most structurally sound or beautiful way possible, but it mostly got the job done. When it encountered bugs, we would feed it the error message along with a description of what we were seeing. When things got complex, this ended up feeling like whack-a-mole – it would fix one thing, but break something else as a result. We refrained from giving it advice as fellow programmers (like pinpointing the source of the bug), and just repeatedly fed it error messages until it produced something workable."}]}},{type:"report-card",value:{title:"Claude’s Report Card",sections:[{id:"idea",text:"Idea Generation",grade:"C+"},{id:"data",text:"Data Collection & Analysis",grade:"B-"},{id:"storyboard",text:"Storyboarding & Prototyping",grade:"B+"},{id:"development",text:"Development & Writing",grade:"D"},{id:"overall",text:"Overall",grade:"C+"}]}},{type:"heading",value:{id:"idea",text:"Conclusion"}},{type:"text",value:"Do we feel replaceable? In short, no. When we look at what Claude produced, we don’t think it looks anything like a real piece we’d make at The Pudding piece. But… would a casual reader notice the difference? We hope so, but that might be overly optimistic."},{type:"text",value:"It’s sort of like comparing a woodworking artisan’s table to one from IKEA. The artisans invest immense time and effort into their high-quality pieces, IKEA produces things quickly and cheaply, and most people probably can’t tell the difference (or don’t care). Which is kind of sad for us artisans. With AI, we can expect a rise in superficially appealing but low-quality content. But that doesn’t mean there’s no place for craftsmanship. We still find meaning in the bespoke, at doing all the little things right, and in creating things that feel like they have a real person at the other end of it. And we can only hope that others do too."},{type:"text",value:"We probably won’t be using Claude to write more articles, but we’ll certainly be using it and other AI tools as part of our toolkit. As Ezra Klein pointed out in a recent <a href=https://www.nytimes.com/2024/04/23/opinion/ezra-klein-podcast-adam-moss.html target=_blank>episode</a>, we see ourselves more as editors of the small tasks we outsource to AI. We know what the output should look like, and how to adjust things as needed. Here are a few examples of ways we already use AI to assist us:"},{type:"ul",value:["Writing a helper script to process images","Generating a handful of options for a headline","Asking Claude to be an idea sparring partner","Identifying names in text documents","Getting out of a Git jam"]}],copy={title,description,hed,byline,process},t="http://www.w3.org/2000/svg";class e{constructor(w){this.seed=w}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}function s(b,w,C,k,T){return{type:"path",ops:c(b,w,C,k,T)}}function i(b,w,C){const k=(b||[]).length;if(k>2){const T=[];for(let S=0;S<k-1;S++)T.push(...c(b[S][0],b[S][1],b[S+1][0],b[S+1][1],C));return w&&T.push(...c(b[k-1][0],b[k-1][1],b[0][0],b[0][1],C)),{type:"path",ops:T}}return k===2?s(b[0][0],b[0][1],b[1][0],b[1][1],C):{type:"path",ops:[]}}function n(b,w,C,k,T){return function(S,M){return i(S,!0,M)}([[b,w],[b+C,w],[b+C,w+k],[b,w+k]],T)}function o(b,w,C,k,T){return function(S,M,$,E){const[I,D]=l(E.increment,S,M,E.rx,E.ry,1,E.increment*h(.1,h(.4,1,$),$),$);let A=f(I,null,$);if(!$.disableMultiStroke){const[P]=l(E.increment,S,M,E.rx,E.ry,1.5,0,$),L=f(P,null,$);A=A.concat(L)}return{estimatedPoints:D,opset:{type:"path",ops:A}}}(b,w,T,function(S,M,$){const E=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(S/2,2)+Math.pow(M/2,2))/2)),I=Math.max($.curveStepCount,$.curveStepCount/Math.sqrt(200)*E),D=2*Math.PI/I;let A=Math.abs(S/2),P=Math.abs(M/2);const L=1-$.curveFitting;return A+=a(A*L,$),P+=a(P*L,$),{increment:D,rx:A,ry:P}}(C,k,T)).opset}function r(b){return b.randomizer||(b.randomizer=new e(b.seed||0)),b.randomizer.next()}function h(b,w,C,k=1){return C.roughness*k*(r(C)*(w-b)+b)}function a(b,w,C=1){return h(-b,b,w,C)}function c(b,w,C,k,T,S=!1){const M=S?T.disableMultiStrokeFill:T.disableMultiStroke,$=u(b,w,C,k,T,!0,!1);if(M)return $;const E=u(b,w,C,k,T,!0,!0);return $.concat(E)}function u(b,w,C,k,T,S,M){const $=Math.pow(b-C,2)+Math.pow(w-k,2),E=Math.sqrt($);let I=1;I=E<200?1:E>500?.4:-.0016668*E+1.233334;let D=T.maxRandomnessOffset||0;D*D*100>$&&(D=E/10);const A=D/2,P=.2+.2*r(T);let L=T.bowing*T.maxRandomnessOffset*(k-w)/200,R=T.bowing*T.maxRandomnessOffset*(b-C)/200;L=a(L,T,I),R=a(R,T,I);const N=[],H=()=>a(A,T,I),z=()=>a(D,T,I);return M?N.push({op:"move",data:[b+H(),w+H()]}):N.push({op:"move",data:[b+a(D,T,I),w+a(D,T,I)]}),M?N.push({op:"bcurveTo",data:[L+b+(C-b)*P+H(),R+w+(k-w)*P+H(),L+b+2*(C-b)*P+H(),R+w+2*(k-w)*P+H(),C+H(),k+H()]}):N.push({op:"bcurveTo",data:[L+b+(C-b)*P+z(),R+w+(k-w)*P+z(),L+b+2*(C-b)*P+z(),R+w+2*(k-w)*P+z(),C+z(),k+z()]}),N}function f(b,w,C){const k=b.length,T=[];if(k>3){const S=[],M=1-C.curveTightness;T.push({op:"move",data:[b[1][0],b[1][1]]});for(let $=1;$+2<k;$++){const E=b[$];S[0]=[E[0],E[1]],S[1]=[E[0]+(M*b[$+1][0]-M*b[$-1][0])/6,E[1]+(M*b[$+1][1]-M*b[$-1][1])/6],S[2]=[b[$+1][0]+(M*b[$][0]-M*b[$+2][0])/6,b[$+1][1]+(M*b[$][1]-M*b[$+2][1])/6],S[3]=[b[$+1][0],b[$+1][1]],T.push({op:"bcurveTo",data:[S[1][0],S[1][1],S[2][0],S[2][1],S[3][0],S[3][1]]})}}else k===3?(T.push({op:"move",data:[b[1][0],b[1][1]]}),T.push({op:"bcurveTo",data:[b[1][0],b[1][1],b[2][0],b[2][1],b[2][0],b[2][1]]})):k===2&&T.push(...c(b[0][0],b[0][1],b[1][0],b[1][1],C));return T}function l(b,w,C,k,T,S,M,$){const E=[],I=[],D=a(.5,$)-Math.PI/2;I.push([a(S,$)+w+.9*k*Math.cos(D-b),a(S,$)+C+.9*T*Math.sin(D-b)]);for(let A=D;A<2*Math.PI+D-.01;A+=b){const P=[a(S,$)+w+k*Math.cos(A),a(S,$)+C+T*Math.sin(A)];E.push(P),I.push(P)}return I.push([a(S,$)+w+k*Math.cos(D+2*Math.PI+.5*M),a(S,$)+C+T*Math.sin(D+2*Math.PI+.5*M)]),I.push([a(S,$)+w+.98*k*Math.cos(D+M),a(S,$)+C+.98*T*Math.sin(D+M)]),I.push([a(S,$)+w+.9*k*Math.cos(D+.5*M),a(S,$)+C+.9*T*Math.sin(D+.5*M)]),[I,E]}function g(b,w){return{maxRandomnessOffset:2,roughness:b==="highlight"?3:1.5,bowing:1,stroke:"#000",strokeWidth:1.5,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,combineNestedSvgPaths:!1,disableMultiStroke:b!=="double",disableMultiStrokeFill:!1,seed:w}}function d(b,w,C,k,T,S){const M=[];let $=C.strokeWidth||2;const E=function(L){const R=L.padding;if(R||R===0){if(typeof R=="number")return[R,R,R,R];if(Array.isArray(R)){const N=R;if(N.length)switch(N.length){case 4:return[...N];case 1:return[N[0],N[0],N[0],N[0]];case 2:return[...N,...N];case 3:return[...N,N[1]];default:return[N[0],N[1],N[2],N[3]]}}}return[5,5,5,5]}(C),I=C.animate===void 0||!!C.animate,D=C.iterations||2,A=C.rtl?1:0,P=g("single",S);switch(C.type){case"underline":{const L=w.y+w.h+E[2];for(let R=A;R<D+A;R++)R%2?M.push(s(w.x+w.w,L,w.x,L,P)):M.push(s(w.x,L,w.x+w.w,L,P));break}case"strike-through":{const L=w.y+w.h/2;for(let R=A;R<D+A;R++)R%2?M.push(s(w.x+w.w,L,w.x,L,P)):M.push(s(w.x,L,w.x+w.w,L,P));break}case"box":{const L=w.x-E[3],R=w.y-E[0],N=w.w+(E[1]+E[3]),H=w.h+(E[0]+E[2]);for(let z=0;z<D;z++)M.push(n(L,R,N,H,P));break}case"bracket":{const L=Array.isArray(C.brackets)?C.brackets:C.brackets?[C.brackets]:["right"],R=w.x-2*E[3],N=w.x+w.w+2*E[1],H=w.y-2*E[0],z=w.y+w.h+2*E[2];for(const j of L){let W;switch(j){case"bottom":W=[[R,w.y+w.h],[R,z],[N,z],[N,w.y+w.h]];break;case"top":W=[[R,w.y],[R,H],[N,H],[N,w.y]];break;case"left":W=[[w.x,H],[R,H],[R,z],[w.x,z]];break;case"right":W=[[w.x+w.w,H],[N,H],[N,z],[w.x+w.w,z]]}W&&M.push(i(W,!1,P))}break}case"crossed-off":{const L=w.x,R=w.y,N=L+w.w,H=R+w.h;for(let z=A;z<D+A;z++)z%2?M.push(s(N,H,L,R,P)):M.push(s(L,R,N,H,P));for(let z=A;z<D+A;z++)z%2?M.push(s(L,H,N,R,P)):M.push(s(N,R,L,H,P));break}case"circle":{const L=g("double",S),R=w.w+(E[1]+E[3]),N=w.h+(E[0]+E[2]),H=w.x-E[3]+R/2,z=w.y-E[0]+N/2,j=Math.floor(D/2),W=D-2*j;for(let U=0;U<j;U++)M.push(o(H,z,R,N,L));for(let U=0;U<W;U++)M.push(o(H,z,R,N,P));break}case"highlight":{const L=g("highlight",S);$=.95*w.h;const R=w.y+w.h/2;for(let N=A;N<D+A;N++)N%2?M.push(s(w.x+w.w,R,w.x,R,L)):M.push(s(w.x,R,w.x+w.w,R,L));break}}if(M.length){const L=function(j){const W=[];for(const U of j){let O="";for(const q of U.ops){const V=q.data;switch(q.op){case"move":O.trim()&&W.push(O.trim()),O=`M${V[0]} ${V[1]} `;break;case"bcurveTo":O+=`C${V[0]} ${V[1]}, ${V[2]} ${V[3]}, ${V[4]} ${V[5]} `;break;case"lineTo":O+=`L${V[0]} ${V[1]} `}}O.trim()&&W.push(O.trim())}return W}(M),R=[],N=[];let H=0;const z=(j,W,U)=>j.setAttribute(W,U);for(const j of L){const W=document.createElementNS(t,"path");if(z(W,"d",j),z(W,"fill","none"),z(W,"stroke",C.color||"currentColor"),z(W,"stroke-width",""+$),I){const U=W.getTotalLength();R.push(U),H+=U}b.appendChild(W),N.push(W)}if(I){let j=0;for(let W=0;W<N.length;W++){const U=N[W],O=R[W],q=H?T*(O/H):0,V=k+j,Y=U.style;Y.strokeDashoffset=""+O,Y.strokeDasharray=""+O,Y.animation=`rough-notation-dash ${q}ms ease-out ${V}ms forwards`,j+=q}}}}class p{constructor(w,C){this._state="unattached",this._resizing=!1,this._seed=Math.floor(Math.random()*2**31),this._lastSizes=[],this._animationDelay=0,this._resizeListener=()=>{this._resizing||(this._resizing=!0,setTimeout(()=>{this._resizing=!1,this._state==="showing"&&this.haveRectsChanged()&&this.show()},400))},this._e=w,this._config=JSON.parse(JSON.stringify(C)),this.attach()}get animate(){return this._config.animate}set animate(w){this._config.animate=w}get animationDuration(){return this._config.animationDuration}set animationDuration(w){this._config.animationDuration=w}get iterations(){return this._config.iterations}set iterations(w){this._config.iterations=w}get color(){return this._config.color}set color(w){this._config.color!==w&&(this._config.color=w,this.refresh())}get strokeWidth(){return this._config.strokeWidth}set strokeWidth(w){this._config.strokeWidth!==w&&(this._config.strokeWidth=w,this.refresh())}get padding(){return this._config.padding}set padding(w){this._config.padding!==w&&(this._config.padding=w,this.refresh())}attach(){if(this._state==="unattached"&&this._e.parentElement){(function(){if(!window.__rno_kf_s){const T=window.__rno_kf_s=document.createElement("style");T.textContent="@keyframes rough-notation-dash { to { stroke-dashoffset: 0; } }",document.head.appendChild(T)}})();const w=this._svg=document.createElementNS(t,"svg");w.setAttribute("class","rough-annotation");const C=w.style;C.position="absolute",C.top="0",C.left="0",C.overflow="visible",C.pointerEvents="none",C.width="100px",C.height="100px";const k=this._config.type==="highlight";if(this._e.insertAdjacentElement(k?"beforebegin":"afterend",w),this._state="not-showing",k){const T=window.getComputedStyle(this._e).position;(!T||T==="static")&&(this._e.style.position="relative")}this.attachListeners()}}detachListeners(){window.removeEventListener("resize",this._resizeListener),this._ro&&this._ro.unobserve(this._e)}attachListeners(){this.detachListeners(),window.addEventListener("resize",this._resizeListener,{passive:!0}),!this._ro&&"ResizeObserver"in window&&(this._ro=new window.ResizeObserver(w=>{for(const C of w)C.contentRect&&this._resizeListener()})),this._ro&&this._ro.observe(this._e)}haveRectsChanged(){if(this._lastSizes.length){const w=this.rects();if(w.length!==this._lastSizes.length)return!0;for(let C=0;C<w.length;C++)if(!this.isSameRect(w[C],this._lastSizes[C]))return!0}return!1}isSameRect(w,C){const k=(T,S)=>Math.round(T)===Math.round(S);return k(w.x,C.x)&&k(w.y,C.y)&&k(w.w,C.w)&&k(w.h,C.h)}isShowing(){return this._state!=="not-showing"}refresh(){this.isShowing()&&!this.pendingRefresh&&(this.pendingRefresh=Promise.resolve().then(()=>{this.isShowing()&&this.show(),delete this.pendingRefresh}))}show(){switch(this._state){case"unattached":break;case"showing":this.hide(),this._svg&&this.render(this._svg,!0);break;case"not-showing":this.attach(),this._svg&&this.render(this._svg,!1)}}hide(){if(this._svg)for(;this._svg.lastChild;)this._svg.removeChild(this._svg.lastChild);this._state="not-showing"}remove(){this._svg&&this._svg.parentElement&&this._svg.parentElement.removeChild(this._svg),this._svg=void 0,this._state="unattached",this.detachListeners()}render(w,C){let k=this._config;C&&(k=JSON.parse(JSON.stringify(this._config)),k.animate=!1);const T=this.rects();let S=0;T.forEach(E=>S+=E.w);const M=k.animationDuration||800;let $=0;for(let E=0;E<T.length;E++){const I=M*(T[E].w/S);d(w,T[E],k,$+this._animationDelay,I,this._seed),$+=I}this._lastSizes=T,this._state="showing"}rects(){const w=[];if(this._svg)if(this._config.multiline){const C=this._e.getClientRects();for(let k=0;k<C.length;k++)w.push(this.svgRect(this._svg,C[k]))}else w.push(this.svgRect(this._svg,this._e.getBoundingClientRect()));return w}svgRect(w,C){const k=w.getBoundingClientRect(),T=C;return{x:(T.x||T.left)-(k.x||k.left),y:(T.y||T.top)-(k.y||k.top),w:T.width,h:T.height}}}function _(b,w){return new p(b,w)}function get_each_context(b,w,C){const k=b.slice();return k[7]=w[C].type,k[8]=w[C].value,k}function get_each_context_5(b,w,C){const k=b.slice();return k[23]=w[C].id,k[24]=w[C].text,k[25]=w[C].grade,k}function get_each_context_4(b,w,C){const k=b.slice();return k[8]=w[C].value,k}function get_each_context_3(b,w,C){const k=b.slice();return k[16]=w[C].src,k[17]=w[C].alt,k[18]=w[C].caption,k}function get_each_context_2(b,w,C){const k=b.slice();return k[11]=w[C],k}function get_each_context_1(b,w,C){const k=b.slice();return k[11]=w[C],k}function create_if_block_12(b){let w,C,k="Editor’s Note:",T,S;return{c(){w=element("p"),C=element("strong"),C.textContent=k,T=space(),S=text$1(b[8]),this.h()},l(M){w=claim_element(M,"P",{class:!0});var $=children(w);C=claim_element($,"STRONG",{"data-svelte-h":!0}),get_svelte_dataset(C)!=="svelte-e023vj"&&(C.textContent=k),T=claim_space($),S=claim_text($,b[8]),$.forEach(detach),this.h()},h(){attr(w,"class","note svelte-1rs27zp")},m(M,$){insert_hydration(M,w,$),append_hydration(w,C),append_hydration(w,T),append_hydration(w,S)},p:noop,i:noop,o:noop,d(M){M&&detach(w)}}}function create_if_block_11(b){let w,C,k=`<source src="assets/${b[8].src}" type="video/mp4"/>
						Your browser does not support the video tag.`,T,S,M,$=b[8].caption+"",E,I;return{c(){w=element("figure"),C=element("video"),C.innerHTML=k,T=space(),S=element("figcaption"),M=element("small"),E=text$1($),I=space(),this.h()},l(D){w=claim_element(D,"FIGURE",{class:!0});var A=children(w);C=claim_element(A,"VIDEO",{preload:!0,class:!0,"data-svelte-h":!0}),get_svelte_dataset(C)!=="svelte-oj6ujv"&&(C.innerHTML=k),T=claim_space(A),S=claim_element(A,"FIGCAPTION",{class:!0});var P=children(S);M=claim_element(P,"SMALL",{});var L=children(M);E=claim_text(L,$),L.forEach(detach),P.forEach(detach),I=claim_space(A),A.forEach(detach),this.h()},h(){attr(C,"preload",""),C.autoplay="true",C.loop=!0,C.muted=!0,attr(C,"class","svelte-1rs27zp"),attr(S,"class","svelte-1rs27zp"),attr(w,"class","svelte-1rs27zp")},m(D,A){insert_hydration(D,w,A),append_hydration(w,C),append_hydration(w,T),append_hydration(w,S),append_hydration(S,M),append_hydration(M,E),append_hydration(w,I)},p:noop,i:noop,o:noop,d(D){D&&detach(w)}}}function create_if_block_9(b){let w,C,k,T=b[8].title+"",S,M,$,E,I,D,A=ensure_array_like(b[8].sections),P=[];for(let L=0;L<A.length;L+=1)P[L]=create_each_block_5(get_each_context_5(b,A,L));return{c(){w=element("div"),C=element("h2"),k=element("strong"),S=text$1(T),M=space(),$=element("table");for(let L=0;L<P.length;L+=1)P[L].c();E=space(),this.h()},l(L){w=claim_element(L,"DIV",{class:!0});var R=children(w);C=claim_element(R,"H2",{class:!0});var N=children(C);k=claim_element(N,"STRONG",{});var H=children(k);S=claim_text(H,T),H.forEach(detach),N.forEach(detach),M=claim_space(R),$=claim_element(R,"TABLE",{class:!0});var z=children($);for(let j=0;j<P.length;j+=1)P[j].l(z);z.forEach(detach),E=claim_space(R),R.forEach(detach),this.h()},h(){attr(C,"class","svelte-1rs27zp"),attr($,"class","svelte-1rs27zp"),attr(w,"class","report svelte-1rs27zp")},m(L,R){insert_hydration(L,w,R),append_hydration(w,C),append_hydration(C,k),append_hydration(k,S),append_hydration(w,M),append_hydration(w,$);for(let N=0;N<P.length;N+=1)P[N]&&P[N].m($,null);append_hydration(w,E),I||(D=[action_destroyer(inView.call(null,w)),listen(w,"enter",b[2]),listen(w,"exit",b[3])],I=!0)},p:noop,i:noop,o:noop,d(L){L&&detach(w),destroy_each(P,L),I=!1,run_all(D)}}}function create_if_block_8(b){let w,C,k,T,S=b[8].grade+"",M,$,E,I=b[8].summary+"",D,A,P,L,R=ensure_array_like(b[8].text),N=[];for(let H=0;H<R.length;H+=1)N[H]=create_each_block_4(get_each_context_4(b,R,H));return{c(){w=element("div"),C=element("h3"),k=element("strong"),T=text$1("Our grade: "),M=text$1(S),$=space(),E=element("span"),D=text$1(I),A=space(),P=element("div");for(let H=0;H<N.length;H+=1)N[H].c();L=space(),this.h()},l(H){w=claim_element(H,"DIV",{class:!0});var z=children(w);C=claim_element(z,"H3",{class:!0});var j=children(C);k=claim_element(j,"STRONG",{});var W=children(k);T=claim_text(W,"Our grade: "),M=claim_text(W,S),W.forEach(detach),j.forEach(detach),$=claim_space(z),E=claim_element(z,"SPAN",{class:!0});var U=children(E);D=claim_text(U,I),U.forEach(detach),A=claim_space(z),P=claim_element(z,"DIV",{class:!0});var O=children(P);for(let q=0;q<N.length;q+=1)N[q].l(O);O.forEach(detach),L=claim_space(z),z.forEach(detach),this.h()},h(){attr(C,"class","svelte-1rs27zp"),attr(E,"class","summary"),attr(P,"class","text svelte-1rs27zp"),attr(w,"class","reaction svelte-1rs27zp")},m(H,z){insert_hydration(H,w,z),append_hydration(w,C),append_hydration(C,k),append_hydration(k,T),append_hydration(k,M),append_hydration(w,$),append_hydration(w,E),append_hydration(E,D),append_hydration(w,A),append_hydration(w,P);for(let j=0;j<N.length;j+=1)N[j]&&N[j].m(P,null);append_hydration(w,L)},p:noop,i:noop,o:noop,d(H){H&&detach(w),destroy_each(N,H)}}}function create_if_block_7(b){let w,C,k=ensure_array_like(b[8].figures),T=[];for(let S=0;S<k.length;S+=1)T[S]=create_each_block_3(get_each_context_3(b,k,S));return{c(){w=element("div");for(let S=0;S<T.length;S+=1)T[S].c();C=space(),this.h()},l(S){w=claim_element(S,"DIV",{class:!0});var M=children(w);for(let $=0;$<T.length;$+=1)T[$].l(M);C=claim_space(M),M.forEach(detach),this.h()},h(){attr(w,"class","grid svelte-1rs27zp")},m(S,M){insert_hydration(S,w,M);for(let $=0;$<T.length;$+=1)T[$]&&T[$].m(w,null);append_hydration(w,C)},p:noop,i:noop,o:noop,d(S){S&&detach(w),destroy_each(T,S)}}}function create_if_block_6(b){let w,C,k,T,S,M=b[8].caption+"",$,E;return{c(){w=element("figure"),C=element("img"),T=space(),S=element("figcaption"),$=text$1(M),E=space(),this.h()},l(I){w=claim_element(I,"FIGURE",{class:!0});var D=children(w);C=claim_element(D,"IMG",{src:!0,alt:!0,class:!0}),T=claim_space(D),S=claim_element(D,"FIGCAPTION",{class:!0});var A=children(S);$=claim_text(A,M),A.forEach(detach),E=claim_space(D),D.forEach(detach),this.h()},h(){src_url_equal(C.src,k="assets/img/"+b[8].src)||attr(C,"src",k),attr(C,"alt",b[8].alt),attr(C,"class","svelte-1rs27zp"),attr(S,"class","svelte-1rs27zp"),attr(w,"class","svelte-1rs27zp")},m(I,D){insert_hydration(I,w,D),append_hydration(w,C),append_hydration(w,T),append_hydration(w,S),append_hydration(S,$),append_hydration(w,E)},p:noop,i:noop,o:noop,d(I){I&&detach(w)}}}function create_if_block_5(b){let w,C;const k=[b[8]];let T={};for(let S=0;S<k.length;S+=1)T=assign(T,k[S]);return w=new Chat({props:T}),{c(){create_component(w.$$.fragment)},l(S){claim_component(w.$$.fragment,S)},m(S,M){mount_component(w,S,M),C=!0},p(S,M){const $={};w.$set($)},i(S){C||(transition_in(w.$$.fragment,S),C=!0)},o(S){transition_out(w.$$.fragment,S),C=!1},d(S){destroy_component(w,S)}}}function create_if_block_4(b){let w,C,k=ensure_array_like(b[8]),T=[];for(let S=0;S<k.length;S+=1)T[S]=create_each_block_2(get_each_context_2(b,k,S));return{c(){w=element("ol");for(let S=0;S<T.length;S+=1)T[S].c();C=space(),this.h()},l(S){w=claim_element(S,"OL",{class:!0});var M=children(w);for(let $=0;$<T.length;$+=1)T[$].l(M);C=claim_space(M),M.forEach(detach),this.h()},h(){attr(w,"class","svelte-1rs27zp")},m(S,M){insert_hydration(S,w,M);for(let $=0;$<T.length;$+=1)T[$]&&T[$].m(w,null);append_hydration(w,C)},p:noop,i:noop,o:noop,d(S){S&&detach(w),destroy_each(T,S)}}}function create_if_block_3(b){let w,C,k=ensure_array_like(b[8]),T=[];for(let S=0;S<k.length;S+=1)T[S]=create_each_block_1(get_each_context_1(b,k,S));return{c(){w=element("ul");for(let S=0;S<T.length;S+=1)T[S].c();C=space(),this.h()},l(S){w=claim_element(S,"UL",{class:!0});var M=children(w);for(let $=0;$<T.length;$+=1)T[$].l(M);C=claim_space(M),M.forEach(detach),this.h()},h(){attr(w,"class","svelte-1rs27zp")},m(S,M){insert_hydration(S,w,M);for(let $=0;$<T.length;$+=1)T[$]&&T[$].m(w,null);append_hydration(w,C)},p:noop,i:noop,o:noop,d(S){S&&detach(w),destroy_each(T,S)}}}function create_if_block_2(b){let w,C,k,T,S,M;return{c(){w=element("button"),C=element("p"),k=new HtmlTagHydration(!1),T=space(),this.h()},l($){w=claim_element($,"BUTTON",{class:!0});var E=children(w);C=claim_element(E,"P",{class:!0});var I=children(C);k=claim_html_tag(I,!1),I.forEach(detach),T=claim_space(E),E.forEach(detach),this.h()},h(){k.a=null,attr(C,"class","svelte-1rs27zp"),attr(w,"class","cta svelte-1rs27zp")},m($,E){insert_hydration($,w,E),append_hydration(w,C),k.m(b[8],C),append_hydration(w,T),S||(M=listen(w,"click",b[5]),S=!0)},p:noop,i:noop,o:noop,d($){$&&detach(w),S=!1,M()}}}function create_if_block_1(b){let w,C,k,T=b[8].text+"";return{c(){w=element("h2"),C=element("strong"),k=new HtmlTagHydration(!1),this.h()},l(S){w=claim_element(S,"H2",{id:!0,class:!0});var M=children(w);C=claim_element(M,"STRONG",{});var $=children(C);k=claim_html_tag($,!1),$.forEach(detach),M.forEach(detach),this.h()},h(){k.a=null,attr(w,"id",b[8].id),attr(w,"class","svelte-1rs27zp")},m(S,M){insert_hydration(S,w,M),append_hydration(w,C),k.m(T,C)},p:noop,i:noop,o:noop,d(S){S&&detach(w)}}}function create_if_block(b){let w,C;return{c(){w=element("p"),C=new HtmlTagHydration(!1),this.h()},l(k){w=claim_element(k,"P",{class:!0});var T=children(w);C=claim_html_tag(T,!1),T.forEach(detach),this.h()},h(){C.a=null,attr(w,"class","svelte-1rs27zp")},m(k,T){insert_hydration(k,w,T),C.m(b[8],w)},p:noop,i:noop,o:noop,d(k){k&&detach(w)}}}function create_else_block(b){let w,C;return{c(){w=element("a"),C=text$1(b[24]),this.h()},l(k){w=claim_element(k,"A",{href:!0});var T=children(w);C=claim_text(T,b[24]),T.forEach(detach),this.h()},h(){attr(w,"href","#"+b[23])},m(k,T){insert_hydration(k,w,T),append_hydration(w,C)},d(k){k&&detach(w)}}}function create_if_block_10(b){let w;return{c(){w=text$1(b[24])},l(C){w=claim_text(C,b[24])},m(C,k){insert_hydration(C,w,k)},d(C){C&&detach(w)}}}function create_each_block_5(b){let w,C,k,T,S,M,$;function E(A,P){return A[23]==="overall"?create_if_block_10:create_else_block}let D=E(b)(b);return{c(){w=element("tr"),C=element("td"),D.c(),k=space(),T=element("td"),S=element("strong"),M=text$1(b[25]),$=space(),this.h()},l(A){w=claim_element(A,"TR",{class:!0});var P=children(w);C=claim_element(P,"TD",{class:!0});var L=children(C);D.l(L),L.forEach(detach),k=claim_space(P),T=claim_element(P,"TD",{class:!0});var R=children(T);S=claim_element(R,"STRONG",{});var N=children(S);M=claim_text(N,b[25]),N.forEach(detach),R.forEach(detach),$=claim_space(P),P.forEach(detach),this.h()},h(){attr(C,"class","svelte-1rs27zp"),attr(T,"class","grade svelte-1rs27zp"),attr(w,"class","svelte-1rs27zp")},m(A,P){insert_hydration(A,w,P),append_hydration(w,C),D.m(C,null),append_hydration(w,k),append_hydration(w,T),append_hydration(T,S),append_hydration(S,M),append_hydration(w,$)},p:noop,d(A){A&&detach(w),D.d()}}}function create_each_block_4(b){let w,C;return{c(){w=element("p"),C=new HtmlTagHydration(!1),this.h()},l(k){w=claim_element(k,"P",{class:!0});var T=children(w);C=claim_html_tag(T,!1),T.forEach(detach),this.h()},h(){C.a=null,attr(w,"class","svelte-1rs27zp")},m(k,T){insert_hydration(k,w,T),C.m(b[8],w)},p:noop,d(k){k&&detach(w)}}}function create_each_block_3(b){let w,C,k,T,S,M;return{c(){w=element("figure"),C=element("img"),T=space(),S=element("figcaption"),M=text$1(b[18]),this.h()},l($){w=claim_element($,"FIGURE",{class:!0});var E=children(w);C=claim_element(E,"IMG",{src:!0,alt:!0,class:!0}),T=claim_space(E),S=claim_element(E,"FIGCAPTION",{class:!0});var I=children(S);M=claim_text(I,b[18]),I.forEach(detach),E.forEach(detach),this.h()},h(){src_url_equal(C.src,k="assets/img/"+b[16])||attr(C,"src",k),attr(C,"alt",b[17]),attr(C,"class","svelte-1rs27zp"),attr(S,"class","svelte-1rs27zp"),attr(w,"class","svelte-1rs27zp")},m($,E){insert_hydration($,w,E),append_hydration(w,C),append_hydration(w,T),append_hydration(w,S),append_hydration(S,M)},p:noop,d($){$&&detach(w)}}}function create_each_block_2(b){let w,C,k,T=b[11].text+"";return{c(){w=element("li"),C=element("a"),k=new HtmlTagHydration(!1),this.h()},l(S){w=claim_element(S,"LI",{class:!0});var M=children(w);C=claim_element(M,"A",{href:!0});var $=children(C);k=claim_html_tag($,!1),$.forEach(detach),M.forEach(detach),this.h()},h(){k.a=null,attr(C,"href","#"+b[11].id),attr(w,"class","svelte-1rs27zp")},m(S,M){insert_hydration(S,w,M),append_hydration(w,C),k.m(T,C)},p:noop,d(S){S&&detach(w)}}}function create_each_block_1(b){let w,C;return{c(){w=element("li"),C=new HtmlTagHydration(!1),this.h()},l(k){w=claim_element(k,"LI",{class:!0});var T=children(w);C=claim_html_tag(T,!1),T.forEach(detach),this.h()},h(){C.a=null,attr(w,"class","svelte-1rs27zp")},m(k,T){insert_hydration(k,w,T),C.m(b[11],w)},p:noop,d(k){k&&detach(w)}}}function create_each_block(b){let w,C,k,T;const S=[create_if_block,create_if_block_1,create_if_block_2,create_if_block_3,create_if_block_4,create_if_block_5,create_if_block_6,create_if_block_7,create_if_block_8,create_if_block_9,create_if_block_11,create_if_block_12],M=[];function $(E,I){return E[7]==="text"?0:E[7]==="heading"?1:E[7]==="cta"?2:E[7]==="ul"?3:E[7]==="ol"?4:E[7]==="chat"?5:E[7]==="figure"?6:E[7]==="figure-grid"?7:E[7]==="reaction"?8:E[7]==="report-card"?9:E[7]==="video"?10:E[7]==="editorNote"?11:-1}return~(w=$(b))&&(C=M[w]=S[w](b)),{c(){C&&C.c(),k=empty()},l(E){C&&C.l(E),k=empty()},m(E,I){~w&&M[w].m(E,I),insert_hydration(E,k,I),T=!0},p(E,I){C&&C.p(E,I)},i(E){T||(transition_in(C),T=!0)},o(E){transition_out(C),T=!1},d(E){E&&detach(k),~w&&M[w].d(E)}}}function create_fragment$2(b){let w,C,k,T="Read Claude’s story →",S,M,$,E,I,D,A=copy.hed+"",P,L,R,N,H=copy.byline+"",z,j,W,U;M=new Header({});let O=ensure_array_like(copy.process),q=[];for(let Y=0;Y<O.length;Y+=1)q[Y]=create_each_block(get_each_context(b,O,Y));const V=Y=>transition_out(q[Y],1,1,()=>{q[Y]=null});return{c(){w=element("div"),C=element("div"),k=element("button"),k.textContent=T,S=space(),create_component(M.$$.fragment),$=space(),E=element("article"),I=element("h1"),D=element("strong"),P=text$1(A),L=space(),R=element("div"),N=new HtmlTagHydration(!1),z=space();for(let Y=0;Y<q.length;Y+=1)q[Y].c();this.h()},l(Y){w=claim_element(Y,"DIV",{id:!0,class:!0});var te=children(w);C=claim_element(te,"DIV",{class:!0});var J=children(C);k=claim_element(J,"BUTTON",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(k)!=="svelte-1ipvs3b"&&(k.textContent=T),J.forEach(detach),S=claim_space(te),claim_component(M.$$.fragment,te),$=claim_space(te),E=claim_element(te,"ARTICLE",{class:!0});var B=children(E);I=claim_element(B,"H1",{class:!0});var ee=children(I);D=claim_element(ee,"STRONG",{});var K=children(D);P=claim_text(K,A),K.forEach(detach),ee.forEach(detach),L=claim_space(B),R=claim_element(B,"DIV",{class:!0});var Q=children(R);N=claim_html_tag(Q,!1),Q.forEach(detach),z=claim_space(B);for(let Z=0;Z<q.length;Z+=1)q[Z].l(B);B.forEach(detach),te.forEach(detach),this.h()},h(){attr(k,"class","svelte-1rs27zp"),attr(C,"class","switcher svelte-1rs27zp"),attr(I,"class","svelte-1rs27zp"),N.a=null,attr(R,"class","byline svelte-1rs27zp"),attr(E,"class","svelte-1rs27zp"),attr(w,"id","process"),attr(w,"class","svelte-1rs27zp"),toggle_class(w,"visible",b[0]==="left")},m(Y,te){insert_hydration(Y,w,te),append_hydration(w,C),append_hydration(C,k),append_hydration(w,S),mount_component(M,w,null),append_hydration(w,$),append_hydration(w,E),append_hydration(E,I),append_hydration(I,D),append_hydration(D,P),append_hydration(E,L),append_hydration(E,R),N.m(H,R),append_hydration(E,z);for(let J=0;J<q.length;J+=1)q[J]&&q[J].m(E,null);j=!0,W||(U=listen(k,"click",b[4]),W=!0)},p(Y,[te]){if(te&13){O=ensure_array_like(copy.process);let J;for(J=0;J<O.length;J+=1){const B=get_each_context(Y,O,J);q[J]?(q[J].p(B,te),transition_in(q[J],1)):(q[J]=create_each_block(B),q[J].c(),transition_in(q[J],1),q[J].m(E,null))}for(group_outros(),J=O.length;J<q.length;J+=1)V(J);check_outros()}(!j||te&1)&&toggle_class(w,"visible",Y[0]==="left")},i(Y){if(!j){transition_in(M.$$.fragment,Y);for(let te=0;te<O.length;te+=1)transition_in(q[te]);j=!0}},o(Y){transition_out(M.$$.fragment,Y),q=q.filter(Boolean);for(let te=0;te<q.length;te+=1)transition_out(q[te]);j=!1},d(Y){Y&&detach(w),destroy_component(M),destroy_each(q,Y),W=!1,U()}}}function instance$2(b,w,C){let k;component_subscribe(b,side,D=>C(0,k=D));const T=createEventDispatcher();let S;const M=()=>{S&&S.show()},$=()=>{S&&S.hide()};return onMount(()=>{const D=document.querySelector("table tr:last-child td:last-child");S=_(D,{type:"circle",animate:!0,animationDuration:1e3,color:"var(--color-ai-orange-og)"}),S.show()}),[k,T,M,$,()=>T("switch","right"),()=>set_store_value(side,k="right",k)]}class Index_Process extends SvelteComponent{constructor(w){super(),init(this,w,instance$2,create_fragment$2,safe_not_equal,{})}}const{window:window_1}=globals;function create_fragment$1(b){let w=!1,C=()=>{w=!1},k,T,S,M,$,E,I,D,A,P,L;return add_render_callback(b[5]),M=new Index_Process({}),M.$on("switch",b[2]),E=new Index_Product({}),E.$on("switch",b[2]),D=new Footer$1({}),{c(){T=element("div"),S=element("div"),create_component(M.$$.fragment),$=space(),create_component(E.$$.fragment),I=space(),create_component(D.$$.fragment),this.h()},l(R){T=claim_element(R,"DIV",{class:!0});var N=children(T);S=claim_element(N,"DIV",{class:!0});var H=children(S);claim_component(M.$$.fragment,H),$=claim_space(H),claim_component(E.$$.fragment,H),H.forEach(detach),N.forEach(detach),I=claim_space(R),claim_component(D.$$.fragment,R),this.h()},h(){attr(S,"class","inner svelte-o1nres"),set_style(S,"transform",`translate(${b[1]==="left"?0:-80}vw, 0)`),attr(T,"class","outer svelte-o1nres")},m(R,N){insert_hydration(R,T,N),append_hydration(T,S),mount_component(M,S,null),append_hydration(S,$),mount_component(E,S,null),insert_hydration(R,I,N),mount_component(D,R,N),A=!0,P||(L=[listen(window_1,"keydown",b[3]),listen(window_1,"scroll",b[4]),listen(window_1,"scroll",()=>{w=!0,clearTimeout(k),k=setTimeout(C,100),b[5]()})],P=!0)},p(R,[N]){N&1&&!w&&(w=!0,clearTimeout(k),scrollTo(window_1.pageXOffset,R[0]),k=setTimeout(C,100)),N&2&&set_style(S,"transform",`translate(${R[1]==="left"?0:-80}vw, 0)`)},i(R){A||(transition_in(M.$$.fragment,R),transition_in(E.$$.fragment,R),transition_in(D.$$.fragment,R),A=!0)},o(R){transition_out(M.$$.fragment,R),transition_out(E.$$.fragment,R),transition_out(D.$$.fragment,R),A=!1},d(R){R&&(detach(T),detach(I)),destroy_component(M),destroy_component(E),destroy_component(D,R),P=!1,run_all(L)}}}function instance$1(b,w,C){let k,T,S,M;component_subscribe(b,productHeight,A=>C(6,k=A)),component_subscribe(b,scrollY,A=>C(0,T=A)),component_subscribe(b,side,A=>C(1,S=A)),component_subscribe(b,prev,A=>C(7,M=A));function $({detail:A}){const P=M[A];window.scrollTo(0,P),set_store_value(side,S=A,S)}function E(A){const P=A.key.replace("Arrow","").toLowerCase();(P==="left"||P==="right")&&$({detail:P})}function I(){S==="right"&&T>k&&window.scrollTo(0,k)}function D(){scrollY.set(T=window_1.pageYOffset)}return[T,S,$,E,I,D]}class Index extends SvelteComponent{constructor(w){super(),init(this,w,instance$1,create_fragment$1,safe_not_equal,{})}}function version(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.18.0"),console.log("build: 2024-07-22-08:24"),console.log("--- --- --- --- --- ---")}function create_fragment(b){let w,C,k,T;return w=new Meta({props:{title:b[1],description:b[2],url:b[3],preloadFont:b[0],keywords:b[4]}}),k=new Index({}),{c(){create_component(w.$$.fragment),C=space(),create_component(k.$$.fragment)},l(S){claim_component(w.$$.fragment,S),C=claim_space(S),claim_component(k.$$.fragment,S)},m(S,M){mount_component(w,S,M),insert_hydration(S,C,M),mount_component(k,S,M),T=!0},p:noop,i(S){T||(transition_in(w.$$.fragment,S),transition_in(k.$$.fragment,S),T=!0)},o(S){transition_out(w.$$.fragment,S),transition_out(k.$$.fragment,S),T=!1},d(S){S&&detach(C),destroy_component(w,S),destroy_component(k,S)}}}function instance(b,w,C){let{data:k}=w;version();const T=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/atlas/AtlasGrotesk-Regular-Web.woff2","https://pudding.cool/assets/fonts/atlas/AtlasGrotesk-Bold-Web.woff2"],{title:S,description:M,url:$,keywords:E}=copy;return setContext("copy",copy),setContext("data",k.data),b.$$set=I=>{"data"in I&&C(5,k=I.data)},[T,S,M,$,E,k]}class Page extends SvelteComponent{constructor(w){super(),init(this,w,instance,create_fragment,safe_not_equal,{data:5})}}export{Page as component};
