import{s as safe_not_equal,e as element,v as empty,Q as head_selector,c as claim_element,d as detach,q as attr,f as append_hydration,n as noop$1,T as destroy_each,i as insert_hydration,m as space,a as children,p as claim_space,o as get_svelte_dataset,S as listen,x as onMount,X as svg_element,Y as claim_svg_element,t as text$1,b as claim_text,g as set_data,z as binding_callbacks,B as tick,a2 as setContext}from"../chunks/scheduler.DQUhrHzO.js";import{S as SvelteComponent,i as init,c as create_component,b as claim_component,m as mount_component,t as transition_in,a as transition_out,d as destroy_component}from"../chunks/index.DivHNhC7.js";import{e as ensure_array_like}from"../chunks/each.D6YF6ztN.js";import{d as descending,I as InternMap,r as rollups}from"../chunks/group.-e3niJ_C.js";function get_each_context$3(e,t,n){const r=e.slice();return r[5]=t[n],r}function create_each_block$3(e){let t,n;return{c(){t=element("link"),this.h()},l(r){t=claim_element(r,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){attr(t,"rel","preload"),attr(t,"href",n=e[5]),attr(t,"as","font"),attr(t,"type","font/woff2"),attr(t,"crossorigin","")},m(r,i){insert_hydration(r,t,i)},p(r,i){i&16&&n!==(n=r[5])&&attr(t,"href",n)},d(r){r&&detach(t)}}}function create_fragment$7(e){let t,n,r,i,o,s,l,u,f,p,g,_,T,S,w,C,k,E,M,h,$,b,D,A,H,W;document.title=t=e[0];let L=ensure_array_like(e[4]),R=[];for(let N=0;N<L.length;N+=1)R[N]=create_each_block$3(get_each_context$3(e,L,N));return{c(){n=element("meta"),r=element("meta"),i=element("meta"),o=element("meta"),s=element("meta"),l=element("meta"),u=element("meta"),f=element("meta"),p=element("meta"),g=element("meta"),T=element("meta"),S=element("meta"),w=element("meta"),C=element("meta"),k=element("meta"),E=element("meta"),M=element("meta"),h=element("meta"),$=element("meta"),D=element("meta"),A=element("link");for(let N=0;N<R.length;N+=1)R[N].c();W=empty(),this.h()},l(N){const U=head_selector("svelte-1htu80s",document.head);n=claim_element(U,"META",{name:!0,content:!0}),r=claim_element(U,"META",{name:!0,content:!0}),i=claim_element(U,"META",{name:!0,content:!0}),o=claim_element(U,"META",{property:!0,content:!0}),s=claim_element(U,"META",{property:!0,content:!0}),l=claim_element(U,"META",{property:!0,content:!0}),u=claim_element(U,"META",{property:!0,content:!0}),f=claim_element(U,"META",{property:!0,content:!0}),p=claim_element(U,"META",{property:!0,content:!0}),g=claim_element(U,"META",{property:!0,content:!0}),T=claim_element(U,"META",{property:!0,content:!0}),S=claim_element(U,"META",{property:!0,content:!0}),w=claim_element(U,"META",{property:!0,content:!0}),C=claim_element(U,"META",{name:!0,content:!0}),k=claim_element(U,"META",{name:!0,content:!0}),E=claim_element(U,"META",{name:!0,content:!0}),M=claim_element(U,"META",{name:!0,content:!0}),h=claim_element(U,"META",{name:!0,content:!0}),$=claim_element(U,"META",{name:!0,content:!0}),D=claim_element(U,"META",{name:!0,content:!0}),A=claim_element(U,"LINK",{rel:!0,href:!0});for(let j=0;j<R.length;j+=1)R[j].l(U);W=empty(),U.forEach(detach),this.h()},h(){attr(n,"name","description"),attr(n,"content",e[1]),attr(r,"name","author"),attr(r,"content","The Pudding"),attr(i,"name","news_keywords"),attr(i,"content",e[3]),attr(o,"property","og:title"),attr(o,"content",e[0]),attr(s,"property","og:site_name"),attr(s,"content","The Pudding"),attr(l,"property","og:url"),attr(l,"content",e[2]),attr(u,"property","og:description"),attr(u,"content",e[1]),attr(f,"property","og:type"),attr(f,"content","article"),attr(p,"property","og:locale"),attr(p,"content","en_US"),attr(g,"property","og:image"),attr(g,"content",_=e[2]+"/assets/social-facebook.jpg"),attr(T,"property","og:image:type"),attr(T,"content","image/jpeg"),attr(S,"property","og:image:width"),attr(S,"content","1200"),attr(w,"property","og:image:height"),attr(w,"content","600"),attr(C,"name","twitter:card"),attr(C,"content","summary_large_image"),attr(k,"name","twitter:site"),attr(k,"content","https://pudding.cool"),attr(E,"name","twitter:creator"),attr(E,"content","@puddingviz"),attr(M,"name","twitter:title"),attr(M,"content",e[0]),attr(h,"name","twitter:description"),attr(h,"content",e[1]),attr($,"name","twitter:image:src"),attr($,"content",b=e[2]+"/assets/social-twitter.jpg"),attr(D,"name","robots"),attr(D,"content","max-image-preview:large"),attr(A,"rel","canonical"),attr(A,"href",H=e[2]+"/")},m(N,U){append_hydration(document.head,n),append_hydration(document.head,r),append_hydration(document.head,i),append_hydration(document.head,o),append_hydration(document.head,s),append_hydration(document.head,l),append_hydration(document.head,u),append_hydration(document.head,f),append_hydration(document.head,p),append_hydration(document.head,g),append_hydration(document.head,T),append_hydration(document.head,S),append_hydration(document.head,w),append_hydration(document.head,C),append_hydration(document.head,k),append_hydration(document.head,E),append_hydration(document.head,M),append_hydration(document.head,h),append_hydration(document.head,$),append_hydration(document.head,D),append_hydration(document.head,A);for(let j=0;j<R.length;j+=1)R[j]&&R[j].m(document.head,null);append_hydration(document.head,W)},p(N,[U]){if(U&1&&t!==(t=N[0])&&(document.title=t),U&2&&attr(n,"content",N[1]),U&8&&attr(i,"content",N[3]),U&1&&attr(o,"content",N[0]),U&4&&attr(l,"content",N[2]),U&2&&attr(u,"content",N[1]),U&4&&_!==(_=N[2]+"/assets/social-facebook.jpg")&&attr(g,"content",_),U&1&&attr(M,"content",N[0]),U&2&&attr(h,"content",N[1]),U&4&&b!==(b=N[2]+"/assets/social-twitter.jpg")&&attr($,"content",b),U&4&&H!==(H=N[2]+"/")&&attr(A,"href",H),U&16){L=ensure_array_like(N[4]);let j;for(j=0;j<L.length;j+=1){const X=get_each_context$3(N,L,j);R[j]?R[j].p(X,U):(R[j]=create_each_block$3(X),R[j].c(),R[j].m(W.parentNode,W))}for(;j<R.length;j+=1)R[j].d(1);R.length=L.length}},i:noop$1,o:noop$1,d(N){detach(n),detach(r),detach(i),detach(o),detach(s),detach(l),detach(u),detach(f),detach(p),detach(g),detach(T),detach(S),detach(w),detach(C),detach(k),detach(E),detach(M),detach(h),detach($),detach(D),detach(A),destroy_each(R,N),detach(W)}}}function instance$4(e,t,n){let{title:r="Title TK"}=t,{description:i="Description TK"}=t,{url:o="https://pudding.cool"}=t,{keywords:s=""}=t,{preloadFont:l=[]}=t;return e.$$set=u=>{"title"in u&&n(0,r=u.title),"description"in u&&n(1,i=u.description),"url"in u&&n(2,o=u.url),"keywords"in u&&n(3,s=u.keywords),"preloadFont"in u&&n(4,l=u.preloadFont)},[r,i,o,s,l]}class Meta extends SvelteComponent{constructor(t){super(),init(this,t,instance$4,create_fragment$7,safe_not_equal,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}class PuddingLogo extends SvelteComponent{constructor(t){super(),init(this,t,null,null,safe_not_equal,{})}}function create_fragment$6(e){let t,n,r,i,o,s,l="The Sadness of Song: How Pop Music is Turning to the Dark Side",u,f,p=`An analysis of the emotional landscape of popular music over the last 60
		years`,g;return i=new PuddingLogo({}),{c(){t=element("header"),n=element("div"),r=element("a"),create_component(i.$$.fragment),o=space(),s=element("h1"),s.textContent=l,u=space(),f=element("p"),f.textContent=p,this.h()},l(_){t=claim_element(_,"HEADER",{class:!0});var T=children(t);n=claim_element(T,"DIV",{class:!0});var S=children(n);r=claim_element(S,"A",{href:!0,target:!0,rel:!0});var w=children(r);claim_component(i.$$.fragment,w),w.forEach(detach),S.forEach(detach),o=claim_space(T),s=claim_element(T,"H1",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(s)!=="svelte-5tyn4s"&&(s.textContent=l),u=claim_space(T),f=claim_element(T,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(f)!=="svelte-geevic"&&(f.textContent=p),T.forEach(detach),this.h()},h(){attr(r,"href","https://pudding.cool"),attr(r,"target","_blank"),attr(r,"rel","noopener noreferrer"),attr(n,"class","logo-container svelte-yizjm4"),attr(s,"class","svelte-yizjm4"),attr(f,"class","subtitle svelte-yizjm4"),attr(t,"class","svelte-yizjm4")},m(_,T){insert_hydration(_,t,T),append_hydration(t,n),append_hydration(n,r),mount_component(i,r,null),append_hydration(t,o),append_hydration(t,s),append_hydration(t,u),append_hydration(t,f),g=!0},p:noop$1,i(_){g||(transition_in(i.$$.fragment,_),g=!0)},o(_){transition_out(i.$$.fragment,_),g=!1},d(_){_&&detach(t),destroy_component(i)}}}class Header extends SvelteComponent{constructor(t){super(),init(this,t,null,create_fragment$6,safe_not_equal,{})}}function create_fragment$5(e){let t,n=`<p class="intro-text svelte-1fdykr7">In 2017, Julia Michaels&#39; hit song &quot;Issues&quot; took the pop world by storm. With
		lyrics like &quot;I&#39;m jealous, I&#39;m overzealous / When I&#39;m down, I get real down,&quot;
		it laid bare the singer&#39;s emotional struggles over a catchy, upbeat melody.
		The song marked a striking shift in popular music: a mainstream embrace of
		darker, more negative themes.</p> <p class="intro-text svelte-1fdykr7">As it turns out, &quot;Issues&quot; was not an anomaly, but rather a sign of the
		times. Over the past decade, there has been a steady rise in the proportion
		of emotionally negative songs topping the Billboard charts, reflecting a
		broader shift in popular music&#39;s emotional landscape. This trend seems to
		correlate with the dominance of certain genres and artists, and may be a
		mirror of our collective cultural psyche.</p> <p class="intro-text svelte-1fdykr7">To understand this phenomenon, we analyzed the sentiment of every song that
		reached the Billboard Hot 100&#39;s top 10 from 1960 to 2020. Using advanced
		language processing, we assigned each song scores for eight basic emotions:
		anger, anticipation, disgust, fear, joy, sadness, surprise, and trust. The
		results paint a fascinating picture of the evolving emotional tone of
		popular music.</p>`;return{c(){t=element("section"),t.innerHTML=n,this.h()},l(r){t=claim_element(r,"SECTION",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(t)!=="svelte-1ivam66"&&(t.innerHTML=n),this.h()},h(){attr(t,"class","introduction svelte-1fdykr7")},m(r,i){insert_hydration(r,t,i)},p:noop$1,i:noop$1,o:noop$1,d(r){r&&detach(t)}}}class Introduction extends SvelteComponent{constructor(t){super(),init(this,t,null,create_fragment$5,safe_not_equal,{})}}var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function customConverter(e,t){var n=objectConverter(e);return function(r,i){return t(n(r),i,e)}}function inferColumns(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pad$1(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function formatYear$1(e){return e<0?"-"+pad$1(-e,6):e>9999?"+"+pad$1(e,6):pad$1(e,4)}function formatDate(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":formatYear$1(e.getUTCFullYear())+"-"+pad$1(e.getUTCMonth()+1,2)+"-"+pad$1(e.getUTCDate(),2)+(i?"T"+pad$1(t,2)+":"+pad$1(n,2)+":"+pad$1(r,2)+"."+pad$1(i,3)+"Z":r?"T"+pad$1(t,2)+":"+pad$1(n,2)+":"+pad$1(r,2)+"Z":n||t?"T"+pad$1(t,2)+":"+pad$1(n,2)+"Z":"")}function dsvFormat(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(g,_){var T,S,w=i(g,function(C,k){if(T)return T(C,k-1);S=C,T=_?customConverter(C,_):objectConverter(C)});return w.columns=S||[],w}function i(g,_){var T=[],S=g.length,w=0,C=0,k,E=S<=0,M=!1;g.charCodeAt(S-1)===NEWLINE&&--S,g.charCodeAt(S-1)===RETURN&&--S;function h(){if(E)return EOF;if(M)return M=!1,EOL;var b,D=w,A;if(g.charCodeAt(D)===QUOTE){for(;w++<S&&g.charCodeAt(w)!==QUOTE||g.charCodeAt(++w)===QUOTE;);return(b=w)>=S?E=!0:(A=g.charCodeAt(w++))===NEWLINE?M=!0:A===RETURN&&(M=!0,g.charCodeAt(w)===NEWLINE&&++w),g.slice(D+1,b-1).replace(/""/g,'"')}for(;w<S;){if((A=g.charCodeAt(b=w++))===NEWLINE)M=!0;else if(A===RETURN)M=!0,g.charCodeAt(w)===NEWLINE&&++w;else if(A!==n)continue;return g.slice(D,b)}return E=!0,g.slice(D,S)}for(;(k=h())!==EOF;){for(var $=[];k!==EOL&&k!==EOF;)$.push(k),k=h();_&&($=_($,C++))==null||T.push($)}return T}function o(g,_){return g.map(function(T){return _.map(function(S){return p(T[S])}).join(e)})}function s(g,_){return _==null&&(_=inferColumns(g)),[_.map(p).join(e)].concat(o(g,_)).join(`
`)}function l(g,_){return _==null&&(_=inferColumns(g)),o(g,_).join(`
`)}function u(g){return g.map(f).join(`
`)}function f(g){return g.map(p).join(e)}function p(g){return g==null?"":g instanceof Date?formatDate(g):t.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:r,parseRows:i,format:s,formatBody:l,formatRows:u,formatRow:f,formatValue:p}}var csv$1=dsvFormat(","),csvParse=csv$1.parse;function responseText(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function text(e,t){return fetch(e,t).then(responseText)}function dsvParse(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),text(t,n).then(function(i){return e(i,r)})}}var csv=dsvParse(csvParse);function ascending(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bisector(e){let t,n,r;e.length!==2?(t=ascending,n=(l,u)=>ascending(e(l),u),r=(l,u)=>e(l)-u):(t=e===ascending||e===descending?e:zero$1,n=e,r=e);function i(l,u,f=0,p=l.length){if(f<p){if(t(u,u)!==0)return p;do{const g=f+p>>>1;n(l[g],u)<0?f=g+1:p=g}while(f<p)}return f}function o(l,u,f=0,p=l.length){if(f<p){if(t(u,u)!==0)return p;do{const g=f+p>>>1;n(l[g],u)<=0?f=g+1:p=g}while(f<p)}return f}function s(l,u,f=0,p=l.length){const g=i(l,u,f,p-1);return g>f&&r(l[g-1],u)>-r(l[g],u)?g-1:g}return{left:i,center:s,right:o}}function zero$1(){return 0}function number$2(e){return e===null?NaN:+e}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;function extent(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=e10?10:o>=e5?5:o>=e2?2:1;let l,u,f;return i<0?(f=Math.pow(10,-i)/s,l=Math.round(e*f),u=Math.round(t*f),l/f<e&&++l,u/f>t&&--u,f=-f):(f=Math.pow(10,i)*s,l=Math.round(e/f),u=Math.round(t/f),l*f<e&&++l,u*f>t&&--u),u<l&&.5<=n&&n<2?tickSpec(e,t,n*2):[l,u,f]}function ticks(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?tickSpec(t,e,n):tickSpec(e,t,n);if(!(o>=i))return[];const l=o-i+1,u=new Array(l);if(r)if(s<0)for(let f=0;f<l;++f)u[f]=(o-f)/-s;else for(let f=0;f<l;++f)u[f]=(o-f)*s;else if(s<0)for(let f=0;f<l;++f)u[f]=(i+f)/-s;else for(let f=0;f<l;++f)u[f]=(i+f)*s;return u}function tickIncrement(e,t,n){return t=+t,e=+e,n=+n,tickSpec(e,t,n)[2]}function tickStep(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?tickIncrement(t,e,n):tickIncrement(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const implicit=Symbol("implicit");function ordinal(){var e=new InternMap,t=[],n=[],r=implicit;function i(o){let s=e.get(o);if(s===void 0){if(r!==implicit)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new InternMap;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return ordinal(t,n).unknown(r)},initRange.apply(i,arguments),i}function define(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function extend(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rgbn(t):n===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rgba(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,e&255,1)}function rgba(e,t,n,r){return r<=0&&(e=t=n=NaN),new Rgb(e,t,n,r)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb(e,t,n,r){return arguments.length===1?rgbConvert(e):new Rgb(e,t,n,r??1)}function Rgb(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}define(Rgb,rgb,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${e===1?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex(e){return e=clampi(e),(e<16?"0":"")+e.toString(16)}function hsla(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,r)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,l=o-i,u=(o+i)/2;return l?(t===o?s=(n-r)/l+(n<r)*6:n===o?s=(r-t)/l+2:s=(t-n)/l+4,l/=u<.5?o+i:2-o-i,s*=60):l=u>0&&u<1?0:s,new Hsl(s,l,u,e.opacity)}function hsl(e,t,n,r){return arguments.length===1?hslConvert(e):new Hsl(e,t,n,r??1)}function Hsl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}define(Hsl,hsl,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Rgb(hsl2rgb(e>=240?e-240:e+120,i,r),hsl2rgb(e,i,r),hsl2rgb(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function clamph(e){return e=(e||0)%360,e<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const constant$2=e=>()=>e;function linear$1(e,t){return function(n){return e+n*t}}function exponential(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function gamma(e){return(e=+e)==1?nogamma:function(t,n){return n-t?exponential(t,n,e):constant$2(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?linear$1(e,n):constant$2(isNaN(e)?t:e)}const interpolateRgb=function e(t){var n=gamma(t);function r(i,o){var s=n((i=rgb(i)).r,(o=rgb(o)).r),l=n(i.g,o.g),u=n(i.b,o.b),f=nogamma(i.opacity,o.opacity);return function(p){return i.r=s(p),i.g=l(p),i.b=u(p),i.opacity=f(p),i+""}}return r.gamma=e,r}(1);function numberArray(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=interpolate(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(l){for(s=0;s<r;++s)o[s]=i[s](l);return o}}function date$1(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function interpolateNumber(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function object(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=interpolate(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function interpolateString(e,t){var n=reA.lastIndex=reB.lastIndex=0,r,i,o,s=-1,l=[],u=[];for(e=e+"",t=t+"";(r=reA.exec(e))&&(i=reB.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,u.push({i:s,x:interpolateNumber(r,i)})),n=reB.lastIndex;return n<t.length&&(o=t.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?u[0]?one(u[0].x):zero(t):(t=u.length,function(f){for(var p=0,g;p<t;++p)l[(g=u[p]).i]=g.x(f);return l.join("")})}function interpolate(e,t){var n=typeof t,r;return t==null||n==="boolean"?constant$2(t):(n==="number"?interpolateNumber:n==="string"?(r=color(t))?(t=r,interpolateRgb):interpolateString:t instanceof color?interpolateRgb:t instanceof Date?date$1:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object:interpolateNumber)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function constants(e){return function(){return e}}function number$1(e){return+e}var unit=[0,1];function identity$1(e){return e}function normalize(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:constants(isNaN(t)?NaN:.5)}function clamper(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function bimap(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=normalize(i,r),o=n(s,o)):(r=normalize(r,i),o=n(o,s)),function(l){return o(r(l))}}function polymap(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=normalize(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(l){var u=bisectRight(e,l,1,r)-1;return o[u](i[u](l))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer(){var e=unit,t=unit,n=interpolate,r,i,o,s=identity$1,l,u,f;function p(){var _=Math.min(e.length,t.length);return s!==identity$1&&(s=clamper(e[0],e[_-1])),l=_>2?polymap:bimap,u=f=null,g}function g(_){return _==null||isNaN(_=+_)?o:(u||(u=l(e.map(r),t,n)))(r(s(_)))}return g.invert=function(_){return s(i((f||(f=l(t,e.map(r),interpolateNumber)))(_)))},g.domain=function(_){return arguments.length?(e=Array.from(_,number$1),p()):e.slice()},g.range=function(_){return arguments.length?(t=Array.from(_),p()):t.slice()},g.rangeRound=function(_){return t=Array.from(_),n=interpolateRound,p()},g.clamp=function(_){return arguments.length?(s=_?!0:identity$1,p()):s!==identity$1},g.interpolate=function(_){return arguments.length?(n=_,p()):n},g.unknown=function(_){return arguments.length?(o=_,g):o},function(_,T){return r=_,i=T,p()}}function continuous(){return transformer()(identity$1,identity$1)}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function exponent(e){return e=formatDecimalParts(Math.abs(e)),e?e[1]:NaN}function formatGroup(e,t){return function(n,r){for(var i=n.length,o=[],s=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),o.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[s=(s+1)%e.length];return o.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var prefixExponent;function formatPrefixAuto(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+formatDecimalParts(e,Math.max(0,t+o-1))[0]}function formatRounded(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const formatTypes={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(e*100,t),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity(e){return e}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(e){var t=e.grouping===void 0||e.thousands===void 0?identity:formatGroup(map.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?identity:formatNumerals(map.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(g){g=formatSpecifier(g);var _=g.fill,T=g.align,S=g.sign,w=g.symbol,C=g.zero,k=g.width,E=g.comma,M=g.precision,h=g.trim,$=g.type;$==="n"?(E=!0,$="g"):formatTypes[$]||(M===void 0&&(M=12),h=!0,$="g"),(C||_==="0"&&T==="=")&&(C=!0,_="0",T="=");var b=w==="$"?n:w==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",D=w==="$"?r:/[%p]/.test($)?s:"",A=formatTypes[$],H=/[defgprs%]/.test($);M=M===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function W(L){var R=b,N=D,U,j,X;if($==="c")N=A(L)+N,L="";else{L=+L;var G=L<0||1/L<0;if(L=isNaN(L)?u:A(Math.abs(L),M),h&&(L=formatTrim(L)),G&&+L==0&&S!=="+"&&(G=!1),R=(G?S==="("?S:l:S==="-"||S==="("?"":S)+R,N=($==="s"?prefixes[8+prefixExponent/3]:"")+N+(G&&S==="("?")":""),H){for(U=-1,j=L.length;++U<j;)if(X=L.charCodeAt(U),48>X||X>57){N=(X===46?i+L.slice(U+1):L.slice(U))+N,L=L.slice(0,U);break}}}E&&!C&&(L=t(L,1/0));var Z=R.length+L.length+N.length,K=Z<k?new Array(k-Z+1).join(_):"";switch(E&&C&&(L=t(K+L,K.length?k-N.length:1/0),K=""),T){case"<":L=R+L+N+K;break;case"=":L=R+K+L+N;break;case"^":L=K.slice(0,Z=K.length>>1)+R+L+N+K.slice(Z);break;default:L=K+R+L+N;break}return o(L)}return W.toString=function(){return g+""},W}function p(g,_){var T=f((g=formatSpecifier(g),g.type="f",g)),S=Math.max(-8,Math.min(8,Math.floor(exponent(_)/3)))*3,w=Math.pow(10,-S),C=prefixes[8+S/3];return function(k){return T(w*k)+C}}return{format:f,formatPrefix:p}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(e){return locale$1=formatLocale$1(e),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))*3-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function tickFormat(e,t,n,r){var i=tickStep(e,t,n),o;switch(r=formatSpecifier(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=precisionPrefix(i,s))&&(r.precision=o),formatPrefix(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=precisionRound(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=precisionFixed(i))&&(r.precision=o-(r.type==="%")*2);break}}return format(r)}function linearish(e){var t=e.domain;return e.ticks=function(n){var r=t();return ticks(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return tickFormat(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],l=r[o],u,f,p=10;for(l<s&&(f=s,s=l,l=f,f=i,i=o,o=f);p-- >0;){if(f=tickIncrement(s,l,n),f===u)return r[i]=s,r[o]=l,t(r);if(f>0)s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f;else if(f<0)s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f;else break;u=f}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)}function nice(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}const t0=new Date,t1=new Date;function timeInterval(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),l=i.ceil(o);return o-s<l-o?s:l},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,l)=>{const u=[];if(o=i.ceil(o),l=l==null?1:Math.floor(l),!(o<s)||!(l>0))return u;let f;do u.push(f=new Date(+o)),t(o,l),e(o);while(f<o&&o<s);return u},i.filter=o=>timeInterval(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!o(s););else for(;--l>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(t0.setTime(+o),t1.setTime(+s),e(t0),e(t1),Math.floor(n(t0,t1))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const millisecond=timeInterval(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);millisecond.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?timeInterval(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*durationSecond)},(e,t)=>(t-e)/durationSecond,e=>e.getUTCSeconds());second.range;const timeMinute=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getMinutes());timeMinute.range;const utcMinute=timeInterval(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond-e.getMinutes()*durationMinute)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getHours());timeHour.range;const utcHour=timeInterval(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getUTCHours());utcHour.range;const timeDay=timeInterval(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay,e=>e.getDate()-1);timeDay.range;const utcDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>e.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>Math.floor(e/durationDay));unixDay.range;function timeWeekday(e){return timeInterval(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(e){return timeInterval(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());timeMonth.range;const utcMonth=timeInterval(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());utcMonth.range;const timeYear=timeInterval(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());timeYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});timeYear.range;const utcYear=timeInterval(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());utcYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});utcYear.range;function ticker(e,t,n,r,i,o){const s=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[o,1,durationMinute],[o,5,5*durationMinute],[o,15,15*durationMinute],[o,30,30*durationMinute],[i,1,durationHour],[i,3,3*durationHour],[i,6,6*durationHour],[i,12,12*durationHour],[r,1,durationDay],[r,2,2*durationDay],[n,1,durationWeek],[t,1,durationMonth],[t,3,3*durationMonth],[e,1,durationYear]];function l(f,p,g){const _=p<f;_&&([f,p]=[p,f]);const T=g&&typeof g.range=="function"?g:u(f,p,g),S=T?T.range(f,+p+1):[];return _?S.reverse():S}function u(f,p,g){const _=Math.abs(p-f)/g,T=bisector(([,,C])=>C).right(s,_);if(T===s.length)return e.every(tickStep(f/durationYear,p/durationYear,g));if(T===0)return millisecond.every(Math.max(tickStep(f,p,g),1));const[S,w]=s[_/s[T-1][2]<s[T][2]/_?T-1:T];return S.every(w)}return[l,u]}const[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function formatLocale(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,l=e.months,u=e.shortMonths,f=formatRe(i),p=formatLookup(i),g=formatRe(o),_=formatLookup(o),T=formatRe(s),S=formatLookup(s),w=formatRe(l),C=formatLookup(l),k=formatRe(u),E=formatLookup(u),M={a:G,A:Z,b:K,B:oe,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:de,q:se,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},h={a:pe,A:ce,b:ae,B:ue,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:me,q:fe,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},$={a:W,A:L,b:R,B:N,c:U,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:H,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:j,X,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};M.x=b(n,M),M.X=b(r,M),M.c=b(t,M),h.x=b(n,h),h.X=b(r,h),h.c=b(t,h);function b(I,B){return function(q){var P=[],J=-1,z=0,te=I.length,ee,ie,ve;for(q instanceof Date||(q=new Date(+q));++J<te;)I.charCodeAt(J)===37&&(P.push(I.slice(z,J)),(ie=pads[ee=I.charAt(++J)])!=null?ee=I.charAt(++J):ie=ee==="e"?" ":"0",(ve=B[ee])&&(ee=ve(q,ie)),P.push(ee),z=J+1);return P.push(I.slice(z,J)),P.join("")}}function D(I,B){return function(q){var P=newDate(1900,void 0,1),J=A(P,I,q+="",0),z,te;if(J!=q.length)return null;if("Q"in P)return new Date(P.Q);if("s"in P)return new Date(P.s*1e3+("L"in P?P.L:0));if(B&&!("Z"in P)&&(P.Z=0),"p"in P&&(P.H=P.H%12+P.p*12),P.m===void 0&&(P.m="q"in P?P.q:0),"V"in P){if(P.V<1||P.V>53)return null;"w"in P||(P.w=1),"Z"in P?(z=utcDate(newDate(P.y,0,1)),te=z.getUTCDay(),z=te>4||te===0?utcMonday.ceil(z):utcMonday(z),z=utcDay.offset(z,(P.V-1)*7),P.y=z.getUTCFullYear(),P.m=z.getUTCMonth(),P.d=z.getUTCDate()+(P.w+6)%7):(z=localDate(newDate(P.y,0,1)),te=z.getDay(),z=te>4||te===0?timeMonday.ceil(z):timeMonday(z),z=timeDay.offset(z,(P.V-1)*7),P.y=z.getFullYear(),P.m=z.getMonth(),P.d=z.getDate()+(P.w+6)%7)}else("W"in P||"U"in P)&&("w"in P||(P.w="u"in P?P.u%7:"W"in P?1:0),te="Z"in P?utcDate(newDate(P.y,0,1)).getUTCDay():localDate(newDate(P.y,0,1)).getDay(),P.m=0,P.d="W"in P?(P.w+6)%7+P.W*7-(te+5)%7:P.w+P.U*7-(te+6)%7);return"Z"in P?(P.H+=P.Z/100|0,P.M+=P.Z%100,utcDate(P)):localDate(P)}}function A(I,B,q,P){for(var J=0,z=B.length,te=q.length,ee,ie;J<z;){if(P>=te)return-1;if(ee=B.charCodeAt(J++),ee===37){if(ee=B.charAt(J++),ie=$[ee in pads?B.charAt(J++):ee],!ie||(P=ie(I,q,P))<0)return-1}else if(ee!=q.charCodeAt(P++))return-1}return P}function H(I,B,q){var P=f.exec(B.slice(q));return P?(I.p=p.get(P[0].toLowerCase()),q+P[0].length):-1}function W(I,B,q){var P=T.exec(B.slice(q));return P?(I.w=S.get(P[0].toLowerCase()),q+P[0].length):-1}function L(I,B,q){var P=g.exec(B.slice(q));return P?(I.w=_.get(P[0].toLowerCase()),q+P[0].length):-1}function R(I,B,q){var P=k.exec(B.slice(q));return P?(I.m=E.get(P[0].toLowerCase()),q+P[0].length):-1}function N(I,B,q){var P=w.exec(B.slice(q));return P?(I.m=C.get(P[0].toLowerCase()),q+P[0].length):-1}function U(I,B,q){return A(I,t,B,q)}function j(I,B,q){return A(I,n,B,q)}function X(I,B,q){return A(I,r,B,q)}function G(I){return s[I.getDay()]}function Z(I){return o[I.getDay()]}function K(I){return u[I.getMonth()]}function oe(I){return l[I.getMonth()]}function de(I){return i[+(I.getHours()>=12)]}function se(I){return 1+~~(I.getMonth()/3)}function pe(I){return s[I.getUTCDay()]}function ce(I){return o[I.getUTCDay()]}function ae(I){return u[I.getUTCMonth()]}function ue(I){return l[I.getUTCMonth()]}function me(I){return i[+(I.getUTCHours()>=12)]}function fe(I){return 1+~~(I.getUTCMonth()/3)}return{format:function(I){var B=b(I+="",M);return B.toString=function(){return I},B},parse:function(I){var B=D(I+="",!1);return B.toString=function(){return I},B},utcFormat:function(I){var B=b(I+="",h);return B.toString=function(){return I},B},utcParse:function(I){var B=D(I+="",!0);return B.toString=function(){return I},B}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function parseWeekdayNumberSunday(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function parseWeekNumberSunday(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function parseWeekNumberISO(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function parseWeekNumberMonday(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function parseFullYear(e,t,n){var r=numberRe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function parseYear(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function parseZone(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function parseQuarter(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function parseMonthNumber(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function parseDayOfMonth(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function parseDayOfYear(e,t,n){var r=numberRe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function parseHour24(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function parseMinutes(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function parseSeconds(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function parseMilliseconds(e,t,n){var r=numberRe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function parseMicroseconds(e,t,n){var r=numberRe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function parseLiteralPercent(e,t,n){var r=percentRe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function parseUnixTimestamp(e,t,n){var r=numberRe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var r=numberRe.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+timeDay.count(timeYear(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return t===0?7:t}function formatWeekNumberSunday(e,t){return pad(timeSunday.count(timeYear(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||t===0?timeThursday(e):timeThursday.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(timeThursday.count(timeYear(e),e)+(timeYear(e).getDay()===4),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(timeMonday.count(timeYear(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return e=dISO(e),pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var n=e.getDay();return e=n>=4||n===0?timeThursday(e):timeThursday.ceil(e),pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return t===0?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||t===0?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(utcThursday.count(utcYear(e),e)+(utcYear(e).getUTCDay()===4),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return e=UTCdISO(e),pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var n=e.getUTCDay();return e=n>=4||n===0?utcThursday(e):utcThursday.ceil(e),pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}var locale,timeFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(e){return locale=formatLocale(e),timeFormat=locale.format,locale.parse,locale.utcFormat,locale.utcParse,locale}function date(e){return new Date(e)}function number(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,n,r,i,o,s,l,u,f){var p=continuous(),g=p.invert,_=p.domain,T=f(".%L"),S=f(":%S"),w=f("%I:%M"),C=f("%I %p"),k=f("%a %d"),E=f("%b %d"),M=f("%B"),h=f("%Y");function $(b){return(u(b)<b?T:l(b)<b?S:s(b)<b?w:o(b)<b?C:r(b)<b?i(b)<b?k:E:n(b)<b?M:h)(b)}return p.invert=function(b){return new Date(g(b))},p.domain=function(b){return arguments.length?_(Array.from(b,number)):_().map(date)},p.ticks=function(b){var D=_();return e(D[0],D[D.length-1],b??10)},p.tickFormat=function(b,D){return D==null?$:f(D)},p.nice=function(b){var D=_();return(!b||typeof b.range!="function")&&(b=t(D[0],D[D.length-1],b??10)),b?_(nice(D,b)):p},p.copy=function(){return copy$1(p,calendar(e,t,n,r,i,o,s,l,u,f))},p}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function constant$1(e){return function(){return e}}const pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function appendRound(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return append;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Path{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?append:appendRound(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,u=r-t,f=i-n,p=s-t,g=l-n,_=p*p+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(_>epsilon)if(!(Math.abs(g*u-f*p)>epsilon)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let T=r-s,S=i-l,w=u*u+f*f,C=T*T+S*S,k=Math.sqrt(w),E=Math.sqrt(_),M=o*Math.tan((pi-Math.acos((w+_-C)/(2*k*E)))/2),h=M/E,$=M/k;Math.abs(h-1)>epsilon&&this._append`L${t+h*p},${n+h*g}`,this._append`A${o},${o},0,0,${+(g*T>p*S)},${this._x1=t+$*u},${this._y1=n+$*f}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),f=t+l,p=n+u,g=1^s,_=s?i-o:o-i;this._x1===null?this._append`M${f},${p}`:(Math.abs(this._x1-f)>epsilon||Math.abs(this._y1-p)>epsilon)&&this._append`L${f},${p}`,r&&(_<0&&(_=_%tau+tau),_>tauEpsilon?this._append`A${r},${r},0,1,${g},${t-l},${n-u}A${r},${r},0,1,${g},${this._x1=f},${this._y1=p}`:_>epsilon&&this._append`A${r},${r},0,${+(_>=pi)},${g},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function withPath(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Path(t)}function array(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function curveLinear(e){return new Linear(e)}function x$1(e){return e[0]}function y$1(e){return e[1]}function line(e,t){var n=constant$1(!0),r=null,i=curveLinear,o=null,s=withPath(l);e=typeof e=="function"?e:e===void 0?x$1:constant$1(e),t=typeof t=="function"?t:t===void 0?y$1:constant$1(t);function l(u){var f,p=(u=array(u)).length,g,_=!1,T;for(r==null&&(o=i(T=s())),f=0;f<=p;++f)!(f<p&&n(g=u[f],f,u))===_&&((_=!_)?o.lineStart():o.lineEnd()),_&&o.point(+e(g,f,u),+t(g,f,u));if(T)return o=null,T+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:constant$1(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:constant$1(+u),l):t},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:constant$1(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),l):r},l}function get_each_context$2(e,t,n){const r=e.slice();return r[13]=t[n],r}function get_each_context_1$1(e,t,n){const r=e.slice();return r[13]=t[n],r}function create_if_block$2(e){let t,n="Percentage of Negative Songs Over Time",r,i,o,s,l,u,f,p,g,_,T,S=`This chart reveals a clear upward trend in the percentage of songs with a
			predominantly negative emotional sentiment, particularly since the
			mid-2010s.`,w=ensure_array_like(e[3].ticks(10)),C=[];for(let M=0;M<w.length;M+=1)C[M]=create_each_block_1$1(get_each_context_1$1(e,w,M));let k=ensure_array_like(e[2].ticks(5)),E=[];for(let M=0;M<k.length;M+=1)E[M]=create_each_block$2(get_each_context$2(e,k,M));return{c(){t=element("h3"),t.textContent=n,r=space(),i=svg_element("svg"),o=svg_element("g"),s=svg_element("path"),u=svg_element("g");for(let M=0;M<C.length;M+=1)C[M].c();p=svg_element("g");for(let M=0;M<E.length;M+=1)E[M].c();_=space(),T=element("p"),T.textContent=S,this.h()},l(M){t=claim_element(M,"H3",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(t)!=="svelte-31xtl"&&(t.textContent=n),r=claim_space(M),i=claim_svg_element(M,"svg",{width:!0,height:!0});var h=children(i);o=claim_svg_element(h,"g",{transform:!0});var $=children(o);s=claim_svg_element($,"path",{class:!0,d:!0}),children(s).forEach(detach),u=claim_svg_element($,"g",{class:!0,transform:!0});var b=children(u);for(let A=0;A<C.length;A+=1)C[A].l(b);b.forEach(detach),p=claim_svg_element($,"g",{class:!0});var D=children(p);for(let A=0;A<E.length;A+=1)E[A].l(D);D.forEach(detach),$.forEach(detach),h.forEach(detach),_=claim_space(M),T=claim_element(M,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(T)!=="svelte-pa7tg5"&&(T.textContent=S),this.h()},h(){attr(t,"class","chart-title svelte-q7472g"),attr(s,"class","chart-line svelte-q7472g"),attr(s,"d",l=e[8](e[0])),attr(u,"class","x-axis svelte-q7472g"),attr(u,"transform",f="translate(0, "+e[4]+")"),attr(p,"class","y-axis svelte-q7472g"),attr(o,"transform",g="translate("+e[6].left+", "+e[6].top+")"),attr(i,"width",e[1]),attr(i,"height",height$1),attr(T,"class","chart-description svelte-q7472g")},m(M,h){insert_hydration(M,t,h),insert_hydration(M,r,h),insert_hydration(M,i,h),append_hydration(i,o),append_hydration(o,s),append_hydration(o,u);for(let $=0;$<C.length;$+=1)C[$]&&C[$].m(u,null);append_hydration(o,p);for(let $=0;$<E.length;$+=1)E[$]&&E[$].m(p,null);insert_hydration(M,_,h),insert_hydration(M,T,h)},p(M,h){if(h&257&&l!==(l=M[8](M[0]))&&attr(s,"d",l),h&520){w=ensure_array_like(M[3].ticks(10));let $;for($=0;$<w.length;$+=1){const b=get_each_context_1$1(M,w,$);C[$]?C[$].p(b,h):(C[$]=create_each_block_1$1(b),C[$].c(),C[$].m(u,null))}for(;$<C.length;$+=1)C[$].d(1);C.length=w.length}if(h&16&&f!==(f="translate(0, "+M[4]+")")&&attr(u,"transform",f),h&36){k=ensure_array_like(M[2].ticks(5));let $;for($=0;$<k.length;$+=1){const b=get_each_context$2(M,k,$);E[$]?E[$].p(b,h):(E[$]=create_each_block$2(b),E[$].c(),E[$].m(p,null))}for(;$<E.length;$+=1)E[$].d(1);E.length=k.length}h&64&&g!==(g="translate("+M[6].left+", "+M[6].top+")")&&attr(o,"transform",g),h&2&&attr(i,"width",M[1])},d(M){M&&(detach(t),detach(r),detach(i),detach(_),detach(T)),destroy_each(C,M),destroy_each(E,M)}}}function create_each_block_1$1(e){let t,n,r,i=e[9](e[13])+"",o,s;return{c(){t=svg_element("g"),n=svg_element("line"),r=svg_element("text"),o=text$1(i),this.h()},l(l){t=claim_svg_element(l,"g",{class:!0,transform:!0});var u=children(t);n=claim_svg_element(u,"line",{y2:!0,stroke:!0,class:!0}),children(n).forEach(detach),r=claim_svg_element(u,"text",{dy:!0,y:!0,"text-anchor":!0,class:!0});var f=children(r);o=claim_text(f,i),f.forEach(detach),u.forEach(detach),this.h()},h(){attr(n,"y2","6"),attr(n,"stroke","currentColor"),attr(n,"class","svelte-q7472g"),attr(r,"dy","0.71em"),attr(r,"y","9"),attr(r,"text-anchor","middle"),attr(r,"class","svelte-q7472g"),attr(t,"class","tick svelte-q7472g"),attr(t,"transform",s="translate("+e[3](e[13])+", 0)")},m(l,u){insert_hydration(l,t,u),append_hydration(t,n),append_hydration(t,r),append_hydration(r,o)},p(l,u){u&8&&i!==(i=l[9](l[13])+"")&&set_data(o,i),u&8&&s!==(s="translate("+l[3](l[13])+", 0)")&&attr(t,"transform",s)},d(l){l&&detach(t)}}}function create_each_block$2(e){let t,n,r,i=e[13]*100+"",o,s,l;return{c(){t=svg_element("g"),n=svg_element("line"),r=svg_element("text"),o=text$1(i),s=text$1("%"),this.h()},l(u){t=claim_svg_element(u,"g",{class:!0,transform:!0});var f=children(t);n=claim_svg_element(f,"line",{x2:!0,stroke:!0,class:!0}),children(n).forEach(detach),r=claim_svg_element(f,"text",{x:!0,dy:!0,"text-anchor":!0,class:!0});var p=children(r);o=claim_text(p,i),s=claim_text(p,"%"),p.forEach(detach),f.forEach(detach),this.h()},h(){attr(n,"x2",e[5]),attr(n,"stroke","currentColor"),attr(n,"class","svelte-q7472g"),attr(r,"x","-9"),attr(r,"dy","0.32em"),attr(r,"text-anchor","end"),attr(r,"class","svelte-q7472g"),attr(t,"class","tick svelte-q7472g"),attr(t,"transform",l="translate(0, "+e[2](e[13])+")")},m(u,f){insert_hydration(u,t,f),append_hydration(t,n),append_hydration(t,r),append_hydration(r,o),append_hydration(r,s)},p(u,f){f&32&&attr(n,"x2",u[5]),f&4&&i!==(i=u[13]*100+"")&&set_data(o,i),f&4&&l!==(l="translate(0, "+u[2](u[13])+")")&&attr(t,"transform",l)},d(u){u&&detach(t)}}}function create_fragment$4(e){let t,n,r,i=e[0].length>0&&create_if_block$2(e);return{c(){t=element("div"),i&&i.c(),this.h()},l(o){t=claim_element(o,"DIV",{class:!0});var s=children(t);i&&i.l(s),s.forEach(detach),this.h()},h(){attr(t,"class","chart-container svelte-q7472g")},m(o,s){insert_hydration(o,t,s),i&&i.m(t,null),e[11](t),n||(r=listen(t,"resize",e[10]),n=!0)},p(o,[s]){o[0].length>0?i?i.p(o,s):(i=create_if_block$2(o),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},i:noop$1,o:noop$1,d(o){o&&detach(t),i&&i.d(),e[11](null),n=!1,r()}}}let height$1=400;function instance$3(e,t,n){let r,i,o,s,l,u,f=[],p=800,g;const _=timeFormat("%Y"),T=C=>{const E=C.filter(M=>{const h=+M.chart_week.slice(0,4);return h>=1960&&h<=2020}).reduce((M,h)=>{const $=h.chart_week.slice(0,4);return M[$]||(M[$]={total:0,negative:0}),M[$].total++,h.Sentiment==="Negative"&&M[$].negative++,M},{});return Object.entries(E).map(([M,{total:h,negative:$}])=>({year:new Date(M),percentage:$/h}))};onMount(async()=>{n(0,f=T(await csv("assets/billboard.csv")))});function S(){n(1,p=g.clientWidth)}function w(C){binding_callbacks[C?"unshift":"push"](()=>{g=C,n(7,g)})}return e.$$.update=()=>{e.$$.dirty&66&&n(5,i=p-r.left-r.right),e.$$.dirty&64&&n(4,o=height$1-r.top-r.bottom),e.$$.dirty&33&&n(3,s=time().domain(extent(f,C=>C.year)).range([0,i])),e.$$.dirty&16&&n(2,l=linear().domain([0,1]).range([o,0])),e.$$.dirty&12&&n(8,u=line().x(C=>s(C.year)).y(C=>l(C.percentage)).defined(C=>C.year>=new Date("1960")&&C.year<=new Date("2020")))},n(6,r={top:20,right:30,bottom:30,left:40}),[f,p,l,s,o,i,r,g,u,_,S,w]}class NegativeSongsChart extends SvelteComponent{constructor(t){super(),init(this,t,instance$3,create_fragment$4,safe_not_equal,{})}}function get_each_context$1(e,t,n){const r=e.slice();return r[14]=t[n],r[15]=t,r[16]=n,r}function get_each_context_1(e,t,n){const r=e.slice();return r[17]=t[n],r}function get_each_context_2(e,t,n){const r=e.slice();return r[17]=t[n],r}function create_if_block$1(e){let t,n="Average Emotions in Songs Over Time",r,i,o,s,l=`These small multiples reveal the evolving emotional landscape of popular
			music, with negative emotions like sadness, fear, and anger on the rise,
			while joy, though still prevalent, shows a relative decline.`,u=ensure_array_like(e[5]),f=[];for(let p=0;p<u.length;p+=1)f[p]=create_each_block$1(get_each_context$1(e,u,p));return{c(){t=element("h3"),t.textContent=n,r=space(),i=element("div");for(let p=0;p<f.length;p+=1)f[p].c();o=space(),s=element("p"),s.textContent=l,this.h()},l(p){t=claim_element(p,"H3",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(t)!=="svelte-1hpxoj"&&(t.textContent=n),r=claim_space(p),i=claim_element(p,"DIV",{class:!0});var g=children(i);for(let _=0;_<f.length;_+=1)f[_].l(g);g.forEach(detach),o=claim_space(p),s=claim_element(p,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(s)!=="svelte-1cyquby"&&(s.textContent=l),this.h()},h(){attr(t,"class","chart-title svelte-1qtg1r"),attr(i,"class","small-multiples svelte-1qtg1r"),attr(s,"class","chart-description svelte-1qtg1r")},m(p,g){insert_hydration(p,t,g),insert_hydration(p,r,g),insert_hydration(p,i,g);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(i,null);insert_hydration(p,o,g),insert_hydration(p,s,g)},p(p,g){if(g&2047){u=ensure_array_like(p[5]);let _;for(_=0;_<u.length;_+=1){const T=get_each_context$1(p,u,_);f[_]?f[_].p(T,g):(f[_]=create_each_block$1(T),f[_].c(),f[_].m(i,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=u.length}},d(p){p&&(detach(t),detach(r),detach(i),detach(o),detach(s)),destroy_each(f,p)}}}function create_each_block_2(e){let t,n,r,i=e[10](e[17])+"",o,s;return{c(){t=svg_element("g"),n=svg_element("line"),r=svg_element("text"),o=text$1(i),this.h()},l(l){t=claim_svg_element(l,"g",{class:!0,transform:!0});var u=children(t);n=claim_svg_element(u,"line",{y2:!0,stroke:!0,class:!0}),children(n).forEach(detach),r=claim_svg_element(u,"text",{dy:!0,y:!0,"text-anchor":!0,class:!0});var f=children(r);o=claim_text(f,i),f.forEach(detach),u.forEach(detach),this.h()},h(){attr(n,"y2","6"),attr(n,"stroke","currentColor"),attr(n,"class","svelte-1qtg1r"),attr(r,"dy","0.71em"),attr(r,"y","9"),attr(r,"text-anchor","middle"),attr(r,"class","svelte-1qtg1r"),attr(t,"class","tick svelte-1qtg1r"),attr(t,"transform",s="translate("+e[2](e[17])+", 0)")},m(l,u){insert_hydration(l,t,u),append_hydration(t,n),append_hydration(t,r),append_hydration(r,o)},p(l,u){u&4&&i!==(i=l[10](l[17])+"")&&set_data(o,i),u&4&&s!==(s="translate("+l[2](l[17])+", 0)")&&attr(t,"transform",s)},d(l){l&&detach(t)}}}function create_each_block_1(e){let t,n,r,i=e[17]+"",o,s;return{c(){t=svg_element("g"),n=svg_element("line"),r=svg_element("text"),o=text$1(i),this.h()},l(l){t=claim_svg_element(l,"g",{class:!0,transform:!0});var u=children(t);n=claim_svg_element(u,"line",{x2:!0,stroke:!0,class:!0}),children(n).forEach(detach),r=claim_svg_element(u,"text",{x:!0,dy:!0,"text-anchor":!0,class:!0});var f=children(r);o=claim_text(f,i),f.forEach(detach),u.forEach(detach),this.h()},h(){attr(n,"x2",e[8]),attr(n,"stroke","currentColor"),attr(n,"class","svelte-1qtg1r"),attr(r,"x","-9"),attr(r,"dy","0.32em"),attr(r,"text-anchor","end"),attr(r,"class","svelte-1qtg1r"),attr(t,"class","tick svelte-1qtg1r"),attr(t,"transform",s="translate(0, "+e[3](e[17])+")")},m(l,u){insert_hydration(l,t,u),append_hydration(t,n),append_hydration(t,r),append_hydration(r,o)},p(l,u){u&8&&i!==(i=l[17]+"")&&set_data(o,i),u&8&&s!==(s="translate(0, "+l[3](l[17])+")")&&attr(t,"transform",s)},d(l){l&&detach(t)}}}function create_each_block$1(e){let t,n,r,i,o,s,l,u,f,p=e[14]+"",g,_,T=e[16],S=ensure_array_like(e[2].ticks(3)),w=[];for(let h=0;h<S.length;h+=1)w[h]=create_each_block_2(get_each_context_2(e,S,h));let C=ensure_array_like(e[3].ticks(3)),k=[];for(let h=0;h<C.length;h+=1)k[h]=create_each_block_1(get_each_context_1(e,C,h));const E=()=>e[11](t,T),M=()=>e[11](null,T);return{c(){t=element("div"),n=svg_element("svg"),r=svg_element("g"),i=svg_element("path"),s=svg_element("g");for(let h=0;h<w.length;h+=1)w[h].c();l=svg_element("g");for(let h=0;h<k.length;h+=1)k[h].c();u=space(),f=element("div"),g=text$1(p),_=space(),this.h()},l(h){t=claim_element(h,"DIV",{class:!0});var $=children(t);n=claim_svg_element($,"svg",{width:!0,height:!0});var b=children(n);r=claim_svg_element(b,"g",{transform:!0});var D=children(r);i=claim_svg_element(D,"path",{class:!0,d:!0,stroke:!0}),children(i).forEach(detach),s=claim_svg_element(D,"g",{class:!0,transform:!0});var A=children(s);for(let L=0;L<w.length;L+=1)w[L].l(A);A.forEach(detach),l=claim_svg_element(D,"g",{class:!0});var H=children(l);for(let L=0;L<k.length;L+=1)k[L].l(H);H.forEach(detach),D.forEach(detach),b.forEach(detach),u=claim_space($),f=claim_element($,"DIV",{class:!0});var W=children(f);g=claim_text(W,p),W.forEach(detach),_=claim_space($),$.forEach(detach),this.h()},h(){attr(i,"class","chart-line svelte-1qtg1r"),attr(i,"d",o=e[4][e[16]](e[0])),attr(i,"stroke",e[6][e[16]]),attr(s,"class","x-axis svelte-1qtg1r"),attr(s,"transform","translate(0, "+e[9]+")"),attr(l,"class","y-axis svelte-1qtg1r"),attr(r,"transform","translate("+e[7].left+", "+e[7].top+")"),attr(n,"width",width),attr(n,"height",height),attr(f,"class","chart-title svelte-1qtg1r"),attr(t,"class","chart-wrapper svelte-1qtg1r")},m(h,$){insert_hydration(h,t,$),append_hydration(t,n),append_hydration(n,r),append_hydration(r,i),append_hydration(r,s);for(let b=0;b<w.length;b+=1)w[b]&&w[b].m(s,null);append_hydration(r,l);for(let b=0;b<k.length;b+=1)k[b]&&k[b].m(l,null);append_hydration(t,u),append_hydration(t,f),append_hydration(f,g),append_hydration(t,_),E()},p(h,$){if(e=h,$&17&&o!==(o=e[4][e[16]](e[0]))&&attr(i,"d",o),$&1028){S=ensure_array_like(e[2].ticks(3));let b;for(b=0;b<S.length;b+=1){const D=get_each_context_2(e,S,b);w[b]?w[b].p(D,$):(w[b]=create_each_block_2(D),w[b].c(),w[b].m(s,null))}for(;b<w.length;b+=1)w[b].d(1);w.length=S.length}if($&264){C=ensure_array_like(e[3].ticks(3));let b;for(b=0;b<C.length;b+=1){const D=get_each_context_1(e,C,b);k[b]?k[b].p(D,$):(k[b]=create_each_block_1(D),k[b].c(),k[b].m(l,null))}for(;b<k.length;b+=1)k[b].d(1);k.length=C.length}T!==e[16]&&(M(),T=e[16],E())},d(h){h&&detach(t),destroy_each(w,h),destroy_each(k,h),M()}}}function create_fragment$3(e){let t,n=e[0].length>0&&create_if_block$1(e);return{c(){t=element("div"),n&&n.c(),this.h()},l(r){t=claim_element(r,"DIV",{class:!0});var i=children(t);n&&n.l(i),i.forEach(detach),this.h()},h(){attr(t,"class","chart-container svelte-1qtg1r")},m(r,i){insert_hydration(r,t,i),n&&n.m(t,null)},p(r,[i]){r[0].length>0?n?n.p(r,i):(n=create_if_block$1(r),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i:noop$1,o:noop$1,d(r){r&&detach(t),n&&n.d()}}}let width=200,height=150;function instance$2($$self,$$props,$$invalidate){let data=[];const emotions=["anger","anticipation","disgust","fear","joy","sadness","surprise","trust"],colors=["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628","#ffff33"];let chartRefs=new Array(emotions.length);const margin={top:20,right:20,bottom:30,left:40},chartWidth=width-margin.left-margin.right,chartHeight=height-margin.top-margin.bottom,formatDate=timeFormat("%Y");let xScale,yScale,lineGenerators;const normalizeEmotions=e=>{const t=Object.values(e).reduce((n,r)=>n+r,0);return Object.entries(e).reduce((n,[r,i])=>(n[r]=i/t,n),{})},processData=data=>{const filteredData=data.filter(e=>{const t=+e.chart_week.slice(0,4);return t>=1960&&t<=2020}),groupedData=rollups(filteredData,v=>{const emotionSums=v.reduce((acc,d)=>{try{const parsedEmotions=eval("("+d.Emotions+")");if(Object.keys(parsedEmotions).length>0){const e=normalizeEmotions(parsedEmotions);emotions.forEach(t=>{acc[t]+=e[t]||0})}}catch(e){console.warn("Error parsing emotions:",d.Emotions)}return acc},Object.fromEntries(emotions.map(e=>[e,0]))),totalSongs=v.length,averageEmotions=Object.entries(emotionSums).reduce((e,[t,n])=>(e[t]=n/totalSongs,e),{});return averageEmotions},e=>e.chart_week.slice(0,4));return Array.from(groupedData,([e,t])=>({year:new Date(e),...t}))};onMount(async()=>{$$invalidate(0,data=processData(await csv("assets/billboard.csv"))),$$invalidate(2,xScale=time().domain(extent(data,e=>e.year)).range([0,chartWidth])),$$invalidate(3,yScale=linear().domain([0,.5]).range([chartHeight,0])),$$invalidate(4,lineGenerators=emotions.map(e=>line().x(t=>xScale(t.year)).y(t=>yScale(t[e])).defined(t=>t.year>=new Date("1960")&&t.year<=new Date("2020"))))});function div1_binding(e,t){binding_callbacks[e?"unshift":"push"](()=>{chartRefs[t]=e,$$invalidate(1,chartRefs)})}return[data,chartRefs,xScale,yScale,lineGenerators,emotions,colors,margin,chartWidth,chartHeight,formatDate,div1_binding]}class EmotionChart extends SvelteComponent{constructor(t){super(),init(this,t,instance$2,create_fragment$3,safe_not_equal,{})}}function tree_add(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return add(this.cover(t,n),t,n,e)}function add(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},l=e._x0,u=e._y0,f=e._x1,p=e._y1,g,_,T,S,w,C,k,E;if(!o)return e._root=s,e;for(;o.length;)if((w=t>=(g=(l+f)/2))?l=g:f=g,(C=n>=(_=(u+p)/2))?u=_:p=_,i=o,!(o=o[k=C<<1|w]))return i[k]=s,e;if(T=+e._x.call(null,o.data),S=+e._y.call(null,o.data),t===T&&n===S)return s.next=o,i?i[k]=s:e._root=s,e;do i=i?i[k]=new Array(4):e._root=new Array(4),(w=t>=(g=(l+f)/2))?l=g:f=g,(C=n>=(_=(u+p)/2))?u=_:p=_;while((k=C<<1|w)===(E=(S>=_)<<1|T>=g));return i[E]=o,i[k]=s,e}function addAll(e){var t,n,r=e.length,i,o,s=new Array(r),l=new Array(r),u=1/0,f=1/0,p=-1/0,g=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,l[n]=o,i<u&&(u=i),i>p&&(p=i),o<f&&(f=o),o>g&&(g=o));if(u>p||f>g)return this;for(this.cover(u,f).cover(p,g),n=0;n<r;++n)add(this,s[n],l[n],e[n]);return this}function tree_cover(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,l=this._root,u,f;n>e||e>=i||r>t||t>=o;)switch(f=(t<r)<<1|e<n,u=new Array(4),u[f]=l,l=u,s*=2,f){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function tree_data(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function tree_extent(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function tree_find(e,t,n){var r,i=this._x0,o=this._y0,s,l,u,f,p=this._x1,g=this._y1,_=[],T=this._root,S,w;for(T&&_.push(new Quad(T,i,o,p,g)),n==null?n=1/0:(i=e-n,o=t-n,p=e+n,g=t+n,n*=n);S=_.pop();)if(!(!(T=S.node)||(s=S.x0)>p||(l=S.y0)>g||(u=S.x1)<i||(f=S.y1)<o))if(T.length){var C=(s+u)/2,k=(l+f)/2;_.push(new Quad(T[3],C,k,u,f),new Quad(T[2],s,k,C,f),new Quad(T[1],C,l,u,k),new Quad(T[0],s,l,C,k)),(w=(t>=k)<<1|e>=C)&&(S=_[_.length-1],_[_.length-1]=_[_.length-1-w],_[_.length-1-w]=S)}else{var E=e-+this._x.call(null,T.data),M=t-+this._y.call(null,T.data),h=E*E+M*M;if(h<n){var $=Math.sqrt(n=h);i=e-$,o=t-$,p=e+$,g=t+$,r=T.data}}return r}function tree_remove(e){if(isNaN(p=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,l=this._y0,u=this._x1,f=this._y1,p,g,_,T,S,w,C,k;if(!n)return this;if(n.length)for(;;){if((S=p>=(_=(s+u)/2))?s=_:u=_,(w=g>=(T=(l+f)/2))?l=T:f=T,t=n,!(n=n[C=w<<1|S]))return this;if(!n.length)break;(t[C+1&3]||t[C+2&3]||t[C+3&3])&&(r=t,k=C)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[C]=o:delete t[C],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[k]=n:this._root=n),this):(this._root=o,this)}function removeAll(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function tree_root(){return this._root}function tree_size(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function tree_visit(e){var t=[],n,r=this._root,i,o,s,l,u;for(r&&t.push(new Quad(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,l=n.x1,u=n.y1)&&r.length){var f=(o+l)/2,p=(s+u)/2;(i=r[3])&&t.push(new Quad(i,f,p,l,u)),(i=r[2])&&t.push(new Quad(i,o,p,f,u)),(i=r[1])&&t.push(new Quad(i,f,s,l,p)),(i=r[0])&&t.push(new Quad(i,o,s,f,p))}return this}function tree_visitAfter(e){var t=[],n=[],r;for(this._root&&t.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,l=r.y0,u=r.x1,f=r.y1,p=(s+u)/2,g=(l+f)/2;(o=i[0])&&t.push(new Quad(o,s,l,p,g)),(o=i[1])&&t.push(new Quad(o,p,l,u,g)),(o=i[2])&&t.push(new Quad(o,s,g,p,f)),(o=i[3])&&t.push(new Quad(o,p,g,u,f))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function defaultX(e){return e[0]}function tree_x(e){return arguments.length?(this._x=e,this):this._x}function defaultY(e){return e[1]}function tree_y(e){return arguments.length?(this._y=e,this):this._y}function quadtree(e,t,n){var r=new Quadtree(t??defaultX,n??defaultY,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Quadtree(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function leaf_copy(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var e=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=leaf_copy(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=leaf_copy(r));return e};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant(e){return function(){return e}}function jiggle(e){return(e()-.5)*1e-6}function x(e){return e.x+e.vx}function y(e){return e.y+e.vy}function forceCollide(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=constant(e==null?1:+e));function s(){for(var f,p=t.length,g,_,T,S,w,C,k=0;k<o;++k)for(g=quadtree(t,x,y).visitAfter(l),f=0;f<p;++f)_=t[f],w=n[_.index],C=w*w,T=_.x+_.vx,S=_.y+_.vy,g.visit(E);function E(M,h,$,b,D){var A=M.data,H=M.r,W=w+H;if(A){if(A.index>_.index){var L=T-A.x-A.vx,R=S-A.y-A.vy,N=L*L+R*R;N<W*W&&(L===0&&(L=jiggle(r),N+=L*L),R===0&&(R=jiggle(r),N+=R*R),N=(W-(N=Math.sqrt(N)))/N*i,_.vx+=(L*=N)*(W=(H*=H)/(C+H)),_.vy+=(R*=N)*W,A.vx-=L*(W=1-W),A.vy-=R*W)}return}return h>T+W||b<T-W||$>S+W||D<S-W}}function l(f){if(f.data)return f.r=n[f.data.index];for(var p=f.r=0;p<4;++p)f[p]&&f[p].r>f.r&&(f.r=f[p].r)}function u(){if(t){var f,p=t.length,g;for(n=new Array(p),f=0;f<p;++f)g=t[f],n[g.index]=+e(g,f,t)}}return s.initialize=function(f,p){t=f,r=p,u()},s.iterations=function(f){return arguments.length?(o=+f,s):o},s.strength=function(f){return arguments.length?(i=+f,s):i},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:constant(+f),u(),s):e},s}var noop={value:()=>{}};function dispatch(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Dispatch(n)}function Dispatch(e){this._=e}function parseTypenames(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(e,t){var n=this._,r=parseTypenames(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=get(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=set(n[i],e.name,t);else if(t==null)for(i in n)n[i]=set(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dispatch(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function get(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function set(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=noop,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var frame=0,timeout=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?now():+n)+(t==null?0:+t),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=e,this._time=n,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(e,t,n){var r=new Timer;return r.restart(e,t,n),r}function timerFlush(){now(),++frame;for(var e=taskHead,t;e;)(t=clockNow-e._time)>=0&&e._call.call(void 0,t),e=e._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var e=clock.now(),t=e-clockLast;t>pokeDelay&&(clockSkew-=t,clockLast=e)}function nap(){for(var e,t=taskHead,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:taskHead=n);taskTail=e,sleep(r)}function sleep(e){if(!frame){timeout&&(timeout=clearTimeout(timeout));var t=e-clockNow;t>24?(e<1/0&&(timeout=setTimeout(wake,e-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}const a=1664525,c=1013904223,m=4294967296;function lcg(){let e=1;return()=>(e=(a*e+c)%m)/m}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function forceSimulation(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,l=new Map,u=timer(g),f=dispatch("tick","end"),p=lcg();e==null&&(e=[]);function g(){_(),f.call("tick",t),n<r&&(u.stop(),f.call("end",t))}function _(w){var C,k=e.length,E;w===void 0&&(w=1);for(var M=0;M<w;++M)for(n+=(o-n)*i,l.forEach(function(h){h(n)}),C=0;C<k;++C)E=e[C],E.fx==null?E.x+=E.vx*=s:(E.x=E.fx,E.vx=0),E.fy==null?E.y+=E.vy*=s:(E.y=E.fy,E.vy=0);return t}function T(){for(var w=0,C=e.length,k;w<C;++w){if(k=e[w],k.index=w,k.fx!=null&&(k.x=k.fx),k.fy!=null&&(k.y=k.fy),isNaN(k.x)||isNaN(k.y)){var E=initialRadius*Math.sqrt(.5+w),M=w*initialAngle;k.x=E*Math.cos(M),k.y=E*Math.sin(M)}(isNaN(k.vx)||isNaN(k.vy))&&(k.vx=k.vy=0)}}function S(w){return w.initialize&&w.initialize(e,p),w}return T(),t={tick:_,restart:function(){return u.restart(g),t},stop:function(){return u.stop(),t},nodes:function(w){return arguments.length?(e=w,T(),l.forEach(S),t):e},alpha:function(w){return arguments.length?(n=+w,t):n},alphaMin:function(w){return arguments.length?(r=+w,t):r},alphaDecay:function(w){return arguments.length?(i=+w,t):+i},alphaTarget:function(w){return arguments.length?(o=+w,t):o},velocityDecay:function(w){return arguments.length?(s=1-w,t):1-s},randomSource:function(w){return arguments.length?(p=w,l.forEach(S),t):p},force:function(w,C){return arguments.length>1?(C==null?l.delete(w):l.set(w,S(C)),t):l.get(w)},find:function(w,C,k){var E=0,M=e.length,h,$,b,D,A;for(k==null?k=1/0:k*=k,E=0;E<M;++E)D=e[E],h=w-D.x,$=C-D.y,b=h*h+$*$,b<k&&(A=D,k=b);return A},on:function(w,C){return arguments.length>1?(f.on(w,C),t):f.on(w)}}}function forceX(e){var t=constant(.1),n,r,i;typeof e!="function"&&(e=constant(e==null?0:+e));function o(l){for(var u=0,f=n.length,p;u<f;++u)p=n[u],p.vx+=(i[u]-p.x)*r[u]*l}function s(){if(n){var l,u=n.length;for(r=new Array(u),i=new Array(u),l=0;l<u;++l)r[l]=isNaN(i[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return o.initialize=function(l){n=l,s()},o.strength=function(l){return arguments.length?(t=typeof l=="function"?l:constant(+l),s(),o):t},o.x=function(l){return arguments.length?(e=typeof l=="function"?l:constant(+l),s(),o):e},o}function forceY(e){var t=constant(.1),n,r,i;typeof e!="function"&&(e=constant(e==null?0:+e));function o(l){for(var u=0,f=n.length,p;u<f;++u)p=n[u],p.vy+=(i[u]-p.y)*r[u]*l}function s(){if(n){var l,u=n.length;for(r=new Array(u),i=new Array(u),l=0;l<u;++l)r[l]=isNaN(i[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return o.initialize=function(l){n=l,s()},o.strength=function(l){return arguments.length?(t=typeof l=="function"?l:constant(+l),s(),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:constant(+l),s(),o):e},o}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(e,t){return e.concat([t+"-"+start,t+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(e,t){return e.concat([t,t+"-"+start,t+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(e){return e?(e.nodeName||"").toLowerCase():null}function getWindow(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function isElement$1(e){var t=getWindow(e).Element;return e instanceof t||e instanceof Element}function isHTMLElement(e){var t=getWindow(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function isShadowRoot(e){if(typeof ShadowRoot>"u")return!1;var t=getWindow(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function applyStyles(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},o=t.elements[n];!isHTMLElement(o)||!getNodeName(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var l=i[s];l===!1?o.removeAttribute(s):o.setAttribute(s,l===!0?"":l)}))})}function effect$2(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],o=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),l=s.reduce(function(u,f){return u[f]="",u},{});!isHTMLElement(i)||!getNodeName(i)||(Object.assign(i.style,l),Object.keys(o).forEach(function(u){i.removeAttribute(u)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement$1(e){return e.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&isHTMLElement(e)&&(i=e.offsetWidth>0&&round(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&round(r.height)/e.offsetHeight||1);var s=isElement$1(e)?getWindow(e):window,l=s.visualViewport,u=!isLayoutViewport()&&n,f=(r.left+(u&&l?l.offsetLeft:0))/i,p=(r.top+(u&&l?l.offsetTop:0))/o,g=r.width/i,_=r.height/o;return{width:g,height:_,top:p,right:f+g,bottom:p+_,left:f,x:f,y:p}}function getLayoutRect(e){var t=getBoundingClientRect(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function contains(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&isShadowRoot(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function getComputedStyle(e){return getWindow(e).getComputedStyle(e)}function isTableElement(e){return["table","td","th"].indexOf(getNodeName(e))>=0}function getDocumentElement(e){return((isElement$1(e)?e.ownerDocument:e.document)||window.document).documentElement}function getParentNode(e){return getNodeName(e)==="html"?e:e.assignedSlot||e.parentNode||(isShadowRoot(e)?e.host:null)||getDocumentElement(e)}function getTrueOffsetParent(e){return!isHTMLElement(e)||getComputedStyle(e).position==="fixed"?null:e.offsetParent}function getContainingBlock(e){var t=/firefox/i.test(getUAString()),n=/Trident/i.test(getUAString());if(n&&isHTMLElement(e)){var r=getComputedStyle(e);if(r.position==="fixed")return null}var i=getParentNode(e);for(isShadowRoot(i)&&(i=i.host);isHTMLElement(i)&&["html","body"].indexOf(getNodeName(i))<0;){var o=getComputedStyle(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function getOffsetParent(e){for(var t=getWindow(e),n=getTrueOffsetParent(e);n&&isTableElement(n)&&getComputedStyle(n).position==="static";)n=getTrueOffsetParent(n);return n&&(getNodeName(n)==="html"||getNodeName(n)==="body"&&getComputedStyle(n).position==="static")?t:n||getContainingBlock(e)||t}function getMainAxisFromPlacement(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function within(e,t,n){return max(e,min(t,n))}function withinMaxClamp(e,t,n){var r=within(e,t,n);return r>n?n:r}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(e){return Object.assign({},getFreshSideObject(),e)}function expandToHashMap(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var toPaddingObject=function e(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,mergePaddingObject(typeof t!="number"?t:expandToHashMap(t,basePlacements))};function arrow(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,l=getBasePlacement$1(n.placement),u=getMainAxisFromPlacement(l),f=[left,right].indexOf(l)>=0,p=f?"height":"width";if(!(!o||!s)){var g=toPaddingObject(i.padding,n),_=getLayoutRect(o),T=u==="y"?top:left,S=u==="y"?bottom:right,w=n.rects.reference[p]+n.rects.reference[u]-s[u]-n.rects.popper[p],C=s[u]-n.rects.reference[u],k=getOffsetParent(o),E=k?u==="y"?k.clientHeight||0:k.clientWidth||0:0,M=w/2-C/2,h=g[T],$=E-_[p]-g[S],b=E/2-_[p]/2+M,D=within(h,b,$),A=u;n.modifiersData[r]=(t={},t[A]=D,t.centerOffset=D-b,t)}}function effect$1(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||contains(t.elements.popper,i)&&(t.elements.arrow=i))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(e){return e.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:round(n*i)/i||0,y:round(r*i)/i||0}}function mapToStyles(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,l=e.position,u=e.gpuAcceleration,f=e.adaptive,p=e.roundOffsets,g=e.isFixed,_=s.x,T=_===void 0?0:_,S=s.y,w=S===void 0?0:S,C=typeof p=="function"?p({x:T,y:w}):{x:T,y:w};T=C.x,w=C.y;var k=s.hasOwnProperty("x"),E=s.hasOwnProperty("y"),M=left,h=top,$=window;if(f){var b=getOffsetParent(n),D="clientHeight",A="clientWidth";if(b===getWindow(n)&&(b=getDocumentElement(n),getComputedStyle(b).position!=="static"&&l==="absolute"&&(D="scrollHeight",A="scrollWidth")),b=b,i===top||(i===left||i===right)&&o===end){h=bottom;var H=g&&b===$&&$.visualViewport?$.visualViewport.height:b[D];w-=H-r.height,w*=u?1:-1}if(i===left||(i===top||i===bottom)&&o===end){M=right;var W=g&&b===$&&$.visualViewport?$.visualViewport.width:b[A];T-=W-r.width,T*=u?1:-1}}var L=Object.assign({position:l},f&&unsetSides),R=p===!0?roundOffsetsByDPR({x:T,y:w},getWindow(n)):{x:T,y:w};if(T=R.x,w=R.y,u){var N;return Object.assign({},L,(N={},N[h]=E?"0":"",N[M]=k?"0":"",N.transform=($.devicePixelRatio||1)<=1?"translate("+T+"px, "+w+"px)":"translate3d("+T+"px, "+w+"px, 0)",N))}return Object.assign({},L,(t={},t[h]=E?w+"px":"",t[M]=k?T+"px":"",t.transform="",t))}function computeStyles(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,l=n.roundOffsets,u=l===void 0?!0:l,f={placement:getBasePlacement$1(t.placement),variation:getVariation(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,mapToStyles(Object.assign({},f,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,mapToStyles(Object.assign({},f,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,l=s===void 0?!0:s,u=getWindow(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&f.forEach(function(p){p.addEventListener("scroll",n.update,passive)}),l&&u.addEventListener("resize",n.update,passive),function(){o&&f.forEach(function(p){p.removeEventListener("scroll",n.update,passive)}),l&&u.removeEventListener("resize",n.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function e(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(e){return e.replace(/left|right|bottom|top/g,function(t){return hash$1[t]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(e){return e.replace(/start|end/g,function(t){return hash[t]})}function getWindowScroll(e){var t=getWindow(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function getWindowScrollBarX(e){return getBoundingClientRect(getDocumentElement(e)).left+getWindowScroll(e).scrollLeft}function getViewportRect(e,t){var n=getWindow(e),r=getDocumentElement(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,l=0,u=0;if(i){o=i.width,s=i.height;var f=isLayoutViewport();(f||!f&&t==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:o,height:s,x:l+getWindowScrollBarX(e),y:u}}function getDocumentRect(e){var t,n=getDocumentElement(e),r=getWindowScroll(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=max(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=max(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+getWindowScrollBarX(e),u=-r.scrollTop;return getComputedStyle(i||n).direction==="rtl"&&(l+=max(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:l,y:u}}function isScrollParent(e){var t=getComputedStyle(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function getScrollParent(e){return["html","body","#document"].indexOf(getNodeName(e))>=0?e.ownerDocument.body:isHTMLElement(e)&&isScrollParent(e)?e:getScrollParent(getParentNode(e))}function listScrollParents(e,t){var n;t===void 0&&(t=[]);var r=getScrollParent(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=getWindow(r),s=i?[o].concat(o.visualViewport||[],isScrollParent(r)?r:[]):r,l=t.concat(s);return i?l:l.concat(listScrollParents(getParentNode(s)))}function rectToClientRect(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function getInnerBoundingClientRect(e,t){var n=getBoundingClientRect(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function getClientRectFromMixedType(e,t,n){return t===viewport?rectToClientRect(getViewportRect(e,n)):isElement$1(t)?getInnerBoundingClientRect(t,n):rectToClientRect(getDocumentRect(getDocumentElement(e)))}function getClippingParents(e){var t=listScrollParents(getParentNode(e)),n=["absolute","fixed"].indexOf(getComputedStyle(e).position)>=0,r=n&&isHTMLElement(e)?getOffsetParent(e):e;return isElement$1(r)?t.filter(function(i){return isElement$1(i)&&contains(i,r)&&getNodeName(i)!=="body"}):[]}function getClippingRect(e,t,n,r){var i=t==="clippingParents"?getClippingParents(e):[].concat(t),o=[].concat(i,[n]),s=o[0],l=o.reduce(function(u,f){var p=getClientRectFromMixedType(e,f,r);return u.top=max(p.top,u.top),u.right=min(p.right,u.right),u.bottom=min(p.bottom,u.bottom),u.left=max(p.left,u.left),u},getClientRectFromMixedType(e,s,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function computeOffsets(e){var t=e.reference,n=e.element,r=e.placement,i=r?getBasePlacement$1(r):null,o=r?getVariation(r):null,s=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,u;switch(i){case top:u={x:s,y:t.y-n.height};break;case bottom:u={x:s,y:t.y+t.height};break;case right:u={x:t.x+t.width,y:l};break;case left:u={x:t.x-n.width,y:l};break;default:u={x:t.x,y:t.y}}var f=i?getMainAxisFromPlacement(i):null;if(f!=null){var p=f==="y"?"height":"width";switch(o){case start:u[f]=u[f]-(t[p]/2-n[p]/2);break;case end:u[f]=u[f]+(t[p]/2-n[p]/2);break}}return u}function detectOverflow(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,o=n.strategy,s=o===void 0?e.strategy:o,l=n.boundary,u=l===void 0?clippingParents:l,f=n.rootBoundary,p=f===void 0?viewport:f,g=n.elementContext,_=g===void 0?popper:g,T=n.altBoundary,S=T===void 0?!1:T,w=n.padding,C=w===void 0?0:w,k=mergePaddingObject(typeof C!="number"?C:expandToHashMap(C,basePlacements)),E=_===popper?reference:popper,M=e.rects.popper,h=e.elements[S?E:_],$=getClippingRect(isElement$1(h)?h:h.contextElement||getDocumentElement(e.elements.popper),u,p,s),b=getBoundingClientRect(e.elements.reference),D=computeOffsets({reference:b,element:M,strategy:"absolute",placement:i}),A=rectToClientRect(Object.assign({},M,D)),H=_===popper?A:b,W={top:$.top-H.top+k.top,bottom:H.bottom-$.bottom+k.bottom,left:$.left-H.left+k.left,right:H.right-$.right+k.right},L=e.modifiersData.offset;if(_===popper&&L){var R=L[i];Object.keys(W).forEach(function(N){var U=[right,bottom].indexOf(N)>=0?1:-1,j=[top,bottom].indexOf(N)>=0?"y":"x";W[N]+=R[j]*U})}return W}function computeAutoPlacement(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,l=n.flipVariations,u=n.allowedAutoPlacements,f=u===void 0?placements:u,p=getVariation(r),g=p?l?variationPlacements:variationPlacements.filter(function(S){return getVariation(S)===p}):basePlacements,_=g.filter(function(S){return f.indexOf(S)>=0});_.length===0&&(_=g);var T=_.reduce(function(S,w){return S[w]=detectOverflow(e,{placement:w,boundary:i,rootBoundary:o,padding:s})[getBasePlacement$1(w)],S},{});return Object.keys(T).sort(function(S,w){return T[S]-T[w]})}function getExpandedFallbackPlacements(e){if(getBasePlacement$1(e)===auto)return[];var t=getOppositePlacement(e);return[getOppositeVariationPlacement(e),t,getOppositeVariationPlacement(t)]}function flip(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,l=s===void 0?!0:s,u=n.fallbackPlacements,f=n.padding,p=n.boundary,g=n.rootBoundary,_=n.altBoundary,T=n.flipVariations,S=T===void 0?!0:T,w=n.allowedAutoPlacements,C=t.options.placement,k=getBasePlacement$1(C),E=k===C,M=u||(E||!S?[getOppositePlacement(C)]:getExpandedFallbackPlacements(C)),h=[C].concat(M).reduce(function(ce,ae){return ce.concat(getBasePlacement$1(ae)===auto?computeAutoPlacement(t,{placement:ae,boundary:p,rootBoundary:g,padding:f,flipVariations:S,allowedAutoPlacements:w}):ae)},[]),$=t.rects.reference,b=t.rects.popper,D=new Map,A=!0,H=h[0],W=0;W<h.length;W++){var L=h[W],R=getBasePlacement$1(L),N=getVariation(L)===start,U=[top,bottom].indexOf(R)>=0,j=U?"width":"height",X=detectOverflow(t,{placement:L,boundary:p,rootBoundary:g,altBoundary:_,padding:f}),G=U?N?right:left:N?bottom:top;$[j]>b[j]&&(G=getOppositePlacement(G));var Z=getOppositePlacement(G),K=[];if(o&&K.push(X[R]<=0),l&&K.push(X[G]<=0,X[Z]<=0),K.every(function(ce){return ce})){H=L,A=!1;break}D.set(L,K)}if(A)for(var oe=S?3:1,de=function(ae){var ue=h.find(function(me){var fe=D.get(me);if(fe)return fe.slice(0,ae).every(function(I){return I})});if(ue)return H=ue,"break"},se=oe;se>0;se--){var pe=de(se);if(pe==="break")break}t.placement!==H&&(t.modifiersData[r]._skip=!0,t.placement=H,t.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function isAnySideFullyClipped(e){return[top,right,bottom,left].some(function(t){return e[t]>=0})}function hide(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=detectOverflow(t,{elementContext:"reference"}),l=detectOverflow(t,{altBoundary:!0}),u=getSideOffsets(s,r),f=getSideOffsets(l,i,o),p=isAnySideFullyClipped(u),g=isAnySideFullyClipped(f);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:p,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":g})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(e,t,n){var r=getBasePlacement$1(e),i=[left,top].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=o[0],l=o[1];return s=s||0,l=(l||0)*i,[left,right].indexOf(r)>=0?{x:l,y:s}:{x:s,y:l}}function offset(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=i===void 0?[0,0]:i,s=placements.reduce(function(p,g){return p[g]=distanceAndSkiddingToXY(g,t.rects,o),p},{}),l=s[t.placement],u=l.x,f=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=f),t.modifiersData[r]=s}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(e){var t=e.state,n=e.name;t.modifiersData[n]=computeOffsets({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(e){return e==="x"?"y":"x"}function preventOverflow(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,l=s===void 0?!1:s,u=n.boundary,f=n.rootBoundary,p=n.altBoundary,g=n.padding,_=n.tether,T=_===void 0?!0:_,S=n.tetherOffset,w=S===void 0?0:S,C=detectOverflow(t,{boundary:u,rootBoundary:f,padding:g,altBoundary:p}),k=getBasePlacement$1(t.placement),E=getVariation(t.placement),M=!E,h=getMainAxisFromPlacement(k),$=getAltAxis(h),b=t.modifiersData.popperOffsets,D=t.rects.reference,A=t.rects.popper,H=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,W=typeof H=="number"?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),L=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(b){if(o){var N,U=h==="y"?top:left,j=h==="y"?bottom:right,X=h==="y"?"height":"width",G=b[h],Z=G+C[U],K=G-C[j],oe=T?-A[X]/2:0,de=E===start?D[X]:A[X],se=E===start?-A[X]:-D[X],pe=t.elements.arrow,ce=T&&pe?getLayoutRect(pe):{width:0,height:0},ae=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:getFreshSideObject(),ue=ae[U],me=ae[j],fe=within(0,D[X],ce[X]),I=M?D[X]/2-oe-fe-ue-W.mainAxis:de-fe-ue-W.mainAxis,B=M?-D[X]/2+oe+fe+me+W.mainAxis:se+fe+me+W.mainAxis,q=t.elements.arrow&&getOffsetParent(t.elements.arrow),P=q?h==="y"?q.clientTop||0:q.clientLeft||0:0,J=(N=L==null?void 0:L[h])!=null?N:0,z=G+I-J-P,te=G+B-J,ee=within(T?min(Z,z):Z,G,T?max(K,te):K);b[h]=ee,R[h]=ee-G}if(l){var ie,ve=h==="x"?top:left,Me=h==="x"?bottom:right,he=b[$],ge=$==="y"?"height":"width",we=he+C[ve],ye=he-C[Me],Te=[top,left].indexOf(k)!==-1,$e=(ie=L==null?void 0:L[$])!=null?ie:0,Ce=Te?we:he-D[ge]-A[ge]-$e+W.altAxis,ke=Te?he+D[ge]+A[ge]-$e-W.altAxis:ye,Se=T&&Te?withinMaxClamp(Ce,he,ke):within(T?Ce:we,he,T?ke:ye);b[$]=Se,R[$]=Se-he}t.modifiersData[r]=R}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function getNodeScroll(e){return e===getWindow(e)||!isHTMLElement(e)?getWindowScroll(e):getHTMLElementScroll(e)}function isElementScaled(e){var t=e.getBoundingClientRect(),n=round(t.width)/e.offsetWidth||1,r=round(t.height)/e.offsetHeight||1;return n!==1||r!==1}function getCompositeRect(e,t,n){n===void 0&&(n=!1);var r=isHTMLElement(t),i=isHTMLElement(t)&&isElementScaled(t),o=getDocumentElement(t),s=getBoundingClientRect(e,i,n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((getNodeName(t)!=="body"||isScrollParent(o))&&(l=getNodeScroll(t)),isHTMLElement(t)?(u=getBoundingClientRect(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):o&&(u.x=getWindowScrollBarX(o))),{x:s.left+l.scrollLeft-u.x,y:s.top+l.scrollTop-u.y,width:s.width,height:s.height}}function order(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(l){if(!n.has(l)){var u=t.get(l);u&&i(u)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||i(o)}),r}function orderModifiers(e){var t=order(e);return modifierPhases.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function debounce$1(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function mergeByName(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function popperGenerator(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,o=i===void 0?DEFAULT_OPTIONS:i;return function(l,u,f){f===void 0&&(f=o);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,o),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},g=[],_=!1,T={state:p,setOptions:function(k){var E=typeof k=="function"?k(p.options):k;w(),p.options=Object.assign({},o,p.options,E),p.scrollParents={reference:isElement$1(l)?listScrollParents(l):l.contextElement?listScrollParents(l.contextElement):[],popper:listScrollParents(u)};var M=orderModifiers(mergeByName([].concat(r,p.options.modifiers)));return p.orderedModifiers=M.filter(function(h){return h.enabled}),S(),T.update()},forceUpdate:function(){if(!_){var k=p.elements,E=k.reference,M=k.popper;if(areValidElements(E,M)){p.rects={reference:getCompositeRect(E,getOffsetParent(M),p.options.strategy==="fixed"),popper:getLayoutRect(M)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(W){return p.modifiersData[W.name]=Object.assign({},W.data)});for(var h=0;h<p.orderedModifiers.length;h++){if(p.reset===!0){p.reset=!1,h=-1;continue}var $=p.orderedModifiers[h],b=$.fn,D=$.options,A=D===void 0?{}:D,H=$.name;typeof b=="function"&&(p=b({state:p,options:A,name:H,instance:T})||p)}}}},update:debounce$1(function(){return new Promise(function(C){T.forceUpdate(),C(p)})}),destroy:function(){w(),_=!0}};if(!areValidElements(l,u))return T;T.setOptions(f).then(function(C){!_&&f.onFirstUpdate&&f.onFirstUpdate(C)});function S(){p.orderedModifiers.forEach(function(C){var k=C.name,E=C.options,M=E===void 0?{}:E,h=C.effect;if(typeof h=="function"){var $=h({state:p,name:k,instance:T,options:M}),b=function(){};g.push($||b)}})}function w(){g.forEach(function(C){return C()}),g=[]}return T}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers}),BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function e(){return document.body};function getValueAtIndexOrReturn(e,t,n){if(Array.isArray(e)){var r=e[t];return r??(Array.isArray(n)?n[t]:n)}return e}function isType(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function invokeWithArgsOrReturn(e,t){return typeof e=="function"?e.apply(void 0,t):e}function debounce(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function splitBySpaces(e){return e.split(/\s+/).filter(Boolean)}function normalizeToArray(e){return[].concat(e)}function pushIfUnique(e,t){e.indexOf(t)===-1&&e.push(t)}function unique(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function getBasePlacement(e){return e.split("-")[0]}function arrayFrom(e){return[].slice.call(e)}function removeUndefinedProps(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function div(){return document.createElement("div")}function isElement(e){return["Element","Fragment"].some(function(t){return isType(e,t)})}function isNodeList(e){return isType(e,"NodeList")}function isMouseEvent(e){return isType(e,"MouseEvent")}function isReferenceElement(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function getArrayOfElements(e){return isElement(e)?[e]:isNodeList(e)?arrayFrom(e):Array.isArray(e)?e:arrayFrom(document.querySelectorAll(e))}function setTransitionDuration(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function setVisibilityState(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function getOwnerDocument(e){var t,n=normalizeToArray(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function isCursorOutsideInteractiveBorder(e,t){var n=t.clientX,r=t.clientY;return e.every(function(i){var o=i.popperRect,s=i.popperState,l=i.props,u=l.interactiveBorder,f=getBasePlacement(s.placement),p=s.modifiersData.offset;if(!p)return!0;var g=f==="bottom"?p.top.y:0,_=f==="top"?p.bottom.y:0,T=f==="right"?p.left.x:0,S=f==="left"?p.right.x:0,w=o.top-r+g>u,C=r-o.bottom-_>u,k=o.left-n+T>u,E=n-o.right-S>u;return w||C||k||E})}function updateTransitionEndListener(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[r](i,n)})}function actualContains(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var e=performance.now();e-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=e}function onWindowBlur(){var e=document.activeElement;if(isReferenceElement(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser=typeof window<"u"&&typeof document<"u",isIE11=isBrowser?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function e(){},onBeforeUpdate:function e(){},onCreate:function e(){},onDestroy:function e(){},onHidden:function e(){},onHide:function e(){},onMount:function e(){},onShow:function e(){},onShown:function e(){},onTrigger:function e(){},onUntrigger:function e(){},onClickOutside:function e(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function e(t){var n=Object.keys(t);n.forEach(function(r){defaultProps[r]=t[r]})};function getExtendedPassedProps(e){var t=e.plugins||[],n=t.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var l;r[o]=e[o]!==void 0?e[o]:(l=defaultProps[o])!=null?l:s}return r},{});return Object.assign({},e,n)}function getDataAttributeProps(e,t){var n=t?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:t}))):defaultKeys,r=n.reduce(function(i,o){var s=(e.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return r}function evaluateProps(e,t){var n=Object.assign({},t,{content:invokeWithArgsOrReturn(t.content,[e])},t.ignoreAttributes?{}:getDataAttributeProps(e,t.plugins));return n.aria=Object.assign({},defaultProps.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var innerHTML=function e(){return"innerHTML"};function dangerouslySetInnerHTML(e,t){e[innerHTML()]=t}function createArrowElement(e){var t=div();return e===!0?t.className=ARROW_CLASS:(t.className=SVG_ARROW_CLASS,isElement(e)?t.appendChild(e):dangerouslySetInnerHTML(t,e)),t}function setContent(e,t){isElement(t.content)?(dangerouslySetInnerHTML(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?dangerouslySetInnerHTML(e,t.content):e.textContent=t.content)}function getChildren(e){var t=e.firstElementChild,n=arrayFrom(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(CONTENT_CLASS)}),arrow:n.find(function(r){return r.classList.contains(ARROW_CLASS)||r.classList.contains(SVG_ARROW_CLASS)}),backdrop:n.find(function(r){return r.classList.contains(BACKDROP_CLASS)})}}function render(e){var t=div(),n=div();n.className=BOX_CLASS,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=div();r.className=CONTENT_CLASS,r.setAttribute("data-state","hidden"),setContent(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props);function i(o,s){var l=getChildren(t),u=l.box,f=l.content,p=l.arrow;s.theme?u.setAttribute("data-theme",s.theme):u.removeAttribute("data-theme"),typeof s.animation=="string"?u.setAttribute("data-animation",s.animation):u.removeAttribute("data-animation"),s.inertia?u.setAttribute("data-inertia",""):u.removeAttribute("data-inertia"),u.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?u.setAttribute("role",s.role):u.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&setContent(f,e.props),s.arrow?p?o.arrow!==s.arrow&&(u.removeChild(p),u.appendChild(createArrowElement(s.arrow))):u.appendChild(createArrowElement(s.arrow)):p&&u.removeChild(p)}return{popper:t,onUpdate:i}}render.$$tippy=!0;var idCounter=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(e,t){var n=evaluateProps(e,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(t)))),r,i,o,s=!1,l=!1,u=!1,f=!1,p,g,_,T=[],S=debounce(z,n.interactiveDebounce),w,C=idCounter++,k=null,E=unique(n.plugins),M={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},h={id:C,reference:e,popper:div(),popperInstance:k,props:n,state:M,plugins:E,clearDelayTimeouts:Ce,setProps:ke,setContent:Se,show:Pe,hide:Re,hideWithInteractivity:Le,enable:Te,disable:$e,unmount:Ue,destroy:Ie};if(!n.render)return h;var $=n.render(h),b=$.popper,D=$.onUpdate;b.setAttribute("data-tippy-root",""),b.id="tippy-"+h.id,h.popper=b,e._tippy=h,b._tippy=h;var A=E.map(function(O){return O.fn(h)}),H=e.hasAttribute("aria-expanded");return q(),oe(),G(),Z("onCreate",[h]),n.showOnCreate&&we(),b.addEventListener("mouseenter",function(){h.props.interactive&&h.state.isVisible&&h.clearDelayTimeouts()}),b.addEventListener("mouseleave",function(){h.props.interactive&&h.props.trigger.indexOf("mouseenter")>=0&&U().addEventListener("mousemove",S)}),h;function W(){var O=h.props.touch;return Array.isArray(O)?O:[O,0]}function L(){return W()[0]==="hold"}function R(){var O;return!!((O=h.props.render)!=null&&O.$$tippy)}function N(){return w||e}function U(){var O=N().parentNode;return O?getOwnerDocument(O):document}function j(){return getChildren(b)}function X(O){return h.state.isMounted&&!h.state.isVisible||currentInput.isTouch||p&&p.type==="focus"?0:getValueAtIndexOrReturn(h.props.delay,O?0:1,defaultProps.delay)}function G(O){O===void 0&&(O=!1),b.style.pointerEvents=h.props.interactive&&!O?"":"none",b.style.zIndex=""+h.props.zIndex}function Z(O,F,Y){if(Y===void 0&&(Y=!0),A.forEach(function(V){V[O]&&V[O].apply(V,F)}),Y){var Q;(Q=h.props)[O].apply(Q,F)}}function K(){var O=h.props.aria;if(O.content){var F="aria-"+O.content,Y=b.id,Q=normalizeToArray(h.props.triggerTarget||e);Q.forEach(function(V){var ne=V.getAttribute(F);if(h.state.isVisible)V.setAttribute(F,ne?ne+" "+Y:Y);else{var le=ne&&ne.replace(Y,"").trim();le?V.setAttribute(F,le):V.removeAttribute(F)}})}}function oe(){if(!(H||!h.props.aria.expanded)){var O=normalizeToArray(h.props.triggerTarget||e);O.forEach(function(F){h.props.interactive?F.setAttribute("aria-expanded",h.state.isVisible&&F===N()?"true":"false"):F.removeAttribute("aria-expanded")})}}function de(){U().removeEventListener("mousemove",S),mouseMoveListeners=mouseMoveListeners.filter(function(O){return O!==S})}function se(O){if(!(currentInput.isTouch&&(u||O.type==="mousedown"))){var F=O.composedPath&&O.composedPath()[0]||O.target;if(!(h.props.interactive&&actualContains(b,F))){if(normalizeToArray(h.props.triggerTarget||e).some(function(Y){return actualContains(Y,F)})){if(currentInput.isTouch||h.state.isVisible&&h.props.trigger.indexOf("click")>=0)return}else Z("onClickOutside",[h,O]);h.props.hideOnClick===!0&&(h.clearDelayTimeouts(),h.hide(),l=!0,setTimeout(function(){l=!1}),h.state.isMounted||ue())}}}function pe(){u=!0}function ce(){u=!1}function ae(){var O=U();O.addEventListener("mousedown",se,!0),O.addEventListener("touchend",se,TOUCH_OPTIONS),O.addEventListener("touchstart",ce,TOUCH_OPTIONS),O.addEventListener("touchmove",pe,TOUCH_OPTIONS)}function ue(){var O=U();O.removeEventListener("mousedown",se,!0),O.removeEventListener("touchend",se,TOUCH_OPTIONS),O.removeEventListener("touchstart",ce,TOUCH_OPTIONS),O.removeEventListener("touchmove",pe,TOUCH_OPTIONS)}function me(O,F){I(O,function(){!h.state.isVisible&&b.parentNode&&b.parentNode.contains(b)&&F()})}function fe(O,F){I(O,F)}function I(O,F){var Y=j().box;function Q(V){V.target===Y&&(updateTransitionEndListener(Y,"remove",Q),F())}if(O===0)return F();updateTransitionEndListener(Y,"remove",g),updateTransitionEndListener(Y,"add",Q),g=Q}function B(O,F,Y){Y===void 0&&(Y=!1);var Q=normalizeToArray(h.props.triggerTarget||e);Q.forEach(function(V){V.addEventListener(O,F,Y),T.push({node:V,eventType:O,handler:F,options:Y})})}function q(){L()&&(B("touchstart",J,{passive:!0}),B("touchend",te,{passive:!0})),splitBySpaces(h.props.trigger).forEach(function(O){if(O!=="manual")switch(B(O,J),O){case"mouseenter":B("mouseleave",te);break;case"focus":B(isIE11?"focusout":"blur",ee);break;case"focusin":B("focusout",ee);break}})}function P(){T.forEach(function(O){var F=O.node,Y=O.eventType,Q=O.handler,V=O.options;F.removeEventListener(Y,Q,V)}),T=[]}function J(O){var F,Y=!1;if(!(!h.state.isEnabled||ie(O)||l)){var Q=((F=p)==null?void 0:F.type)==="focus";p=O,w=O.currentTarget,oe(),!h.state.isVisible&&isMouseEvent(O)&&mouseMoveListeners.forEach(function(V){return V(O)}),O.type==="click"&&(h.props.trigger.indexOf("mouseenter")<0||s)&&h.props.hideOnClick!==!1&&h.state.isVisible?Y=!0:we(O),O.type==="click"&&(s=!Y),Y&&!Q&&ye(O)}}function z(O){var F=O.target,Y=N().contains(F)||b.contains(F);if(!(O.type==="mousemove"&&Y)){var Q=ge().concat(b).map(function(V){var ne,le=V._tippy,be=(ne=le.popperInstance)==null?void 0:ne.state;return be?{popperRect:V.getBoundingClientRect(),popperState:be,props:n}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(Q,O)&&(de(),ye(O))}}function te(O){var F=ie(O)||h.props.trigger.indexOf("click")>=0&&s;if(!F){if(h.props.interactive){h.hideWithInteractivity(O);return}ye(O)}}function ee(O){h.props.trigger.indexOf("focusin")<0&&O.target!==N()||h.props.interactive&&O.relatedTarget&&b.contains(O.relatedTarget)||ye(O)}function ie(O){return currentInput.isTouch?L()!==O.type.indexOf("touch")>=0:!1}function ve(){Me();var O=h.props,F=O.popperOptions,Y=O.placement,Q=O.offset,V=O.getReferenceClientRect,ne=O.moveTransition,le=R()?getChildren(b).arrow:null,be=V?{getBoundingClientRect:V,contextElement:V.contextElement||N()}:e,Ne={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Ee){var xe=Ee.state;if(R()){var He=j(),Ae=He.box;["placement","reference-hidden","escaped"].forEach(function(Oe){Oe==="placement"?Ae.setAttribute("data-placement",xe.placement):xe.attributes.popper["data-popper-"+Oe]?Ae.setAttribute("data-"+Oe,""):Ae.removeAttribute("data-"+Oe)}),xe.attributes.popper={}}}},_e=[{name:"offset",options:{offset:Q}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ne}},Ne];R()&&le&&_e.push({name:"arrow",options:{element:le,padding:3}}),_e.push.apply(_e,(F==null?void 0:F.modifiers)||[]),h.popperInstance=createPopper(be,b,Object.assign({},F,{placement:Y,onFirstUpdate:_,modifiers:_e}))}function Me(){h.popperInstance&&(h.popperInstance.destroy(),h.popperInstance=null)}function he(){var O=h.props.appendTo,F,Y=N();h.props.interactive&&O===TIPPY_DEFAULT_APPEND_TO||O==="parent"?F=Y.parentNode:F=invokeWithArgsOrReturn(O,[Y]),F.contains(b)||F.appendChild(b),h.state.isMounted=!0,ve()}function ge(){return arrayFrom(b.querySelectorAll("[data-tippy-root]"))}function we(O){h.clearDelayTimeouts(),O&&Z("onTrigger",[h,O]),ae();var F=X(!0),Y=W(),Q=Y[0],V=Y[1];currentInput.isTouch&&Q==="hold"&&V&&(F=V),F?r=setTimeout(function(){h.show()},F):h.show()}function ye(O){if(h.clearDelayTimeouts(),Z("onUntrigger",[h,O]),!h.state.isVisible){ue();return}if(!(h.props.trigger.indexOf("mouseenter")>=0&&h.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(O.type)>=0&&s)){var F=X(!1);F?i=setTimeout(function(){h.state.isVisible&&h.hide()},F):o=requestAnimationFrame(function(){h.hide()})}}function Te(){h.state.isEnabled=!0}function $e(){h.hide(),h.state.isEnabled=!1}function Ce(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function ke(O){if(!h.state.isDestroyed){Z("onBeforeUpdate",[h,O]),P();var F=h.props,Y=evaluateProps(e,Object.assign({},F,removeUndefinedProps(O),{ignoreAttributes:!0}));h.props=Y,q(),F.interactiveDebounce!==Y.interactiveDebounce&&(de(),S=debounce(z,Y.interactiveDebounce)),F.triggerTarget&&!Y.triggerTarget?normalizeToArray(F.triggerTarget).forEach(function(Q){Q.removeAttribute("aria-expanded")}):Y.triggerTarget&&e.removeAttribute("aria-expanded"),oe(),G(),D&&D(F,Y),h.popperInstance&&(ve(),ge().forEach(function(Q){requestAnimationFrame(Q._tippy.popperInstance.forceUpdate)})),Z("onAfterUpdate",[h,O])}}function Se(O){h.setProps({content:O})}function Pe(){var O=h.state.isVisible,F=h.state.isDestroyed,Y=!h.state.isEnabled,Q=currentInput.isTouch&&!h.props.touch,V=getValueAtIndexOrReturn(h.props.duration,0,defaultProps.duration);if(!(O||F||Y||Q)&&!N().hasAttribute("disabled")&&(Z("onShow",[h],!1),h.props.onShow(h)!==!1)){if(h.state.isVisible=!0,R()&&(b.style.visibility="visible"),G(),ae(),h.state.isMounted||(b.style.transition="none"),R()){var ne=j(),le=ne.box,be=ne.content;setTransitionDuration([le,be],0)}_=function(){var _e;if(!(!h.state.isVisible||f)){if(f=!0,b.offsetHeight,b.style.transition=h.props.moveTransition,R()&&h.props.animation){var De=j(),Ee=De.box,xe=De.content;setTransitionDuration([Ee,xe],V),setVisibilityState([Ee,xe],"visible")}K(),oe(),pushIfUnique(mountedInstances,h),(_e=h.popperInstance)==null||_e.forceUpdate(),Z("onMount",[h]),h.props.animation&&R()&&fe(V,function(){h.state.isShown=!0,Z("onShown",[h])})}},he()}}function Re(){var O=!h.state.isVisible,F=h.state.isDestroyed,Y=!h.state.isEnabled,Q=getValueAtIndexOrReturn(h.props.duration,1,defaultProps.duration);if(!(O||F||Y)&&(Z("onHide",[h],!1),h.props.onHide(h)!==!1)){if(h.state.isVisible=!1,h.state.isShown=!1,f=!1,s=!1,R()&&(b.style.visibility="hidden"),de(),ue(),G(!0),R()){var V=j(),ne=V.box,le=V.content;h.props.animation&&(setTransitionDuration([ne,le],Q),setVisibilityState([ne,le],"hidden"))}K(),oe(),h.props.animation?R()&&me(Q,h.unmount):h.unmount()}}function Le(O){U().addEventListener("mousemove",S),pushIfUnique(mouseMoveListeners,S),S(O)}function Ue(){h.state.isVisible&&h.hide(),h.state.isMounted&&(Me(),ge().forEach(function(O){O._tippy.unmount()}),b.parentNode&&b.parentNode.removeChild(b),mountedInstances=mountedInstances.filter(function(O){return O!==h}),h.state.isMounted=!1,Z("onHidden",[h]))}function Ie(){h.state.isDestroyed||(h.clearDelayTimeouts(),h.unmount(),P(),delete e._tippy,h.state.isDestroyed=!0,Z("onDestroy",[h]))}}function tippy(e,t){t===void 0&&(t={});var n=defaultProps.plugins.concat(t.plugins||[]);bindGlobalEventListeners();var r=Object.assign({},t,{plugins:n}),i=getArrayOfElements(e),o=i.reduce(function(s,l){var u=l&&createTippy(l,r);return u&&s.push(u),s},[]);return isElement(e)?o[0]:o}tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;Object.assign({},applyStyles$1,{effect:function e(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});tippy.setDefaultProps({render});function get_each_context(e,t,n){const r=e.slice();return r[15]=t[n],r}function create_if_block(e){let t,n="Artist Sentiment Scatterplot",r,i,o,s,l,u,f,p,g,_,T,S,w,C,k,E,M,h=`This scatterplot shows the distribution of artists based on the sentiment
			of their songs. Each circle represents an artist, positioned according to
			the proportion of their songs classified as positive or negative.`,$=ensure_array_like(e[5]),b=[];for(let D=0;D<$.length;D+=1)b[D]=create_each_block(get_each_context(e,$,D));return{c(){t=element("h3"),t.textContent=n,r=space(),i=svg_element("svg"),o=svg_element("g"),s=svg_element("g"),l=svg_element("text"),u=text$1("Positive"),_=svg_element("g"),T=svg_element("text"),S=text$1("Negative");for(let D=0;D<b.length;D+=1)b[D].c();E=space(),M=element("p"),M.textContent=h,this.h()},l(D){t=claim_element(D,"H3",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(t)!=="svelte-uxmd2z"&&(t.textContent=n),r=claim_space(D),i=claim_svg_element(D,"svg",{width:!0,height:!0});var A=children(i);o=claim_svg_element(A,"g",{transform:!0});var H=children(o);s=claim_svg_element(H,"g",{class:!0,transform:!0});var W=children(s);l=claim_svg_element(W,"text",{x:!0,y:!0,"text-anchor":!0});var L=children(l);u=claim_text(L,"Positive"),L.forEach(detach),W.forEach(detach),_=claim_svg_element(H,"g",{class:!0});var R=children(_);T=claim_svg_element(R,"text",{x:!0,y:!0,"text-anchor":!0,transform:!0});var N=children(T);S=claim_text(N,"Negative"),N.forEach(detach),R.forEach(detach);for(let U=0;U<b.length;U+=1)b[U].l(H);H.forEach(detach),A.forEach(detach),E=claim_space(D),M=claim_element(D,"P",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(M)!=="svelte-jraldy"&&(M.textContent=h),this.h()},h(){attr(t,"class","chart-title svelte-xbiji2"),attr(l,"x",f=e[3]/2),attr(l,"y",p=e[4].bottom/2),attr(l,"text-anchor","middle"),attr(s,"class","x-axis svelte-xbiji2"),attr(s,"transform",g="translate(0, "+e[2]+")"),attr(T,"x",w=-e[4].left/2),attr(T,"y",C=e[2]/2),attr(T,"text-anchor","middle"),attr(T,"transform","rotate(-90)"),attr(_,"class","y-axis svelte-xbiji2"),attr(o,"transform",k="translate("+e[4].left+", "+e[4].top+")"),attr(i,"width",e[0]),attr(i,"height",e[1]),attr(M,"class","chart-description svelte-xbiji2")},m(D,A){insert_hydration(D,t,A),insert_hydration(D,r,A),insert_hydration(D,i,A),append_hydration(i,o),append_hydration(o,s),append_hydration(s,l),append_hydration(l,u),append_hydration(o,_),append_hydration(_,T),append_hydration(T,S);for(let H=0;H<b.length;H+=1)b[H]&&b[H].m(o,null);insert_hydration(D,E,A),insert_hydration(D,M,A)},p(D,A){if(A&8&&f!==(f=D[3]/2)&&attr(l,"x",f),A&16&&p!==(p=D[4].bottom/2)&&attr(l,"y",p),A&4&&g!==(g="translate(0, "+D[2]+")")&&attr(s,"transform",g),A&16&&w!==(w=-D[4].left/2)&&attr(T,"x",w),A&4&&C!==(C=D[2]/2)&&attr(T,"y",C),A&160){$=ensure_array_like(D[5]);let H;for(H=0;H<$.length;H+=1){const W=get_each_context(D,$,H);b[H]?b[H].p(W,A):(b[H]=create_each_block(W),b[H].c(),b[H].m(o,null))}for(;H<b.length;H+=1)b[H].d(1);b.length=$.length}A&16&&k!==(k="translate("+D[4].left+", "+D[4].top+")")&&attr(o,"transform",k),A&1&&attr(i,"width",D[0]),A&2&&attr(i,"height",D[1])},d(D){D&&(detach(t),detach(r),detach(i),detach(E),detach(M)),destroy_each(b,D)}}}function create_each_block(e){let t,n,r,i,o,s,l;return{c(){t=svg_element("circle"),this.h()},l(u){t=claim_svg_element(u,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"data-tippy-content":!0}),children(t).forEach(detach),this.h()},h(){attr(t,"cx",n=e[15].x),attr(t,"cy",r=e[15].y),attr(t,"r","5"),attr(t,"fill",i=e[7](e[15].Positive>e[15].Negative?"Positive":"Negative")),attr(t,"stroke","white"),attr(t,"stroke-width","1"),attr(t,"data-tippy-content",o=e[15].artist+"<br>Positive: "+(e[15].Positive*100).toFixed(1)+"%<br>Negative: "+(e[15].Negative*100).toFixed(1)+"%")},m(u,f){insert_hydration(u,t,f),s||(l=listen(t,"mouseover",e[8]),s=!0)},p(u,f){f&32&&n!==(n=u[15].x)&&attr(t,"cx",n),f&32&&r!==(r=u[15].y)&&attr(t,"cy",r),f&160&&i!==(i=u[7](u[15].Positive>u[15].Negative?"Positive":"Negative"))&&attr(t,"fill",i),f&32&&o!==(o=u[15].artist+"<br>Positive: "+(u[15].Positive*100).toFixed(1)+"%<br>Negative: "+(u[15].Negative*100).toFixed(1)+"%")&&attr(t,"data-tippy-content",o)},d(u){u&&detach(t),s=!1,l()}}}function create_fragment$2(e){let t,n=e[5].length>0&&create_if_block(e);return{c(){t=element("div"),n&&n.c(),this.h()},l(r){t=claim_element(r,"DIV",{class:!0});var i=children(t);n&&n.l(i),i.forEach(detach),this.h()},h(){attr(t,"class","chart-container svelte-xbiji2")},m(r,i){insert_hydration(r,t,i),n&&n.m(t,null),e[9](t)},p(r,[i]){r[5].length>0?n?n.p(r,i):(n=create_if_block(r),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i:noop$1,o:noop$1,d(r){r&&detach(t),n&&n.d(),e[9](null)}}}function instance$1(e,t,n){let r,i,o,s,l,u,f=[],p=800,g=600,_;const T=E=>{const M={};return E.forEach(h=>{const{performer:$,Sentiment:b}=h;$.split(/[,&]/g).map(A=>A.trim()).forEach(A=>{M[A]||(M[A]={Positive:0,Negative:0}),M[A][b]++})}),Object.entries(M).map(([h,$])=>{const b=$.Positive+$.Negative;return{artist:h,Positive:$.Positive/b,Negative:$.Negative/b,x:0,y:0}})};onMount(async()=>{n(5,f=T(await csv("assets/billboard.csv"))),w(),S()});async function S(){const E=forceSimulation(f).force("x",forceX(M=>s(M.Positive)).strength(1)).force("y",forceY(M=>l(M.Negative)).strength(1)).force("collide",forceCollide(8)).on("tick",()=>{n(5,f=f.map((M,h)=>({...M,x:E.nodes()[h].x,y:E.nodes()[h].y})))});await tick()}function w(){n(0,p=_.clientWidth),n(1,g=_.clientHeight)}const C=E=>{tippy(E.target,{content:E.target.dataset.tippyContent,allowHTML:!0,interactive:!0,theme:"light"})};function k(E){binding_callbacks[E?"unshift":"push"](()=>{_=E,n(6,_)})}return e.$$.update=()=>{e.$$.dirty&17&&n(3,i=p-r.left-r.right),e.$$.dirty&18&&n(2,o=g-r.top-r.bottom),e.$$.dirty&8&&(s=linear().domain([0,1]).range([0,i])),e.$$.dirty&4&&(l=linear().domain([1,0]).range([0,o]))},n(4,r={top:20,right:20,bottom:40,left:40}),n(7,u=ordinal().domain(["Positive","Negative"]).range(["#1f77b4","#d62728"])),[p,g,o,i,r,f,_,u,C,k]}class ArtistScatterplot extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$2,safe_not_equal,{})}}class ArtistRadarChart extends SvelteComponent{constructor(t){super(),init(this,t,null,null,safe_not_equal,{})}}class Conclusion extends SvelteComponent{constructor(t){super(),init(this,t,null,null,safe_not_equal,{})}}class Methodology extends SvelteComponent{constructor(t){super(),init(this,t,null,null,safe_not_equal,{})}}class Footer extends SvelteComponent{constructor(t){super(),init(this,t,null,null,safe_not_equal,{})}}function create_fragment$1(e){let t,n,r,i,o,s,l,u="The Rise of Negativity",f,p,g,_,T,S,w,C="The Artist Landscape",k,E,M,h,$,b,D,A,H,W,L;return n=new Header({}),i=new Introduction({}),p=new NegativeSongsChart({}),_=new EmotionChart({}),E=new ArtistScatterplot({}),h=new ArtistRadarChart({}),b=new Conclusion({}),A=new Methodology({}),W=new Footer({}),{c(){t=element("main"),create_component(n.$$.fragment),r=space(),create_component(i.$$.fragment),o=space(),s=element("section"),l=element("h2"),l.textContent=u,f=space(),create_component(p.$$.fragment),g=space(),create_component(_.$$.fragment),T=space(),S=element("section"),w=element("h2"),w.textContent=C,k=space(),create_component(E.$$.fragment),M=space(),create_component(h.$$.fragment),$=space(),create_component(b.$$.fragment),D=space(),create_component(A.$$.fragment),H=space(),create_component(W.$$.fragment),this.h()},l(R){t=claim_element(R,"MAIN",{class:!0});var N=children(t);claim_component(n.$$.fragment,N),r=claim_space(N),claim_component(i.$$.fragment,N),o=claim_space(N),s=claim_element(N,"SECTION",{class:!0});var U=children(s);l=claim_element(U,"H2",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(l)!=="svelte-53wktd"&&(l.textContent=u),f=claim_space(U),claim_component(p.$$.fragment,U),g=claim_space(U),claim_component(_.$$.fragment,U),U.forEach(detach),T=claim_space(N),S=claim_element(N,"SECTION",{class:!0});var j=children(S);w=claim_element(j,"H2",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(w)!=="svelte-yedn0x"&&(w.textContent=C),k=claim_space(j),claim_component(E.$$.fragment,j),M=claim_space(j),claim_component(h.$$.fragment,j),j.forEach(detach),$=claim_space(N),claim_component(b.$$.fragment,N),D=claim_space(N),claim_component(A.$$.fragment,N),H=claim_space(N),claim_component(W.$$.fragment,N),N.forEach(detach),this.h()},h(){attr(l,"class","svelte-13fc0tv"),attr(s,"class","svelte-13fc0tv"),attr(w,"class","svelte-13fc0tv"),attr(S,"class","svelte-13fc0tv"),attr(t,"class","svelte-13fc0tv")},m(R,N){insert_hydration(R,t,N),mount_component(n,t,null),append_hydration(t,r),mount_component(i,t,null),append_hydration(t,o),append_hydration(t,s),append_hydration(s,l),append_hydration(s,f),mount_component(p,s,null),append_hydration(s,g),mount_component(_,s,null),append_hydration(t,T),append_hydration(t,S),append_hydration(S,w),append_hydration(S,k),mount_component(E,S,null),append_hydration(S,M),mount_component(h,S,null),append_hydration(t,$),mount_component(b,t,null),append_hydration(t,D),mount_component(A,t,null),append_hydration(t,H),mount_component(W,t,null),L=!0},p:noop$1,i(R){L||(transition_in(n.$$.fragment,R),transition_in(i.$$.fragment,R),transition_in(p.$$.fragment,R),transition_in(_.$$.fragment,R),transition_in(E.$$.fragment,R),transition_in(h.$$.fragment,R),transition_in(b.$$.fragment,R),transition_in(A.$$.fragment,R),transition_in(W.$$.fragment,R),L=!0)},o(R){transition_out(n.$$.fragment,R),transition_out(i.$$.fragment,R),transition_out(p.$$.fragment,R),transition_out(_.$$.fragment,R),transition_out(E.$$.fragment,R),transition_out(h.$$.fragment,R),transition_out(b.$$.fragment,R),transition_out(A.$$.fragment,R),transition_out(W.$$.fragment,R),L=!1},d(R){R&&detach(t),destroy_component(n),destroy_component(i),destroy_component(p),destroy_component(_),destroy_component(E),destroy_component(h),destroy_component(b),destroy_component(A),destroy_component(W)}}}class Index extends SvelteComponent{constructor(t){super(),init(this,t,null,create_fragment$1,safe_not_equal,{})}}const title="Title TK",description="Description tk.",copy={title,description};function version(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.18.0"),console.log("build: 2024-05-14-14:32"),console.log("--- --- --- --- --- ---")}function create_fragment(e){let t,n,r,i;return t=new Meta({props:{title:e[1],description:e[2],url:e[3],preloadFont:e[0],keywords:e[4]}}),r=new Index({}),{c(){create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment)},l(o){claim_component(t.$$.fragment,o),n=claim_space(o),claim_component(r.$$.fragment,o)},m(o,s){mount_component(t,o,s),insert_hydration(o,n,s),mount_component(r,o,s),i=!0},p:noop$1,i(o){i||(transition_in(t.$$.fragment,o),transition_in(r.$$.fragment,o),i=!0)},o(o){transition_out(t.$$.fragment,o),transition_out(r.$$.fragment,o),i=!1},d(o){o&&detach(n),destroy_component(t,o),destroy_component(r,o)}}}function instance(e,t,n){let{data:r}=t;version();const i=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/atlas/AtlasGrotesk-Regular-Web.woff2","https://pudding.cool/assets/fonts/atlas/AtlasGrotesk-Bold-Web.woff2"],{title:o,description:s,url:l,keywords:u}=copy;return setContext("copy",copy),setContext("data",r.data),e.$$set=f=>{"data"in f&&n(5,r=f.data)},[i,o,s,l,u,r]}class Page extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{data:5})}}export{Page as component};
